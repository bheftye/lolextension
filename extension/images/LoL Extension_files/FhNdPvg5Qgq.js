/*!CK:731430951!*//*1434763940,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["PeL2+"]); }

__d("AppEventsAppIdentifyingBreakdowns",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={app_version:null,short_version_code:null,app_name:null,ui_element:null};},null);
__d("AppEventsAsyncTaskStatus",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ASYNC_JOB_SCHEDULED:"async_job_scheduled",NOT_LAUNCHED:"async_job_not_launched",STARTED:"async_job_started",PROGRESS_NOTICE:"async_job_progress",COMPLETED:"async_job_completed",FAILED:"async_job_failed"};},null);
__d("AppEventsCohortsChartType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={USER_RETENTION:"USER_RETENTION",VALUE_RETENTION:"VALUE_RETENTION",CUMULATIVE_EVENTS:"CUMULATIVE_EVENTS",LIFETIME_VALUE:"LIFETIME_VALUE"};},null);
__d("AppEventsCohortsCollationInterval",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={DAILY:"DAILY",WEEKLY:"WEEKLY",MONTHLY:"MONTHLY"};},null);
__d("AppEventsFunnelAggregationMethod",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={UNIQUES:"uniques",COUNT:"count",VALUE_SUM:"value_sum",USD_SUM:"usd_sum"};},null);
__d("GraphMobileMeasurementEdge",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={company:{app:"mm_apps",advertiser:"mm_advertisers"},app:{app_ad_network:"mm_app_ad_networks"},app_ad_network:{campaign:"mm_campaigns"},campaign:{ad_set:"mm_ad_sets"},ad_set:{ad:"mm_ads"}};},null);
__d("MobileMeasurementClickthroughParam",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={APP_ID:"i",AD_NETWORK_ID:"anid",AD_NETWORK_NAME:"an",OS_TYPE:"t",IOS_IDFA:"idfa",ANDROID_ADVERTISING_ID:"aaid",GENERIC_IDFA:"gidfa",CUSTOM_KEY_1:"c.k1",CUSTOM_VALUE_1:"c.v1",CUSTOM_KEY_2:"c.k2",CUSTOM_VALUE_2:"c.v2",CUSTOM_KEY_3:"c.k3",CUSTOM_VALUE_3:"c.v3",GENERIC_ID:"device_id",AD_NETWORK_CAMPAIGN_ID:"c.a",AD_NETWORK_CAMPAIGN_NAME:"c.n",AD_NETWORK_ADSET_ID:"as.a",AD_NETWORK_ADSET_NAME:"as.n",AD_NETWORK_AD_ID:"a.a",AD_NETWORK_AD_NAME:"a.n",AD_NETWORK_PUBLISHER_ID:"an_p_id",AD_NETWORK_SITE_APP_ID:"an_s_id",AD_NETWORK_SITE_APP_NAME:"an_s_name",IOS_UDID:"ios_udid",ANDROID_DEVICE_ID:"android_id",UNKNOWN_ID:"unid",MAC_ADDRESS:"mac_addr",IOS_IDFA_SHA1:"idfa_sha1",IOS_IDFA_MD5:"idfa_md5",ANDROID_ADVERTISING_ID_SHA1:"aaid_sha1",ANDROID_ADVERTISING_ID_MD5:"aaid_md5",ANDROID_DEVICE_ID_SHA1:"android_id_sha1",ANDROID_DEVICE_ID_MD5:"android_id_md5",UNKNOWN_ID_SHA1:"unid_sha1",UNKNOWN_ID_MD5:"unid_md5",MAC_ADDRESS_SHA1:"mac_addr_sha1",MAC_ADDRESS_MD5:"mac_addr_md5",IP_ADDRESS:"ip_addr",ODIN:"odin",ID:"id",REF_ID:"ref_id",LIMIT_AD_TRACKING:"limit_ad_tracking",ADVERTISER_TRACKING_ENABLED:"ate",PRIVACY_PROTECTION:"pp",COUNTRY:"ctry",CLICK_TIME:"time",AD_SIZE:"ad_sze",ADVERTISER_USER_ID:"adv_uid",ANDROID_REFERRER:"a_ref",DEVICE_MODEL:"d_model",DEVICE_BRAND:"d_brand",DEVICE_PLATFORM:"d_platform"};},null);
__d("MobileMeasurementConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={NUM_SUPPORTED_CUSTOM_PARAMS:3,TRACKING_URL:"https:\/\/www.facebook.com\/atbn",AGGREGATE_BY_PARAMS:{AD_NETWORK_NAME:"ad_network_name",CAMPAIGN_NAME:"campaign_name",CAMPAIGN_ID:"campaign_id",ADSET_NAME:"adset_name",ADSET_ID:"adset_id",AD_NAME:"ad_name",AD_ID:"ad_id",CLIENT:"client",GENDER:"gender",AGE:"age",COUNTRY:"country",CUSTOM_KEY_1:"custom_key_1",CUSTOM_VALUE_1:"custom_value_1",CUSTOM_KEY_2:"custom_key_2",CUSTOM_VALUE_2:"custom_value_2",CUSTOM_KEY_3:"custom_key_3",CUSTOM_VALUE_3:"custom_value_3"}};},null);
__d("MobileMeasurementObjectType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={AD:"ad",AD_SET:"ad_set",APP:"app",APP_AD_NETWORK:"app_ad_network",CAMPAIGN:"campaign",ADVERTISER:"advertiser",COMPANY:"company"};},null);
__d("MobileMeasurementReportType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={DEVICE_LEVEL:"DEVICE_LEVEL",AGGREGATED:"AGGREGATED"};},null);
__d("PixelAppEventDefaultMapping",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={add_to_cart:"fb_mobile_add_to_cart",checkout:"fb_mobile_purchase",key_page_view:"fb_mobile_content_view",registration:"fb_mobile_complete_registration",_no_mapping:"fb_mobile_activate_app"};},null);
__d("Constants.atlas",["AtlasGatekeepers","AtlasSitevars","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j='\u2013',k='America/New_York',l='(GMT-05:00) Eastern Time',m='USD',n=24,o=60,p=60,q=p*o,r=q*n,s=1000,t=s*q,u=t*n,v=u*7,w=u*365,x=250,y=2000,z=1000,aa=g.atlas_item_limit?h.ADSATLAS_LIMITS.MAX_ITEMS_PER_TYPE_PER_CAMPAIGN.exceptional:h.ADSATLAS_LIMITS.MAX_ITEMS_PER_TYPE_PER_CAMPAIGN["default"],ba=g.atlas_item_limit?h.ADSATLAS_LIMITS.MAX_ASSIGNMENTS_PER_CAMPAIGN.exceptional:h.ADSATLAS_LIMITS.MAX_ASSIGNMENTS_PER_CAMPAIGN["default"],ca=10,da="application/x-shockwave-flash",ea=i._("We're sorry, something went wrong on our end. We're working on getting this up and running right now. Please reach out and let us know if this continues to be a problem.");e.exports={CURRENCY:m,DEFAULT_TIMEZONE:k,DEFAULT_TIMEZONE_SELECTOR_STRING:l,DISABLED_FEATURE_TOOLTIP:ea,EN_DASH:j,FLASH_MIME_TYPE:da,HOURS_PER_DAY:n,MAX_ALIAS_LENGTH:x,MAX_ASSIGNMENTS_PER_CAMPAIGN:ba,MAX_CLICK_THROUGHS_PER_AD:ca,MAX_DESCRIPTION_LENGTH:y,MAX_ITEMS_PER_TYPE_PER_CAMPAIGN:aa,MAX_NAME_LENGTH:z,MILLISECONDS_PER_DAY:u,MILLISECONDS_PER_HOUR:t,MILLISECONDS_PER_SECOND:s,MINUTES_PER_HOUR:o,SECONDS_PER_DAY:r,SECONDS_PER_HOUR:q,SECONDS_PER_MINUTE:p,WEEK_IN_MILLISECONDS:v,YEAR_IN_MILLISECONDS:w};},null);
__d("RecentlyUsed.atlas",["AtlasConfig","CacheStorage","Constants.atlas"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=i.WEEK_IN_MILLISECONDS,k=new h('localstorage',g.CompanyID+'_'+g.UserID+'_recently_used_ids_');function l(n){var o=k.get(n)||[],p=Date.now()-j,q=o.filter(function(r){return r.itemID&&r.lastUsed&&r.lastUsed>p;});return q;}var m={get:function(n){return l(n).map(function(o){return o.itemID;});},add:function(n,o){var p=l(n).filter(function(q){return q.itemID!==o;});p.unshift({itemID:o,lastUsed:Date.now()});k.set(n,p);},remove:function(n,o){var p=l(n).filter(function(q){return q.itemID!==o;});k.set(n,p);}};e.exports=m;},null);
__d("Headline.atlas",["React","ReactComponentWithPureRenderMixin","Typography.atlas","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=g,m=l.PropTypes,n=g.createClass({displayName:"Headline",propTypes:{color:m.oneOf(['blue','dark','medium']).isRequired,display:m.oneOf(['inline','block']).isRequired,size:m.oneOf(['large','medium','small']).isRequired},getDefaultProps:function(){return {color:'medium',display:'inline',size:'medium'};},mixins:[h],render:function(){var o=this.props,p=o.color,q=o.size,r=(function(v,w){var x={},y=Object.prototype.hasOwnProperty;if(v==null)throw new TypeError();for(var z in v)if(y.call(v,z)&&!y.call(w,z))x[z]=v[z];return x;})(o,{color:1,size:1}),s=i.getClassName(null,null,p),t=((q==='large'?"_2ak3":'')+(q==='medium'?' '+"_2ak4":'')+(q==='small'?' '+"_2ak5":'')),u=k(this.props.className,"_3ma","_2ak6",s,t);if(this.props.display==='block')return (g.createElement("div",g.__spread({},r,{className:u}),this.props.children));return (g.createElement("span",g.__spread({},r,{className:u}),this.props.children));}});e.exports=n;},null);
__d("Card.atlas",["Headline.atlas","React","ReactComponentWithPureRenderMixin","underscore.ads","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=h,n=m.PropTypes,o=h.createClass({displayName:"Card",propTypes:{contentPadding:n.oneOf(['none','normal']).isRequired,footerPadding:n.oneOf(['none','normal']).isRequired,headerPadding:n.oneOf(['none','normal']).isRequired,footer:n.node,hasFullHeaderBorder:n.bool,header:n.node},mixins:[i],getDefaultProps:function(){return {contentPadding:'normal',footerPadding:'normal',headerPadding:'normal'};},render:function(){var p=this.props.header||null;if(j.isString(p))p=(h.createElement("div",{className:"_3ma _5c8h"},h.createElement(g,{size:"medium"},p)));return (h.createElement("div",{className:l(this.props.className,"_5s4i"),"data-testid":this.props['data-testid']},this.props.header?(h.createElement("div",{className:(("_5s4j")+(!this.props.hasFullHeaderBorder&&this.props.headerPadding==='normal'?' '+"_fo7":'')+(this.props.hasFullHeaderBorder&&this.props.headerPadding==='normal'?' '+"_fo8":''))},p)):null,h.createElement("div",{className:(("_5s4k")+(this.props.contentPadding==='normal'?' '+"_5szr":''))},this.props.children),this.props.footer?(h.createElement("div",{className:(("_5sfc")+(this.props.footerPadding==='normal'?' '+"_fo9":''))},this.props.footer)):null));}});e.exports=o;},null);
__d("DAOError.atlas",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h){if(h instanceof Error){this.type=h.name;this.code=null;this.message=h.message;}else{this.type=h.type||null;this.code=h.code||null;this.message=h.message||null;}Object.freeze(this);}e.exports=g;},null);
__d("wrapCatch.atlas",["DAOError.atlas","ErrorUtils"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';function i(j){return function(k){if(k instanceof Error){h.reportError(k);k=new g(k);}return j(k);};}e.exports=i;},null);
__d("DependentStateMixin.atlas",["ReactUpdates","underscore.ads","emptyFunction","invariant","wrapCatch.atlas"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';function l(q,r){this.$DependentStateMixin0=q;this.$DependentStateMixin1=r;this.$DependentStateMixin2={};this.$DependentStateMixin3={};this.$DependentStateMixin4={};this.$DependentStateMixin5={};this.$DependentStateMixin6={};this.$DependentStateMixin7=false;}l.prototype.getInitialState=function(){var q={};this.$DependentStateMixin1.forEach(function(r){q[r.name]={isLoading:true,value:null,error:null};});return q;};l.prototype.componentWillMount=function(){this.$DependentStateMixin7=true;this.$DependentStateMixin8(this.$DependentStateMixin0.props);this.$DependentStateMixin9(this.$DependentStateMixin0.props);};l.prototype.componentDidMount=function(){this.$DependentStateMixin9(this.$DependentStateMixin0.props);};l.prototype.componentWillReceiveProps=function(q){this.$DependentStateMixin8(q);this.$DependentStateMixin9(q);};l.prototype.componentWillUnmount=function(){this.$DependentStateMixin7=false;var q=Object.keys(this.$DependentStateMixin2);q.forEach(function(r){return this.$DependentStateMixina(r);}.bind(this));};l.prototype.componentDidUpdate=function(q,r){this.$DependentStateMixin9(this.$DependentStateMixin0.props);};l.prototype.$DependentStateMixin9=function(q){var r=false,s=true;g.batchedUpdates(function(){while(s){s=false;this.$DependentStateMixin1.forEach(function(t){var u=Object.assign({},this.$DependentStateMixin0.state,this.$DependentStateMixin3),v=t.name,w=this.$DependentStateMixinb(t,q),x={};if(w){var y=w.getID();x={storeID:y,lastInform:this.$DependentStateMixin4[y]};}var z=t.getDependentData.call(null,u,q),aa=this.$DependentStateMixin5[v],ba=this.$DependentStateMixin6[v];if(h.isEqual(x,ba)&&h.isEqual(z,aa))return;this.$DependentStateMixin5[v]=z;this.$DependentStateMixin6[v]=x;s=true;r=true;var ca=!aa||t.shouldClear.call(null,aa,z);if(ca)this.$DependentStateMixin3[v]={isLoading:true,value:null,error:null};this.$DependentStateMixinc(t,z,q);}.bind(this));}if(r&&this.$DependentStateMixin7)this.$DependentStateMixin0.setState(this.$DependentStateMixin3);}.bind(this));};l.prototype.$DependentStateMixinc=function(q,r,s){var t=q.name,u=this.$DependentStateMixin5[t],v=this.$DependentStateMixin6[t],w=q.getValue.call(null,r);if(!w||!w.then){this.$DependentStateMixind(q,s,u,v,w,null);return;}w.then(function(x){this.$DependentStateMixind(q,s,u,v,x,null);}.bind(this))["catch"](k(function(x){this.$DependentStateMixind(q,s,u,v,null,x);}.bind(this)));};l.prototype.$DependentStateMixind=function(q,r,s,t,u,v){var w=q.name;if(!h.isEqual(this.$DependentStateMixin6[w],t)||!h.isEqual(this.$DependentStateMixin5[w],s))return;this.$DependentStateMixin3[w]={isLoading:false,value:u,error:v};g.batchedUpdates(function(){if(this.$DependentStateMixin7)this.$DependentStateMixin0.setState(this.$DependentStateMixin3);this.$DependentStateMixin9(r);}.bind(this));};l.prototype.$DependentStateMixine=function(q){this.$DependentStateMixin4[q]++;if(this.$DependentStateMixin0.isMounted())this.$DependentStateMixin9(this.$DependentStateMixin0.props);};l.prototype.$DependentStateMixin8=function(q){var r=h.compact(this.$DependentStateMixin1.map(function(x){return this.$DependentStateMixinb(x,q);}.bind(this))),s=h.indexBy(r,function(x){return x.getID();}),t=Object.keys(s),u=Object.keys(this.$DependentStateMixin2),v=h.difference(u,t);v.forEach(function(x){return this.$DependentStateMixina(x);}.bind(this));var w=h.difference(t,u);w.forEach(function(x){return this.$DependentStateMixinf(s[x]);}.bind(this));};l.prototype.$DependentStateMixinf=function(q){var r=q.getID();this.$DependentStateMixin2[r]=q.subscribe(this.$DependentStateMixine.bind(this));this.$DependentStateMixin4[r]=1;};l.prototype.$DependentStateMixina=function(q){this.$DependentStateMixin2[q].unsubscribe();delete this.$DependentStateMixin2[q];delete this.$DependentStateMixin4[q];};l.prototype.$DependentStateMixinb=function(q,r){return q.getStore.call(null,r);};function m(q){return q.constructor.displayName||'unknown';}function n(q,r){var s=m(q);h.forEach(r,function(t,u){j(t.getValue);j('store' in t||'getStore' in t);j(!t.store||!t.getStore);});}function o(q){var r=h.map(q,function(s,t){var u=s.getDependentData||i.thatReturns({}),v=s.getStore||i.thatReturns(s.store),w=s.shouldClear||i.thatReturnsTrue;return {getDependentData:u,getStore:v,getValue:s.getValue,name:t,shouldClear:w};});return {_dependentStateMixin:(null),getInitialState:function(){var s=(this);j(!s._dependentStateMixin);n(s,q);s._dependentStateMixin=new l(this,r);return s._dependentStateMixin.getInitialState();},componentWillMount:function(){var s=(this);p(s,'componentWillMount');s._dependentStateMixin.componentWillMount();},componentDidMount:function(){var s=(this);p(s,'componentDidMount');s._dependentStateMixin.componentDidMount();},componentDidUpdate:function(s,t){var u=(this);p(u,'componentDidUpdate');u._dependentStateMixin.componentDidUpdate(s,t);},componentWillReceiveProps:function(s){var t=(this);p(t,'componentWillReceiveProps');t._dependentStateMixin.componentWillReceiveProps(s);},componentWillUnmount:function(){var s=(this);p(s,'componentWillUnmount');j(!!s._dependentStateMixin);s._dependentStateMixin.componentWillUnmount();s._dependentStateMixin=null;}};}function p(q,r){j(!!q._dependentStateMixin);}e.exports=o;},null);
__d("HighlightedText.atlas",["React","ReactComponentWithPureRenderMixin","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g.createClass({displayName:"HighlightedText",mixins:[h],render:function(){return (g.createElement("span",{className:j(this.props.className,"_pi")},this.props.children));}});e.exports=k;},null);
__d("TextSearchUtil.atlas",["TokenizeUtil"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={isMatch:function(i,j){if(!j)return false;return this._getNonMatchingTokens(i,j).length>1;},getTokens:function(i,j){j=j.trim();var k=this._getNonMatchingTokens(i,j);i=i.replace(/\s+/g,' ');j=j.replace(/\s+/g,' ');var l=[];k.forEach(function(o,p){l.push(o);if(p!==k.length-1)l.push(j);});var m=[],n=0;l.forEach(function(o,p){if(!o)return;var q=p%2===1,r=o.length,s=i.substr(n,r);m.push({text:s,isHighlighted:q});n+=r;});return m;},_getNonMatchingTokens:function(i,j){var k=g.flatten(i),l=g.flatten(j);return l?k.split(l):[k];}};e.exports=h;},null);
__d("TextWithHighlights.atlas",["HighlightedText.atlas","React","ReactComponentWithPureRenderMixin","Text.atlas","TextSearchUtil.atlas"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"TextWithHighlights",mixins:[i],propTypes:{highlight:m.string.isRequired,text:m.string.isRequired},getDefaultProps:function(){return {highlight:''};},render:function(){var o=this.props,p;if(!o.highlight){p=o.text;}else{var q=k.getTokens(o.text,o.highlight);p=q.map(function(r,s){if(r.isHighlighted)return (h.createElement(g,{key:s},r.text));return r.text;});}return (h.createElement(j,h.__spread({},this.props),p));}});e.exports=n;},null);
__d("ContextualLayerHideOnScrollOverHeader.atlas",["DOMQuery","Event","ExecutionEnvironment","SubscriptionsHandler","csx","getElementPosition","getStyleProperty"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';function n(o){this.$ContextualLayerHideOnScrollOverHeader0=o;}n.prototype.enable=function(){if(!this.$ContextualLayerHideOnScrollOverHeader1){var o=new j();this.$ContextualLayerHideOnScrollOverHeader1=o;o.addSubscriptions(this.$ContextualLayerHideOnScrollOverHeader0.subscribe('contextchange',this.$ContextualLayerHideOnScrollOverHeader2.bind(this)),this.$ContextualLayerHideOnScrollOverHeader0.subscribe('show',this.$ContextualLayerHideOnScrollOverHeader3.bind(this)),this.$ContextualLayerHideOnScrollOverHeader0.subscribe('hide',this.$ContextualLayerHideOnScrollOverHeader4.bind(this)));}};n.prototype.disable=function(){if(this.$ContextualLayerHideOnScrollOverHeader1){this.$ContextualLayerHideOnScrollOverHeader1.release();this.$ContextualLayerHideOnScrollOverHeader1=(void 0);}this.$ContextualLayerHideOnScrollOverHeader4();};n.prototype.$ContextualLayerHideOnScrollOverHeader3=function(){if(this.$ContextualLayerHideOnScrollOverHeader5||!i.canUseDOM)return;var o=this.$ContextualLayerHideOnScrollOverHeader0.getContextScrollParent();if(o!==window)return;var p=g.scry(document.body,"div._4glt");if(p.length!==1)return;this.$ContextualLayerHideOnScrollOverHeader6=p[0];this.$ContextualLayerHideOnScrollOverHeader7=l(this.$ContextualLayerHideOnScrollOverHeader6).height;this.$ContextualLayerHideOnScrollOverHeader5=h.listen(o,'scroll',this.$ContextualLayerHideOnScrollOverHeader8.bind(this));};n.prototype.$ContextualLayerHideOnScrollOverHeader4=function(){this.$ContextualLayerHideOnScrollOverHeader5&&this.$ContextualLayerHideOnScrollOverHeader5.remove();this.$ContextualLayerHideOnScrollOverHeader5=null;};n.prototype.$ContextualLayerHideOnScrollOverHeader8=function(){if(m(this.$ContextualLayerHideOnScrollOverHeader6,'display')==='none')return;var o=this.$ContextualLayerHideOnScrollOverHeader0.getContent().getBoundingClientRect().top;if(o<=this.$ContextualLayerHideOnScrollOverHeader7)this.$ContextualLayerHideOnScrollOverHeader0.hide();};n.prototype.$ContextualLayerHideOnScrollOverHeader2=function(){this.$ContextualLayerHideOnScrollOverHeader4();if(this.$ContextualLayerHideOnScrollOverHeader0.isShown())this.$ContextualLayerHideOnScrollOverHeader3();};e.exports=n;},null);
__d("translateToSearchableEntryData.atlas",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h){return {auxiliaryData:h,subtitle:h.subtitle,title:h.name,type:h.category,uniqueID:h.id};}e.exports=g;},null);
__d("SearchSource.atlas",["AbstractSearchSource","Promise","RecentlyUsed.atlas","SearchableEntry","underscore.ads","invariant","translateToSearchableEntryData.atlas","wrapCatch.atlas"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=200;for(var p in g)if(g.hasOwnProperty(p))r[p]=g[p];var q=g===null?null:g.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=g;function r(){this.$SearchSource0=k.throttle(this.$SearchSource1.bind(this),o);}r.prototype.getExcludedEntriesByID=function(){return {};};r.prototype.$SearchSource2=function(s){var t=this.getExcludedEntriesByID();return s.filter(function(u){return !t[u.id];});};r.prototype.$SearchSource3=function(){var s=this.getRecentlyUsedKey();if(!s)return h.resolve([]);var t=i.get(s),u=Object.keys(this.getExcludedEntriesByID());return this.getByIDs(k.difference(t,u)).then(function(v){return k.compact(t.map(function(w){return v[w];}));});};r.prototype.$SearchSource4=function(){return h.allObject({recentlyUsedItems:this.$SearchSource3(),bootstrapItems:this.bootstrapSuggest()}).then(function(s){return this.translateToSearchableEntries(s.recentlyUsedItems.concat(s.bootstrapItems));}.bind(this)).then(function(s){return k.uniq(s,function(t){return t.getUniqueID();});})["catch"](n(function(){return [];}));};r.prototype.bootstrapImpl=function(s){if(s)this.$SearchSource4().then(function(t){return s(t);});};r.prototype.searchImpl=function(s,t,u){if(s===''){this.$SearchSource4().then(function(v){return t(v,s);});return;}this.$SearchSource0(s,t,u);};r.prototype.$SearchSource1=function(s,t,u){var v=Object.assign({},u,{query:s});this.suggest(v).then(function(w){w=this.$SearchSource2(w);return this.translateToSearchableEntries(w).then(function(x){t(x,s);});}.bind(this))["catch"](n(function(w){return t([],s);}));};r.prototype.bootstrapSuggest=function(){return h.resolve([]);};r.prototype.translateToSearchableEntries=function(s,t){return this.translateToSearchableEntriesData(s).then(function(u){return u.map(function(v){return new j(Object.assign({},v,{type:t}));});});};r.prototype.translateToSearchableEntry=function(s,t){return this.translateToSearchableEntries([s],t).then(function(u){return u[0];});};r.prototype.translateToSearchableEntriesData=function(s){return h.all(s.map(function(t){return h.resolve(this.translateToSearchableEntryData(t));}.bind(this)));};r.prototype.translateToSearchableEntryData=function(s){return m(s);};r.prototype.getRecentlyUsedKey=function(){return null;};r.prototype.getByIDs=function(s){l(false);};e.exports=r;},null);
__d("SearchableListPrompt.contrib",["AbstractSearchSource","AbstractTypeahead.react","Layout.react","React","ReactComponentWithPureRenderMixin","Scroll","SearchableEntry","Set","Text.atlas","TextWithHighlights.atlas","TypeaheadViewItem","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=b('Layout.react').Column,u=b('Layout.react').FillColumn,v=100,w=j,x=w.PropTypes,y=j.createClass({displayName:"SearchableListPrompt",propTypes:{onSelect:x.func.isRequired,resetQueryStringOnSelect:x.bool.isRequired,searchSource:x.instanceOf(g).isRequired,disabledEntryIDs:x.instanceOf(n),emptySearchResultsText:x.string,excludedEntries:x.object,placeholder:x.string,searchSourceOptions:x.object,selectedEntry:x.instanceOf(m),showEntriesBeforeSearch:x.bool},mixins:[k],getDefaultProps:function(){return {resetQueryStringOnSelect:false};},getInitialState:function(){return {queryString:''};},_onChange:function(event){var ca=(event.target);this.setState({queryString:ca.value});},_onSelect:function(ca){this.props.onSelect(ca);if(this.props.resetQueryStringOnSelect)this.setState({queryString:''});},focusInput:function(){this.refs&&this.refs.typeahead.focusInput();},render:function(){return (j.createElement("div",{className:s(this.props.className,"_4ktx")},j.createElement(z,{disabledEntryIDs:this.props.disabledEntryIDs,emptySearchResultsText:this.props.emptySearchResultsText,excludedEntries:this.props.excludedEntries,onChange:this._onChange,onSelectAttempt:this._onSelect,placeholder:this.props.placeholder,queryString:this.state.queryString,ref:"typeahead",searchSource:this.props.searchSource,searchSourceOptions:this.props.searchSourceOptions,selectedEntry:this.props.selectedEntry,showEntriesBeforeSearch:this.props.showEntriesBeforeSearch})));}}),z=j.createClass({displayName:"InlineTypeahead",propTypes:{onChange:x.func.isRequired,onSelectAttempt:x.func.isRequired,searchSource:x.object.isRequired,disabledEntryIDs:x.instanceOf(n),emptySearchResultsText:x.string,excludedEntries:x.object,onBlur:x.func,onFocus:x.func,placeholder:x.string,queryString:x.string,searchSourceOptions:x.object,selectedEntry:x.instanceOf(m),showEntriesBeforeSearch:x.bool},mixins:[k],getInitialState:function(){return {isFocused:false};},_onFocus:function(){this.setState({isFocused:true});this.props.onFocus&&this.props.onFocus();},_onBlur:function(){this.setState({isFocused:false});this.props.onBlur&&this.props.onBlur();},focusInput:function(){this.refs.typeahead.focusInput();},render:function(){var ca=(("_4kty")+(this.state.isFocused?' '+"_4ktz":''));return (j.createElement("div",{className:this.props.className},j.createElement(h,{autoHighlight:true,excludedEntries:this.props.excludedEntries,hideViewWithEntries:false,inputClassName:ca,onBlur:this._onBlur,onChange:this.props.onChange,onFocus:this._onFocus,onSelectAttempt:this.props.onSelectAttempt,placeholder:this.props.placeholder,presenter:{ViewRenderer:aa,alwaysVisibleOnFocus:!!this.props.emptySearchResultsText,extraRendererProps:{disabledEntryIDs:this.props.disabledEntryIDs,emptySearchResultsText:this.props.emptySearchResultsText,showEntriesBeforeSearch:this.props.showEntriesBeforeSearch},maxEntries:v,useLayer:false},queryString:this.props.queryString,ref:"typeahead",searchSource:this.props.searchSource,searchSourceOptions:this.props.searchSourceOptions,selectedEntry:this.props.selectedEntry,selectOnBlur:false,showEntriesOnFocus:true})));}}),aa=j.createClass({displayName:"InlineTypeaheadView",propTypes:{entries:x.array.isRequired,onSelect:x.func.isRequired,disabledEntryIDs:x.instanceOf(n),emptySearchResultsText:x.string,highlightedEntry:x.object,onHighlight:x.func,onRenderHighlight:x.func,queryString:x.string,selectedEntry:x.object,showEntriesBeforeSearch:x.bool},getDefaultProps:function(){return {showEntriesBeforeSearch:true};},mixins:[k],_renderItem:function(ca){var da=ca.getUniqueID(),ea=this.props.highlightedEntry?this.props.highlightedEntry.getUniqueID():null,fa=this.props.selectedEntry?this.props.selectedEntry.getUniqueID():null,ga=da===ea,ha=da===fa,ia=this.props.disabledEntryIDs&&this.props.disabledEntryIDs.has(da);return (j.createElement(ba,{disabled:ia,entry:ca,highlighted:ga,key:ca.getUniqueID(),selected:ha,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight,queryString:this.props.queryString}));},_onMouseLeave:function(event){if(this.props.onHighlight)this.props.onHighlight(null,event);},render:function(){var ca=null,da=this.props.entries.length&&(this.props.showEntriesBeforeSearch||this.props.queryString);if(da){ca=this.props.entries.map(this._renderItem);}else if(this.props.queryString)ca=(j.createElement("li",null,j.createElement(o,{className:"_4kt-",color:"light",size:"s"},this.props.emptySearchResultsText)));return (j.createElement("ul",{className:s(this.props.className,"_4kt_"),onMouseLeave:this._onMouseLeave},ca));}}),ba=j.createClass({displayName:"InlineTypeaheadViewItem",mixins:[Object.assign({},q.Mixin,k)],propTypes:q.propTypes,componentDidUpdate:function(){var ca=j.findDOMNode(this);if(this.props.highlighted){var da=ca.offsetParent,ea=da&&(ca.offsetTop<(l.getTop(da)+da.offsetHeight))&&((ca.offsetTop+ca.offsetHeight)>l.getTop(da));if(!ea)ca.scrollIntoView(false);}},render:function(){var ca=this.props.entry.getSubtitle(),da=(j.createElement("div",null,j.createElement(p,{className:"_4ku0",highlight:this.props.queryString,text:this.props.entry.getTitle(),size:"s",color:this.props.disabled?'light':'dark',display:"block"}),ca?(j.createElement(p,{className:"_4ku1",color:"light",display:"block",highlight:this.props.queryString,size:"s",text:ca})):null)),ea=this.props.disabled?(j.createElement(i,null,j.createElement(u,null,da),j.createElement(t,null,j.createElement(o,{size:"s",color:"light",display:"block"}," ? ")))):da,fa=(("_4ku2")+(this.props.highlighted?' '+"_4ku3":'')+(this.props.selected?' '+"_4ku4":'')+(!ca?' '+"_4ku5":''));return (j.createElement("li",{className:fa,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight},ea));}});e.exports=y;},null);
__d("SearchableDropdownInput.contrib",["AbstractSearchSource","Card.atlas","ContextualLayer.react","ContextualLayerAutoFlip","ContextualLayerHideOnScrollOverHeader.atlas","ContextualLayerUpdateOnScroll","Keys","LayerAutoFocus","LayerHideOnBlur","LayerHideOnEscape","React","ReactComponentWithPureRenderMixin","ReactLayeredComponentMixin","SearchableListPrompt.contrib","Set","Text.atlas","XUIPopoverButton.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();'use strict';var z=q,aa=z.PropTypes,ba=q.createClass({displayName:"SearchableDropdownInput",propTypes:{onSelect:aa.func.isRequired,resetQueryStringOnSelect:aa.bool.isRequired,searchSource:aa.instanceOf(g).isRequired,showSelectedSubtitle:aa.bool.isRequired,customHeader:aa.element,chevron:aa.element,disabled:aa.bool,disabledEntryIDs:aa.instanceOf(u),dropdownWidth:aa.number,emptySearchResultsText:aa.string,excludedEntries:aa.object,placeholder:aa.string,searchSourceOptions:aa.object,showEntriesBeforeSearch:aa.bool,skipAutoWidth:aa.bool,title:aa.string},mixins:[r,s],getDefaultProps:function(){return {resetQueryStringOnSelect:false,showSelectedSubtitle:true};},getInitialState:function(){return {isShowing:false};},_onLayerToggle:function(ca){if(!ca&&this.state.isShowing){this.setState({isShowing:false});this.focusInput();}},_toggleLayer:function(){if(!this.props.disabled)this.setState({isShowing:!this.state.isShowing});},_onKeyDown:function(event){switch(event.keyCode){case m.DOWN:case m.UP:case m.SPACE:this.setState({isShowing:true});break;}},open:function(){this.setState({isShowing:true});},close:function(){this.setState({isShowing:false});},focusInput:function(){this.refs&&q.findDOMNode(this.refs.button).focus();},_onSelect:function(ca){this.setState({isShowing:false});this.focusInput();this.props.onSelect(ca);},renderLayers:function(){var ca;if(!this.props.skipAutoWidth)ca=q.findDOMNode(this.refs.button).offsetWidth;ca=this.props.dropdownWidth||ca||null;return {prompt:(q.createElement(i,{behaviors:{ContextualLayerAutoFlip:j,ContextualLayerUpdateOnScroll:l,ContextualLayerHideOnScrollOverHeader:k,LayerAutoFocus:n,LayerHideOnBlur:o,LayerHideOnEscape:p},contextRef:function(){return this.refs.button;}.bind(this),position:"below",alignment:"left",offsetY:4,shown:this.state.isShowing,autofocus:true,onToggle:this._onLayerToggle},q.createElement("div",{style:{width:ca},className:this.props.divClassName,onFocus:this.props.onFocus},q.createElement(h,{className:this.props.listClassName,contentPadding:"none"},this.props.customHeader,q.createElement(t,{disabledEntryIDs:this.props.disabledEntryIDs,emptySearchResultsText:this.props.emptySearchResultsText,excludedEntries:this.props.excludedEntries,onSelect:this._onSelect,resetQueryStringOnSelect:this.props.resetQueryStringOnSelect,searchSource:this.props.searchSource,searchSourceOptions:this.props.searchSourceOptions,selectedEntry:this.props.value,showEntriesBeforeSearch:this.props.showEntriesBeforeSearch})))))};},render:function(){var ca=this.props.placeholder,da=this.props.value;if(da){var ea=this.props.title||da.getTitle(),fa=this.props.showSelectedSubtitle&&da.getSubtitle()?(q.createElement(v,{color:"light",size:"s"},' ',da.getSubtitle())):null;ca=(q.createElement("span",null,ea,fa));}return (q.createElement(w,{className:y(this.props.className,"__yl"),chevron:this.props.chevron,disabled:this.props.disabled,ref:"button",label:ca,onClick:this._toggleLayer,onKeyDown:this._onKeyDown,size:"large",maxwidth:null}));}});e.exports=ba;},null);
__d("SearchableDropdownInput.atlas",["DependentStateMixin.atlas","FormBinding.atlas","React","ReactComponentWithPureRenderMixin","SearchSource.atlas","SearchableDropdownInput.contrib","Set","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=i,q=p.PropTypes,r=i.createClass({displayName:"AtlasSearchableDropdownInput",propTypes:{searchSource:q.instanceOf(k).isRequired},mixins:[j,g({selectedEntry:{store:null,getDependentData:function(t,u){return {searchSource:u.searchSource,selectedItem:u.value};},getValue:function(t){if(!t.selectedItem)return null;return t.searchSource.translateToSearchableEntry(t.selectedItem);}}})],getDefaultProps:function(){return {resetQueryStringOnSelect:false,showSelectedSubtitle:true};},onSelect:function(t){var u=t.getAuxiliaryData();this.props.onSelect(u);},open:function(){this.refs&&this.refs.input.open();},close:function(){this.refs&&this.refs.input.close();},focusInput:function(){this.refs&&this.refs.input.focusInput();},render:function(){return (i.createElement(l,i.__spread({},this.props,{className:o(this.props.className,"_s3d"),listClassName:"_3vzm",onSelect:this.onSelect,ref:"input",value:this.state.selectedEntry.value})));}}),s=i.createClass({displayName:"SearchableDropdownFormInput",propTypes:{binding:q.instanceOf(h).isRequired,resetQueryStringOnSelect:q.bool.isRequired,searchSource:q.instanceOf(k).isRequired,customHeader:q.element,disabled:q.bool,disabledEntryIDs:q.instanceOf(m),emptySearchResultsText:q.string,placeholder:q.string,searchSourceOptions:q.object},getDefaultProps:function(){return {resetQueryStringOnSelect:false};},mixins:[j],open:function(){this.refs&&this.refs.dropdown.open();},close:function(){this.refs&&this.refs.dropdown.close();},focusInput:function(){this.refs&&this.refs.dropdown.focusInput();},_onSelect:function(t){this.props.binding.update(t);},render:function(){return (i.createElement(r,{className:this.props.className,customHeader:this.props.customHeader,disabled:this.props.disabled,disabledEntryIDs:this.props.disabledEntryIDs,emptySearchResultsText:this.props.emptySearchResultsText,placeholder:this.props.placeholder,searchSource:this.props.searchSource,searchSourceOptions:this.props.searchSourceOptions,resetQueryStringOnSelect:this.props.resetQueryStringOnSelect,onSelect:this._onSelect,ref:"input",value:this.props.binding.value}));}});r.FormInput=s;e.exports=r;},null);
__d("InsightsCodeSnippet",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g.createClass({displayName:"InsightsCodeSnippet",onClick:function(){g.findDOMNode(this.refs.textarea).focus();g.findDOMNode(this.refs.textarea).select();},render:function(){return (g.createElement("div",{className:"fbInsightsCodeSnippet",onClick:this.onClick},g.createElement("div",{className:"topEdge"}),g.createElement("div",{className:"bottomEdge"}),g.createElement("textarea",{row:"1",readOnly:true,ref:"textarea",wrap:"off",value:this.props.code})));}});e.exports=h;},null);
__d("InsightsSummaryBar",["React","ReactChildren","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g.createClass({displayName:"InsightsSummaryBar",render:function(){var l=this.props.className||"_5p_r",m=this.props.listClassName||"_5p_t",n=this.props.itemClassName||"_5p_s",o=h.map(this.props.children,function(p){return (g.createElement("li",{className:n},p));});return (g.createElement("div",g.__spread({},this.props,{className:j(this.props.className,l)}),g.createElement("ul",{className:m},o)));}});e.exports=k;},null);
__d("InsightsLegendColoredCheckbox.react",["Image.react","Keys","React","cx","emptyFunction","joinClasses","xuiglyph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=i,o=n.PropTypes,p=i.createClass({displayName:"InsightsLegendColoredCheckbox",propTypes:{checked:o.bool,color:o.string.isRequired,defaultChecked:o.bool,disabled:o.bool,onChange:o.func,size:o.string},getDefaultProps:function(){return {checked:undefined,defaultChecked:false,onChange:k,size:'small'};},getInitialState:function(){return {checked:this.props.checked!==undefined?this.props.checked:this.props.defaultChecked};},componentWillReceiveProps:function(q){var r=q.checked!==undefined?q.checked:this.state.checked;this.setState({checked:r});},isChecked:function(){return this.props.checked!==undefined?this.props.checked:this.state.checked;},onChange:function(q){this.toggleState();},onClick:function(q){this.toggleState();},onKeyDown:function(q){if(q.keyCode==h.SPACE){this.toggleState();q.preventDefault();}},toggleState:function(){if(!this.props.disabled){var q=!this.isChecked();this.setState({checked:q});this.props.onChange(q);}},render:function(){var q=l(this.props.className,"_1ywc _5fns"),r=i.createElement("input",i.__spread({},this.props,{type:"checkbox",checked:this.isChecked(),onChange:this.onChange})),s=null;switch(this.props.size){case 'small':s=m({name:'checkmark',shade:'white',size:'small'});break;case 'medium':s=m({name:'checkmark',shade:'white',size:'medium'});break;case 'large':s=m({name:'checkmark',shade:'white',size:'large'});break;}return (i.createElement("span",{"aria-checked":this.isChecked(),className:q,onClick:this.onClick,onKeyDown:this.onKeyDown,role:"checkbox",style:{background:this.props.color},tabIndex:"0"},r,i.createElement(g,{src:s,style:{display:this.isChecked()?'inline-block':'none'}})));}});e.exports=p;},null);
__d("InsightsLegendCheckboxKey.react",["InputLabel.react","InsightsLegendColoredCheckbox.react","React","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=i,m=l.PropTypes,n=i.createClass({displayName:"InsightsLegendCheckboxKey",propTypes:{checked:m.bool,color:m.string.isRequired,disabled:m.bool,onChange:m.func,isInline:m.bool},componentWillReceiveProps:function(o){var p=o.checked!==undefined?o.checked:this.state.checked;this.setState({checked:p});},getDefaultProps:function(){return {checked:true,onChange:k,isInline:true};},getInitialState:function(){return {checked:this.props.checked};},onChange:function(o){this.setState({checked:o});this.props.onChange(o);},render:function(){var o=this.props.isInline?'inline':'block';return (i.createElement(g,{className:"_7l7",display:o},i.createElement(h,{disabled:this.props.disabled,color:this.props.color,checked:this.state.checked,size:this.props.size,onChange:this.onChange}),i.createElement("label",{className:"_7l6"},this.props.children)));}});e.exports=n;},null);
__d("InsightsLegendScrollableVert.react",["InsightsLegend.react","LayoutScrollableView.react","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=i,k=j.PropTypes,l=i.createClass({displayName:"InsightsLegendScrollableVert",propTypes:{height:k.number.isRequired,width:k.number.isRequired},render:function(){return (i.createElement(h,{height:this.props.height,width:this.props.width},i.createElement(g,{className:this.props.className,layout:g.layout.STACKED},this.props.children)));}});e.exports=l;},null);
__d("InsightsEventLogger",["BonsaiConfig","Cookie","Env","GraphAPI","InsightsContext","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=86400000,n=60000,o=40,p='^[0-9a-zA-Z_]+[0-9a-zA-Z _-]*$',q='analytics_let',r='analytics_ref_src',s='analytics_ref_id',t=30*n,u={};function v(){return j('2.2').object('application',k.getBonsaiApiAccess().clientID);}function w(fa){v().edge('activities').post(fa);}function x(fa){var ga=da(r),ha=da(s);fa.app_id=k.getObjID();fa.ref_source=ga;fa.ref_id=ha;var ia={event:'CUSTOM_APP_EVENTS',access_token:k.getBonsaiApiAccess().accessToken,advertiser_tracking_enabled:true,application_tracking_enabled:true,custom_events:[fa]};w(ia);ea(r,ga);ea(s,ha);ea(q,Date.now().toString());}function y(){if(!i.no_cookies&&!da(q)){var fa=(new l(window.location.href)).getQueryData();ea(r,fa.__aref_src);ea(s,fa.__aref_id);x({_eventName:'fb_mobile_activate_app',section:k.getActiveSectionName().toLowerCase(),screen_width:screen.width,screen_height:screen.height,resolution:screen.width.toString()+' x '+screen.height.toString(),referrer:document.referrer?document.referrer:null});}}function z(fa){if(g.isSuperUser)return;y();x(fa);}function aa(fa,ga,ha){var ia={_eventName:'date_range_change',days_in_range:Math.floor(ga/m)-Math.floor(fa/m)+1,range_end_days_before_now:Math.floor(Date.now()/m)-Math.floor(ga/m),preset:ha,section:k.getActiveSectionName().toLowerCase()};z(ia);}function ba(fa,ga){var ha=k.getActiveSectionName().toLowerCase(),ia={_eventName:ha+'_card_view',card:fa};for(var ja in ga)if(ga.hasOwnProperty(ja)&&ia[ja]===(void 0))ia[ja]=ga[ja];z(ia);}function ca(fa){if(u[fa])return true;if(fa===null||fa.length===0||fa.length>o||!(new RegExp(p)).test(fa))return false;u[fa]=true;return true;}function da(fa){if(!i.no_cookies&&h.get(fa))return h.get(fa);return null;}function ea(fa,ga){if(!i.no_cookies&&ga)h.set(fa,ga,t,'/analytics');}Object.assign(v,{logCardView:ba,logEvent:z,logDateRangeChange:aa});e.exports=v;},null);
__d("InsightsExpandableSideNav.react",["Image.react","ImageBlock.react","InsightsEventLogger","React","TabBarItem.react","cloneWithProps","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=j,p=o.PropTypes,q=j.createClass({displayName:"InsightsExpandableSideNav",propTypes:{activeSection:p.string},render:function(){var t=j.Children.map(this.props.children,function(u){return l(u,{activeSection:this.props.activeSection});}.bind(this));return (j.createElement("ul",j.__spread({},this.props,{className:"_39pa"}),t));}}),r=j.createClass({displayName:"InsightsExpandableSideNavGroup",propTypes:{activeSection:p.string,icon:p.shape({active:p.object,inactive:p.object})},render:function(){var t=this._shouldExpand(),u=(("_39pb")+(t?' '+"_39pc":'')+(' '+"_3-98")),v=this.props.icon?j.createElement(g,{src:t?this.props.icon.active:this.props.icon.inactive}):null,w=[];j.Children.forEach(this.props.children,function(z,aa){if(z)w.push(l(z,{key:aa,isSelected:this.props.activeSection==z.props.sectionName}));}.bind(this));var x=w[0];x=v?j.createElement(h,null,j.createElement("div",{className:"_2qvo"},v),x):x;var y=[];if(t)y=w.slice(1,w.length);return (j.createElement("div",{className:n(this.props.className,u)},j.createElement("div",{className:"_39pd"},x),y?j.createElement("div",{className:"_4s7s _3-8w"},y):null));},_shouldExpand:function(){var t=false;j.Children.forEach(this.props.children,function(u){if(u&&u.props.sectionName==this.props.activeSection)t=true;}.bind(this));return t;}}),s=j.createClass({displayName:"InsightsExpandableSideNavItem",propTypes:{isSelected:p.bool.isRequired,sectionName:p.string.isRequired},render:function(){var t=(("_39pe")+(this.props.isSelected?' '+"_39pf":''));return (j.createElement("div",null,j.createElement(k,j.__spread({},this.props,{className:n(this.props.className,t),onClick:this._onClick}),this.props.children)));},_onClick:function(){i.logEvent({_eventName:'side_nav_item_click',section:this.props.sectionName});}});q.Group=r;q.Item=s;e.exports=q;},null);
__d("DevsiteIOSSettingImplicitPurchaseWarningDialog",["React","SimpleXUIDialog","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={showSupportedSDKWarning:function(){h.show(i._("Automatic logging of in-app purchases on iOS is now turned on for your app. Please note that this feature requires Facebook SDK version 3.22 or newer, so any purchases in apps with earlier versions of the SDK will not be included."),i._("This setting has been updated."));},showUnsupportedSDKWarning:function(){h.show(g.createElement("span",null,i._("Automatic logging of in-app purchases on iOS is now turned on for your app, however this feature requires Facebook SDK version 3.22 or newer."),' ',g.createElement("a",{href:"https://developers.facebook.com/docs/ios",target:"_blank"},i._("Haz clic aqu\u00ed")),' ',i._("to download and install the latest version of the Facebook SDK. Once you've integrated the new version of the SDK, in-app purchases will be automatically recorded.")),i._("One more step"));},show:function(k,l){k.addEventListener('change',function(m){if(!m.target.checked)return;if(l){this.showSupportedSDKWarning();}else this.showUnsupportedSDKWarning();}.bind(this));}};e.exports=j;},null);
__d("SpectrumPlotBand.react",["SpectrumConstants","SpectrumDataVisualization","React","ReactART","Rectangle.art","SpectrumUtilities"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=j.Group,n=g.plotBands.LabelPosition,o=i,p=o.PropTypes,q=j.Text,r=i.createClass({displayName:"SpectrumPlotBand",mixins:[h.Mixin],propTypes:{color:p.string,axis:p.oneOf(['x','y']),from:p.number,opacity:p.number,to:p.number},getDefaultProps:function(){return {axis:'y'};},render:function(){var s=this.props,t=s.axis,u=s.from,v=s.label,w=s.theme,x=s.to,y=h.getScaleX(this.props),z=this.props.scaleY,aa='left',ba,ca,da=w.plotBands.label,ea,fa,ga,ha,ia,ja,ka,la;if(t==='x'){la=l.getOuterRange(z);ia=la[0];ja=la[1];if(u===undefined||x===undefined)ka=l.getOuterRange(y);if(u!==undefined){ga=y(u);}else ga=ka[0];if(x!==undefined){ha=y(x);}else ha=ka[1];}else{ka=l.getOuterRange(y);ga=ka[0];ha=ka[1];if(u===undefined||x===undefined)la=l.getOuterRange(z);if(u!==undefined){ia=z(u);}else ia=la[0];if(x!==undefined){ja=z(x);}else ja=la[1];}if(v){ba={fontFamily:da.fontFamily,fontSize:da.fontSize};switch(v.position){case n.BOTTOM_LEFT:ea=ga+da.padding;fa=ia-ba.fontSize-da.padding;break;case n.TOP_LEFT:ea=ga+da.padding;fa=ja+da.padding;break;case n.TOP_RIGHT:aa='right';ea=ha-da.padding;fa=ja+da.padding;break;default:aa='right';ea=ha-da.padding;fa=ia-ba.fontSize-da.padding;}ca=(i.createElement(q,{alignment:aa,fill:v.color||da.fontColor,font:ba,x:ea,y:fa},v.text));}return (i.createElement(m,null,i.createElement(k,{fill:this.props.color||w.plotBands.color,height:ja-ia,opacity:this.props.opacity||w.plotBands.opacity,width:ha-ga,x:ga,y:ia}),ca));}});e.exports=r;},null);
__d("SpectrumStackedColumns",["SpectrumDataVisualization","d3/scale/ordinal","React","ReactART","Rectangle.art","SpectrumBaseStyleSheet","SpectrumUtilities"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=j.Group,o=i,p=o.PropTypes,q=j.Text,r=m.compose,s=i.createClass({displayName:"SpectrumStackedColumns",mixins:[g.Mixin],propTypes:{showOuterLabels:p.bool,customInnerLabelsFormat:p.func},statics:{getExtentY:function(t){var u=[];for(var v=0;v<t.data[0].length;v++){var w=0;t.data.forEach(function(x){return w+=x[v];});u.push(w);}return [0,Math.max.apply(null,u)];},getGutter:function(t,u){if(!t.showOuterLabels)return {};var v=16,w=u.columns.fontSize/l.columns.fontSize,x=v*w;return {top:x};}},handleEvent:function(t){if(t.type!=='mousemove'||!this.props.data.length)return;var u=this.props.scaleY.range(),v=Math.min(u[0],u[1]),w=Math.max(u[0],u[1]);if(t.y<v||t.y>w){if(this.props.onRequestFocus)this.props.onRequestFocus(null);return;}var x=g.getValueXAccessor(this.props),y=g.getValueYAccessor(this.props),z=this.props.scaleX,aa=this.props.scaleY,ba=r(z,x),ca=r(aa,y),da=aa(0),ea=z.rangeBand?z.rangeBand():1,fa=this.props.data[this.props.data.length-1];for(var ga=0,ha=fa.length;ga<ha;ga++){var ia=fa[ga],ja=ba(ia,ga);if(t.x>=ja&&t.x<ja+ea){var ka,la,ma,na=this.props.data.map(function(va){return y(va[ga],ga);}),oa=na.reduce(function(va,wa){return va+wa;}),pa=0,qa=-1;for(var ra=0;ra<na.length;ra++){var sa=da-ca(na[ra],ga);pa+=sa;if((da-t.y)<=pa||ra===na.length-1){ka=na[ra];ma=da-pa+sa;la=ma-sa;qa=ra;break;}}if(ka===0)return;var ta=this.props.titles,ua={rect:{left:ja,right:ja+ea,top:la,bottom:ma},target:this,label:this.props.label,title:ta&&ta[qa],barIndex:ga,total:oa,valueY:ka};if(this.props.onRequestFocus)this.props.onRequestFocus(ua);t.stopPropagation();return;}}if(this.props.onRequestFocus)this.props.onRequestFocus(null);},render:function(){if(!this.props.data.length)return i.createElement(n,null);var t=g.getValueXAccessor(this.props),u=g.getValueYAccessor(this.props),v=this.props.scaleX,w=this.props.scaleY,x=r(v,t),y=r(w,u),z=v.rangeBand?v.rangeBand():1,aa=this.props.theme.columns,ba=w(0),ca=z*(aa.margin?aa.margin:0),da=this.props.data,ea=this.uid,fa=aa.colors.copy?aa.colors:h().range(aa.colors),ga=[];for(var ha=0;ha<da[0].length;ha++)ga.push(da.map(function(qa){return qa[ha];}).reduce(function(qa,ra){return qa+ra;}));function ia(qa){var ra=[];da.map(function(ab){return ra.push(ab[qa]);});var sa=[],ta=0;for(var ua=0;ua<ra.length;ua++){var va=ra[ua],wa=Math.round(x(va,qa)+ca),xa=y(va,qa),ya=Math.round(z-ca*2),za=ba-xa;xa-=ta;ta+=za;sa.push(i.createElement(k,{width:ya,height:za,y:xa,x:wa,fill:fa(ea+ua)}));}return sa;}var ja=[];for(ha=0;ha<da[0].length;ha++)ja.push(ia(ha));var ka=w.tickFormat();function la(qa){var ra=ga[qa],sa=aa.outerLabelColor,ta=Math.round(x(ra,qa)+ca)+z/2,ua=y(ra,qa)-aa.fontSize-aa.labelMargin;return (i.createElement(q,{alignment:"center",fill:sa,font:aa,key:qa,x:ta,y:ua},ka(ra)));}var ma=[];if(this.props.showOuterLabels)for(ha=0;ha<da[0].length;ha++)ma.push(la(ha));var na=this.props.customInnerLabelsFormat;function oa(qa){var ra=ga[qa],sa=aa.innerLabelColor,ta=Math.round(x(ra,qa)+ca)+z/2,ua=ba-aa.fontSize-aa.labelMargin;return (i.createElement(q,{alignment:"center",fill:sa,font:aa,key:qa,x:ta,y:ua},na(ha)));}var pa=[];if(na)for(ha=0;ha<da[0].length;ha++)pa.push(oa(ha));return (i.createElement(n,null,i.createElement(n,null,ja,ma,pa)));}});e.exports=s;},null);
__d("BonsaiDevsiteStyle",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={CHART_WIDTH:700,BREAKDOWN_WIDTH:550,TIME_SELECTOR_WIDTH:560};e.exports=g;},null);
__d("FalcorCommonViews",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g({CREATE:null,EDIT:null,DETAILS:null,LIST:null});e.exports=h;},null);
__d("FalcorEmptyStates",["BonsaiConfig","BonsaiSections","BonsaiUtils","FalcorCommonViews","InsightsContext","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=function(o){return g.helptext[o].content;},n={Cohorts:{image:l('/images/insights/empty_states/CohortIllustration.png'),primaryTextCMSKey:'CohortsEmptyStatePrimaryText',secondaryTextCMSKey:'CohortsEmptyStateSecondaryText',primaryButtonText:m('CohortsEmptyStatePrimaryButtonText').__html,secondaryButtonText:m('CohortsEmptyStateSecondaryButtonText').__html,primaryButtonURI:i.getSectionInsightsURI(h.COHORTS,null,j.CREATE),secondaryButtonURI:g.falcorConstants.cohorts_empty_state_secondary_button_uri},Segments:{image:l('/images/insights/empty_states/SegmentIllustration.png'),primaryTextCMSKey:'SegmentsEmptyStatePrimaryText',secondaryTextCMSKey:'SegmentsEmptyStateSecondaryText',primaryButtonText:m('SegmentsEmptyStatePrimaryButtonText').__html,secondaryButtonText:m('SegmentsEmptyStateSecondaryButtonText').__html,primaryButtonURI:i.getSectionInsightsURI(h.SEGMENTS,null,j.CREATE),secondaryButtonURI:g.falcorConstants.segments_empty_state_secondary_button_uri},Funnels:{image:l('/images/insights/empty_states/FunnelIllustration.png'),primaryTextCMSKey:'FunnelsEmptyStatePrimaryText',secondaryTextCMSKey:'FunnelsEmptyStateSecondaryText',primaryButtonText:m('FunnelsEmptyStatePrimaryButtonText').__html,secondaryButtonText:m('FunnelsEmptyStateSecondaryButtonText').__html,primaryButtonURI:i.getSectionInsightsURI(h.FUNNELS,null,j.CREATE),secondaryButtonURI:g.falcorConstants.funnels_empty_state_secondary_button_uri},AppEvents:{image:l('/images/insights/empty_states/Graph.png'),primaryTextCMSKey:'EventsEmptyStatePrimaryText',secondaryTextCMSKey:'EventsEmptyStateSecondaryText',primaryButtonText:m('EventsEmptyStatePrimaryButtonText').__html,primaryButtonURI:g.falcorConstants.events_empty_state_primary_button_uri},'AppEvents:log_more_events':{primaryTextCMSKey:'EventsEmptyStateLogMoreEventsPrimaryText',secondaryTextCMSKey:'EventsEmptyStateLogMoreEventsSecondaryText',primaryButtonText:m('EventsEmptyStatePrimaryButtonText').__html,primaryButtonURI:g.falcorConstants.events_empty_state_primary_button_uri},Landing:{image:l('/images/insights/empty_states/Graph.png'),primaryTextCMSKey:'LandingEmptyStatePrimaryText',secondaryTextCMSKey:'LandingEmptyStateSecondaryText',primaryButtonURI:g.falcorConstants.landing_empty_state_primary_button_uri,primaryButtonText:m('LandingEmptyStatePrimaryButtonText').__html,secondaryButtonURI:g.falcorConstants.landing_empty_state_secondary_button_uri,secondaryButtonText:m('LandingEmptyStateSecondaryButtonText').__html},AdAttribution:{image:l('/images/insights/empty_states/Graph.png'),primaryTextCMSKey:'AdAttributionEmptyStatePrimaryText',secondaryTextCMSKey:'AdAttributionEmptyStateSecondaryText',primaryButtonText:m('AdAttributionEmptyStatePrimaryButtonText').__html,primaryButtonURI:g.falcorConstants.ad_attribution_empty_state_primary_button_uri},overview:{image:l('/images/insights/empty_states/Graph.png'),primaryTextCMSKey:'OverviewEmptyStatePrimaryText',secondaryTextCMSKey:'OverviewEmptyStateSecondaryText',primaryButtonText:m('OverviewEmptyStatePrimaryButtonText').__html,primaryButtonURI:g.falcorConstants.events_empty_state_primary_button_uri},'overview:events_too_old':{image:l('/images/insights/empty_states/Graph.png'),primaryTextCMSKey:'OverviewEventsTooOldEmptyStatePrimaryText',secondaryTextCMSKey:'OverviewEventsTooOldEmptyStateSecondaryText',primaryButtonText:m('OverviewEmptyStatePrimaryButtonText').__html,primaryButtonURI:g.falcorConstants.events_empty_state_primary_button_uri},needs_more_events_empty_states:{Cohorts:{image:l('/images/insights/empty_states/Graph.png'),primaryTextCMSKey:'CohortsNeedMoreEventsEmptyStatePrimaryText',secondaryTextCMSKey:'CohortsNeedMoreEventsEmptyStateSecondaryText',primaryButtonText:m('CohortsNeedMoreEventsEmptyStatePrimaryButtonText').__html,secondaryButtonText:m('CohortsNeedMoreEventsEmptyStateSecondaryButtonText').__html,primaryButtonURI:g.falcorConstants.cohorts_need_more_events_empty_state_primary_button_uri,secondaryButtonURI:g.falcorConstants.cohorts_need_more_events_empty_state_secondary_button_uri},Funnels:{image:l('/images/insights/empty_states/Graph.png'),primaryTextCMSKey:'FunnelsNeedMoreEventsEmptyStatePrimaryText',secondaryTextCMSKey:'FunnelsNeedMoreEventsEmptyStateSecondaryText',primaryButtonText:m('FunnelsNeedMoreEventsEmptyStatePrimaryButtonText').__html,secondaryButtonText:m('FunnelsNeedMoreEventsEmptyStateSecondaryButtonText').__html,primaryButtonURI:g.falcorConstants.funnels_need_more_events_empty_state_primary_button_uri,secondaryButtonURI:g.falcorConstants.funnels_need_more_events_empty_state_secondary_button_uri},Segments:{image:l('/images/insights/empty_states/Graph.png'),primaryTextCMSKey:'SegmentsNeedMoreEventsEmptyStatePrimaryText',secondaryTextCMSKey:'SegmentsNeedMoreEventsEmptyStateSecondaryText',primaryButtonText:m('SegmentsNeedMoreEventsEmptyStatePrimaryButtonText').__html,secondaryButtonText:m('SegmentsNeedMoreEventsEmptyStateSecondaryButtonText').__html,primaryButtonURI:g.falcorConstants.segments_need_more_events_empty_state_primary_button_uri,secondaryButtonURI:g.falcorConstants.segments_need_more_events_empty_state_secondary_button_uri}},getEmptyState:function(o,p){var q=o;if(p)q+=':'+p;if(k.appNeedsMoreEventsToCreateFeature(o)&&this.needs_more_events_empty_states[q])return this.needs_more_events_empty_states[q];return this[q];}};e.exports=n;},null);
__d("FalcorImages",["ix"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={APP_ADS_ACTIVE:g('/images/platform/insights/nav/active/AppAds.png'),APP_ADS_INACTIVE:g('/images/platform/insights/nav/inactive/AppAds.png'),ATTRIBUTION_ACTIVE:g('/images/platform/insights/nav/active/Attribution.png'),ATTRIBUTION_INACTIVE:g('/images/platform/insights/nav/inactive/Attribution.png'),COHORTS_ACTIVE:g('/images/platform/insights/nav/active/Cohorts.png'),COHORTS_INACTIVE:g('/images/platform/insights/nav/inactive/Cohorts.png'),EVENTS_ACTIVE:g('/images/platform/insights/nav/active/Events.png'),EVENTS_INACTIVE:g('/images/platform/insights/nav/inactive/Events.png'),FUNNELS_ACTIVE:g('/images/platform/insights/nav/active/Funnels.png'),FUNNELS_INACTIVE:g('/images/platform/insights/nav/inactive/Funnels.png'),INTEGRATIONS_ACTIVE:g('/images/platform/insights/nav/active/Integrations.png'),INTEGRATIONS_INACTIVE:g('/images/platform/insights/nav/inactive/Integrations.png'),OVERVIEW_ACTIVE:g('/images/platform/insights/nav/active/Overview.png'),OVERVIEW_INACTIVE:g('/images/platform/insights/nav/inactive/Overview.png'),REMARKETING_ACTIVE:g('/images/platform/insights/nav/active/Remarketing.png'),REMARKETING_INACTIVE:g('/images/platform/insights/nav/inactive/Remarketing.png'),SEGMENTS_ACTIVE:g('/images/platform/insights/nav/active/Segments.png'),SEGMENTS_INACTIVE:g('/images/platform/insights/nav/inactive/Segments.png'),SETTINGS_ACTIVE:g('/images/devsite/app/nav/settings_active.png'),SETTINGS_INACTIVE:g('/images/devsite/app/nav/settings.png')};e.exports=h;},null);
__d("MobileMeasurementText",["fbt"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={platform:{iphone:g._("iPhone"),ipad:g._("iPad"),android:g._("Android")},aggregate_by_params:{ad_network_name:g._("Ad Networks"),campaign_name:g._("Nombre de la campa\u00f1a"),campaign_id:g._("Identificador de la campa\u00f1a"),adset_name:g._("Nombre del conjunto de anuncios"),adset_id:g._("Identificador del conjunto de anuncios"),ad_name:g._("Nombre del anuncio"),ad_id:g._("Identificador del anuncio"),client:g._("Cliente"),gender:g._("G\u00e9nero"),age:g._("Edad"),country:g._("Pa\u00eds"),custom_key_1:g._("Custom Key 1"),custom_value_1:g._("Custom Value 1"),custom_key_2:g._("Custom Key 2"),custom_value_2:g._("Custom Value 2"),custom_key_3:g._("Tecla personalizada 3"),custom_value_3:g._("Custom Value 3")}};e.exports=h;},null);
__d("BonsaiCustomEventsHistory",["BonsaiStyle","InsightsContext","CacheStorage","ErrorUtils"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k='bonsai_app_events_history_',l=g.CUSTOM_EVENTS_PAGE_LENGTH,m=new i('localstorage',k),n={_getKey:function(){return ''+h.getObjID();},getRecentlyVisitedAppEvents:function(){var o=m.get(this._getKey(),null);if(o)try{var q=JSON.parse(o);if(!Array.isArray(q)){q=[];m.set(this._getKey(),JSON.stringify(q));}return q;}catch(p){j.report(p);}return [];},visitedAppEvent:function(o){var p=this.getRecentlyVisitedAppEvents();if(p.indexOf(o)!=-1)p.splice(p.indexOf(o),1);p.unshift(o);p=p.slice(0,l);m.set(this._getKey(),JSON.stringify(p));},maybeLogHistoryEntry:function(){if(h.getActiveSectionName()==='AppEvents'&&h.getActiveCustomEventName())this.visitedAppEvent(h.getActiveCustomEventName());}};e.exports=n;},null);
__d("DeveloperInsightsLogger",["BanzaiLogger","InsightsContext"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={logAction:function(j){g.log('DeveloperInsightsLoggerConfig',{action:j,appid:parseInt(h.getObjID(),10),section:h.getActiveSectionName(),subsection:h.getActiveCardName()+":"+h.getActiveTabName(),custom_event_name:h.getActiveCustomEventName(),breakdown:h.getActiveBreakdownName()+":"+JSON.stringify(h.getActiveFilters())});}};e.exports=i;},null);
__d("BonsaiPageTransitionsMixin",["BonsaiCustomEventsHistory","BonsaiSections","DeveloperInsightsLogger","InsightsContext","PageTransitions","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={componentWillMount:function(){k.registerHandler(this.pageTransitionHandler);},pageTransitionHandler:function(n){if(n.getPath()!=new l(window.location.href).getPath())return false;var o=j.getActiveSectionName(),p=j.getActiveCustomEventName();j.setPageStateByURI(n);if(o==j.getActiveSectionName())if(o!=h.CUSTOM_EVENTS||p===j.getActiveCustomEventName()){this.setState({activeCardName:j.getActiveCardName(),activeTabName:j.getActiveTabName()});k.transitionComplete(true);return true;}i.logAction('page_transition');this.setState({activeSectionName:j.getActiveSectionName(),activeCustomEventName:j.getActiveCustomEventName()});g.maybeLogHistoryEntry();k.transitionComplete(true);return true;}};e.exports=m;},null);
__d("FalcorContentController",["BonsaiPageTransitionsMixin","BonsaiSections","BonsaiSectionDisplayNames","BonsaiUtils","DocumentTitle","InsightsContext","InsightsExpandableSideNav.react","React","cloneWithProps","cx","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=n,t=s.PropTypes,u=n.createClass({displayName:"FalcorContentController",mixins:[g],propTypes:{header:t.node},getInitialState:function(){var v=l.getFullDateRange(),w=l.getDefaultVisibleDateRange(),x=l.getActiveCustomEventName(),y={activeCustomEventName:x,baseInsightsURI:j.getBaseInsightsURI(),fullDateRange:v,visibleDateRange:w};return y;},_onDateRangeChange:function(v){this.setState({visibleDateRange:v});},render:function(){r(this.props.children.length===2);var v=l.getActiveSectionName(),w=l.getDefaultSectionName(),x=null,y=null;n.Children.forEach(this.props.children[1],function(ba){if(ba.type.getKey()==v){x=ba;}else if(ba.type.getKey()==w)y=ba;});if(!x){x=y;v=w;}var z;switch(v){case h.FUNNELS:z=l.getActiveInsightsFunnelId();break;case h.SEGMENTS:z=l.getActiveSegmentID();break;case h.COHORTS:z=l.getActiveInsightsCohortsID();break;case h.MOBILE_MEASUREMENT:z=l.getActiveMMReportID();break;}var aa={baseInsightsURI:this.state.baseInsightsURI,fullDateRange:this.state.fullDateRange,onDateRangeChange:this._onDateRangeChange,visibleDateRange:this.state.visibleDateRange,event:this.getCurrentEvent(),featureID:z,view:l.getActiveView()};x=o(x,aa);this.updatePageTitle(x);return (n.createElement("div",{key:"bonsai_root"},n.createElement("div",{className:"_5me4"},n.createElement(m,{activeSection:v},this.props.children[0])),n.createElement("div",{className:"_23hs"},x)));},updatePageTitle:function(v){var w=l.getObjName();k.set(q._("Analytics - {appName} - {sectionTitle}",[q.param("appName",w),q.param("sectionTitle",i.get(v.type.getKey()))]));},getCurrentEvent:function(){var v=l.getActiveCustomEventName();if(v&&l.getCustomEvents()){var w=l.getCustomEvents().filter(function(x){return x.name==v;});if(w.length)return w[0];}return null;}});e.exports=u;},null);
__d("BonsaiEventLabelLoaderMixin",["BonsaiApiBatchWrapper","InsightsContext","InsightsUtils","copyProperties"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={_appLabels:[],_ecosysLabels:[],fetchEventLabels:function(l,m,n,o){n=i.formatParams(n||h.getFullDateRange());var p=new g();p.setBypassCache(o);p.setOnComplete(function(){h.setEventLabels(this._appLabels.concat(this._ecosysLabels));if(m){m();}else this.setState({eventLabels:h.getEventLabels().slice()});}.bind(this));p.add('insights_event_labels',n,function(q){this._appLabels=q&&q.data?q.data:[];}.bind(this),'');if(!l){n=j({ecosystem:true},n);p.add('insights_event_labels',n,function(q){this._ecosysLabels=q&&q.data?q.data:[];}.bind(this),'');}p.call();}};e.exports=k;},null);
__d("XAppAnalyticsPredefinedFeaturesAsyncController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/analytics\/{app_id}\/async\/predefined\/",{app_id:{type:"Int",required:true}});},null);
__d("BonsaiApiExamplesDialog",["BonsaiConfig","InsightsCodeSnippet","React","SimpleXUIDialog","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=i.createClass({displayName:"BonsaiApiExamplesDialog",_content:function(){var n=this.props.apiURIs.map(function(o){var p=o.getPath().split('/').pop();return (i.createElement("li",null,i.createElement("span",{className:"_50f4 pbs"},p),":",i.createElement(h,{code:o.toString()})));});return (i.createElement("div",{className:"_53iv"},i.createElement("div",{className:"mbs _50f4 _50f7"},l._("Ejemplos de API usadas en este gr\u00e1fico")),i.createElement("div",null,i.createElement("ul",null,n)),i.createElement("div",{className:"mbs mtm _50f3"},l._("Debe agregarse el par\u00e1metro \"access_token\" para solicitar una cadena de consulta con un valor correcto para poder recuperar datos. Esto requiere que se concedan permisos ampliados a \"read_insights\" en la aplicaci\u00f3n que se usar\u00e1 par realizar la llamada a la API. Consulta la documentaci\u00f3n de APl de estad\u00edsticas y prueba el {Graph API Explorer}.",[l.param("Graph API Explorer",i.createElement("a",{href:g.devToolExplorerURI},"Graph API Explorer"))]))));},showDialog:function(){j.show(this._content());},render:function(){return (i.createElement("span",{onClick:this.showDialog},l._("Ejemplos de API")));}});e.exports=m;},null);
__d("BonsaiCopyLinkDialog",["InsightsCodeSnippet","React","SimpleXUIDialog","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h,l=k.PropTypes,m=h.createClass({displayName:"BonsaiCopyLinkDialog",propTypes:{link:l.object.isRequired},_content:function(){return (h.createElement("div",null,h.createElement("div",{className:"fsl fwb mtm"},j._("Compartir gr\u00e1fico con esta URL")),h.createElement("div",{className:"ptm"},h.createElement(g,{code:this.props.link.toString()}))));},showDialog:function(){i.show(this._content());},render:function(){return (h.createElement("span",{onClick:this.showDialog},j._("Obtener enlace del gr\u00e1fico")));}});e.exports=m;},null);
__d("BonsaiChartLinkMixin",["BonsaiCopyLinkDialog","InsightsContext","React","URI"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=i,l=k.PropTypes,m={propTypes:{currentCard:h.isDevsite()?l.string:l.string.isRequired},_getChartLink:function(){var n,o,p;n=this.props.currentCard;o={section:h.getActiveSectionName(),card:n,tab:h.getCardState(n).tab,breakdown:h.getCardState(n).breakdown,event_name:h.getActiveCustomEventName(),filters:h.getCardState(n).filters};p=new j(window.location.href).addQueryData(o);return i.createElement(g,{link:p});}};e.exports=m;},null);
__d("BonsaiDataDownloader",["React","BlobFactory","InsightsInfoTip.react","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g.createClass({displayName:"BonsaiDataDownloader",componentWillUnmount:function(){var l=this._downloadLink;if(l){var m=a.URL||a.webkitURL,n=l.href;if(n)m.revokeObjectURL(n);}},_onClick:function(l){var m=h.getBlob(this.props.data,{type:this.props.type});if(window.navigator.msSaveBlob){window.navigator.msSaveBlob(m,this.props.filename);}else{var n=a.URL||a.webkitURL;if(!this._downloadLink){this._downloadLink=document.createElement('a');document.body.appendChild(this._downloadLink);}this._downloadLink.href=n.createObjectURL(m);this._downloadLink.download=this.props.filename;this._downloadLink.click();}},render:function(){var l=a.URL||a.webkitURL,m=window.navigator&&window.navigator.msSaveBlob;if(!h.isSupported()||!((l&&l.createObjectURL)||m)){var n=j._("Este navegador no es compatible. Usa la \u00faltima versi\u00f3n de Chrome, Firefox o Internet Explorer.");return (g.createElement(i,{tip:n},g.createElement("span",{style:{color:"grey"}},this.props.children)));}return (g.createElement("div",{onClick:this._onClick,width:"100%"},this.props.children));}});e.exports=k;},null);
__d("BonsaiDownloadMixin",["BonsaiDataDownloader","React","fbt","formatDate"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={_getExportLink:function(l,m){var n,o,p,q,r,s,t;n=(l.data===(void 0))?this._getExportData(l):l;o=[n.data];p=n.times.reduce(function(u,v){u.max=v>u.max?v:u.max;u.min=v<u.min?v:u.min;return u;},{max:Number.MIN_VALUE,min:Number.MAX_VALUE});q=[p.min/1000,p.max/1000].map(function(u){return j(u,'jMY',{utc:true,skipPatternLocalization:true});}).join('_');r=[m,q].join('+')+'.csv';s='text/csv';t=i._("Exportar");return (h.createElement(g,{data:o,type:s,filename:r},t));},_getExportData:function(l){var m,n,o,p;m=[];n={};o=[];l.forEach(function(q){var r={};m.push(q.header);q.body.forEach(function(s){var t=s.time.getTime();n[t]=1;r[t]=r[t]?r[t]+s.value:s.value;});o.push(r);});n=Object.keys(n).sort();o=n.map(function(q){var r,s;r=o.map(function(u){return u[q];});s=new Date();s.setTime(q);r.unshift(j(s,'m/d/Y',{utc:true}));return r;});p=m.slice(0);p.unshift('Date');o.unshift(p);o=this._createCSVString(o);return {data:o,times:n};},_createCSVString:function(l){return l.map(function(m){return m.map(function(n){return n?n.toString():'-';}).map(function(n){return n.indexOf(',')===-1?n:"\""+n+"\"";}).join(',');}).join('\n');}};e.exports=k;},null);
__d("BonsaiErrorNotice",["BonsaiText","React","XUINotice.react"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=h.createClass({displayName:"BonsaiErrorNotice",render:function(){var k=this.props.short?g.errors.unavailable:this.props.message;return (h.createElement(i,h.__spread({},this.props),k));}});e.exports=j;},null);
__d("BonsaiLayerModalMixin",["React","LayerPageContent.react","LayerPage.react","ReactLayeredComponentMixin","XUICloseButton.react","copyProperties","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=l({},j,{getInitialState:function(){return {showModal:false};},onToggleModal:function(o){if(!o&&this.state.showModal)this.setState({showModal:false});},onCloseButtonClick:function(){this.onToggleModal(false);},renderLayers:function(){if(!this.state.showModal)return null;if(this._renderLayersHook)return this._renderLayersHook();var o=this.getModalObject();return {modal:g.createElement(i,{layerRootClass:"_5ue4",onToggle:this.onToggleModal,shown:true},g.createElement(h,{useCustomPadding:true},g.createElement("div",{className:"_5ue5"},g.createElement(k,{className:"_5ue6",onClick:this.onCloseButtonClick}),o.title),o.content))};}});e.exports=n;},null);
__d("BonsaiDropdownButton",["ix","React","Image.react","XUIButton.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=h.createClass({displayName:"BonsaiDropdownButton",render:function(){return (h.createElement(j,h.__spread({},this.props,{image:h.createElement(i,{src:g('/images/ui/x/image/gear.png')}),imageRight:h.createElement(i,{src:g('/images/ui/x/button/normal/chevron.png')}),label:' ',use:"default"})));}});e.exports=k;},null);
__d("BonsaiPopoverMenu",["BonsaiDropdownButton","PopoverMenu.react","React","cloneWithProps","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=i,n=m.PropTypes,o=i.createClass({displayName:"BonsaiPopoverMenu",propTypes:{menu:n.object,buttonClass:n.string,buttonSize:n.string},render:function(){var p,q;p=i.createElement(g,null);if(this.props.buttonSize||this.props.buttonClass){q={};if(this.props.buttonSize)q.size=this.props.buttonSize;if(this.props.buttonClass)q.className=this.props.buttonClass;p=j(p,q);}return (i.createElement(h,i.__spread({},this.props,{align:'left',className:l(this.props.className,"_5ogx"),menu:this.props.menu}),p));}});e.exports=o;},null);
__d("InsightsTimeUtils",["InsightsNumUtils","fbt","invariant"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=[{display:{singular:'year',plural:'years',abbreviation:'y'},seconds:31556900,secondsConverter:function(l){return l/31556900;}},{display:{singular:'month',plural:'months',abbreviation:'m'},seconds:2630000,secondsConverter:function(l){return l/2630000;}},{display:{singular:'week',plural:'weeks',abbreviation:'w'},seconds:604800,secondsConverter:function(l){return l/604800;}},{display:{singular:'day',plural:'days',abbreviation:'d'},seconds:86400,secondsConverter:function(l){return l/86400;}},{display:{singular:'hour',plural:'hours',abbreviation:'h'},seconds:3600,secondsConverter:function(l){return l/3600;}},{display:{singular:'minute',plural:'minutes',abbreviation:'m'},seconds:60,secondsConverter:function(l){return l/60;}},{display:{singular:'second',plural:'seconds',abbreviation:'s'},seconds:1,secondsConverter:function(l){return l;}}],k={_convertSeconds:function(l,m){var n=m.secondsConverter(l);return Math.round(n*10)/10;},_getConfigBySeconds:function(l){l=Math.abs(l);for(var m=0;m<j.length;m++){var n=j[m];if(l/n.seconds>=1||m===j.length-1)return n;}i(false);},_getConfigByDisplayKey:function(l){for(var m=0;m<j.length;m++){var n=j[m];if(n.display.singular===l||n.display.plural===l)return n;}i(false);},getValueConverterFunction:function(l){var m=k._getConfigByDisplayKey(l);return m.secondsConverter;},getDisplayKey:function(l){var m=k._getConfigBySeconds(l);return m.display.plural;},secondsToDisplay:function(l,m){var n=k._getConfigBySeconds(l),o=g.prettyFloat(k._convertSeconds(l,n));if(m)return (o==='0')?o:h._({"y":"{numeric time value}y","m":"{numeric time value}m","w":"{numeric time value}w","d":"{numeric time value}d","h":"{numeric time value}h","s":"{numeric time value}s"},[h.param("numeric time value",o),h['enum'](n.display.abbreviation,{y:"y",m:"m",w:"w",d:"d",h:"h",s:"s"})]);if(o==='1'){return (h._({"year":"{numeric time value} a\u00f1o","month":"{numeric time value} month","week":"{numeric time value} week","day":"{numeric time value} day","hour":"{numeric time value} hour","minute":"{numeric time value} minute","second":"{numeric time value} second"},[h.param("numeric time value",o),h['enum'](n.display.singular,{year:"year",month:"month",week:"week",day:"day",hour:"hour",minute:"minute",second:"second"})]));}else return (h._({"years":"{numeric time value} years","months":"{numeric time value} months","weeks":"{numeric time value} weeks","days":"{numeric time value} days","hours":"{numeric time value} hours","minutes":"{numeric time value} minutes","seconds":"{numeric time value} seconds"},[h.param("numeric time value",o),h['enum'](n.display.plural,{years:"years",months:"months",weeks:"weeks",days:"days",hours:"hours",minutes:"minutes",seconds:"seconds"})]));},ySecondsScale:function(l){l.tickFormatMaxLength=46;l.tickFormat=function(){return function(n){return k.secondsToDisplay(n,true);};};l.tooltipFormat=function(){return function(n){return k.secondsToDisplay(n);};};var m=l.copy;l.copy=function(){return k.ySecondsScale(m());};return l;}};e.exports=k;},null);
__d("BonsaiTimeSeriesChart",["BonsaiApiDataAdapter","BonsaiApiError","BonsaiApiExamplesDialog","BonsaiApiPeriod","BonsaiApiPromise","BonsaiChartLinkMixin","BonsaiColors","BonsaiConfig","BonsaiContextualHelp","BonsaiDownloadMixin","BonsaiDevsiteStyle","BonsaiErrorNotice","BonsaiLayerModalMixin","BonsaiPopoverMenu","BonsaiStyle","BonsaiText","SpectrumBrush","SpectrumChart","SpectrumComparableColumns","SpectrumCurrencyScale","SpectrumFloatScale","InsightsBackgroundBar.react","InsightsContext","InsightsDateRange.react","InsightsLegend.react","InsightsLegendAreaKey.react","InsightsLegendLineKey.react","InsightsLegendCheckboxKey.react","InsightsLegendScrollableVert.react","InsightsLoadingIndicator.react","InsightsMarker.react","InsightsTable.react","InsightsTimeUtils","InsightsUtils","SpectrumIntegerScale","LeftRight.react","SpectrumLines","SpectrumMarkers","d3/scale/ordinal","SpectrumPercentageScale","SpectrumPlotBand.react","PrettyNum","React","SpectrumStackedAreas","SpectrumTimeScale","SpectrumTooltipMenu","SpectrumXAxis","ReactXUIMenu","SpectrumYAxis","cx","ex","fbt","formatDate","mapObject","sumOfArray","d3/time/day","d3/core/max","d3/core/min","SpectrumConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb){b.__markCompiled&&b.__markCompiled();var mb=b('ReactXUIMenu').Item,nb=b('SpectrumConstants').plotBands.LabelPosition,ob=wa,pb=ob.PropTypes,qb=wa.createClass({displayName:"BonsaiTimeSeriesChart",mixins:[s,p,l],propTypes:{areaOffsets:pb.array,base:pb.string,configs:pb.array.isRequired,height:pb.number,helptext:pb.string,disableCheckboxes:pb.bool,disableEcosystem:pb.bool,disableRangeSelection:pb.bool,categories:pb.array,currency:pb.string,float:pb.bool,percentage:pb.bool,seconds:pb.bool,period:pb.oneOf([j.DAILY,j.HOURLY]),ratio:pb.bool,reverseLegend:pb.bool,threshold:pb.string,width:pb.number,formatHourly:pb.func,setLegend:pb.func,refreshLegend:pb.func},getDefaultProps:function(){return {period:j.DAILY,formatHourly:function(rb){return na.pacificSecondsToUTCDate(rb);}};},componentWillMount:function(){if(this.props.setLegend&&!this.state.hasMetricsThatAreLoading)this.props.setLegend(this.getLegend(this.props,this.state));},componentWillReceiveProps:function(rb){var sb=this._getStateFromProps(rb);this.setState(sb);if(rb.setLegend&&!rb.refreshLegend&&!sb.hasMetricsThatAreLoading)rb.setLegend(this.getLegend(rb,sb));},_getStateFromProps:function(rb){var sb=false,tb=[],ub=[],vb={},wb=false,xb=[];rb.configs.forEach(function(zb){if(zb.data instanceof h){ub.push(zb.data.getMessage());return;}if(zb.data instanceof k){wb=true;return;}if(zb.data instanceof g)zb.data.getMessages().forEach(function(gc){ub.push(gc);});if(zb.data instanceof g)zb.data.setHourlyFormatter(this.props.formatHourly);var ac=zb.series||[];if(ac.length===0&&zb.data)ac=zb.data.getTimeSeries(null,rb.period===j.DAILY);if(ac.length<2)return;var bc={color:zb.color,isEcosystemMetric:false,series:ac,title:zb.title,type:zb.type};if(zb.unselect)xb.push(zb.title);tb.push(bc);var cc=null;if(zb.data instanceof g){cc=zb.data.getApiURI();if(cc&&!vb[cc.toString()])vb[cc.toString()]=cc;}var dc=null;if(!rb.disableEcosystem&&zb.data instanceof g){var ec=zb.data.getEcosystemData();if(ec&&ec instanceof g){dc={color:zb.ecosystem_color,isEcosystemMetric:true,type:'lines'};sb=true;if(rb.percentage||rb.ratio){dc.series=ec.getTimeSeries();}else dc.series=ec.getTrendingTimeSeries(ac[0][1]);var fc=v.otherApps;if(ca.isGame())fc=v.otherGames;dc.title=zb.title+': '+fc;tb.push(dc);bc.hasCorrespondingEcosystemMetric=true;}}},this);var yb=this.state&&Array.isArray(this.state.hiddenMetricTitles)?this.state.hiddenMetricTitles:xb;return {error_notices:ub,hasEcosystemData:sb,hasMetricsThatAreLoading:wb,hiddenMetricTitles:yb,metrics:tb,apiURIs:Object.keys(vb).map(function(zb){return vb[zb];}),showEcosystem:this.state&&this.state.showEcosystem!==undefined?this.state.showEcosystem:false};},getInitialState:function(){return this._getStateFromProps(this.props);},_isEcosystemDisabled:function(){return this.props.disableEcosystem!==undefined&&this.props.disableEcosystem;},range:{max:-Infinity,min:Infinity},legendDimensions:{WIDTH:150,HEIGHT:240},getErrorMessages:function(){var rb=[];if(!this.state.metrics.length)if(this.state.error_notices.length){this.state.error_notices.forEach(function(sb){return rb.push(sb);});}else rb.push(v.errors.no_data);return rb;},getLegend:function(rb,sb){var tb=[],ub=rb.disableCheckboxes||sb.metrics.filter(function(wb){return !wb.isEcosystemMetric||sb.showEcosystem;}).length<=1;sb.metrics.forEach(function(wb){var xb=null,yb=sb.hiddenMetricTitles.indexOf(wb.title)===-1,zb=rb.setLegend?'medium':'small',ac=wb.title,bc=wb.color;if(!wb.isEcosystemMetric){if(sb.showEcosystem&&!wb.hasCorrespondingEcosystemMetric)return;var cc=wb.title;if(ub){if(!rb.setLegend&&wb.type==='lines'){xb=wa.createElement(ga,{className:"_7l7",color:bc,key:ac},cc);}else xb=wa.createElement(fa,{className:"_7l7",color:bc,key:ac},cc);}else xb=wa.createElement(ha,{checked:yb,color:bc,isInline:!rb.setLegend,key:ac,size:zb,onChange:this.onLegendCheckboxChange.bind(this,wb.title)},cc);tb.push(xb);}else if(sb.showEcosystem)tb.push(wa.createElement(ha,{color:bc,checked:yb,isInline:!rb.setLegend,key:ac,size:zb,onChange:this.onLegendCheckboxChange.bind(this,wb.title)},wb.title));},this);if(rb.reverseLegend)tb.reverse();var vb=wa.createElement(ea,{className:"pls pbm"},tb);if(rb.setLegend)vb=wa.createElement(ia,{className:"_47tf",height:this.legendDimensions.HEIGHT,width:this.legendDimensions.WIDTH},tb);return vb;},getTimeSeriesChart:function(){if(this.state.hasMetricsThatAreLoading)return wa.createElement(ja,null);var rb={areas:[],columns:[],lines:[]},sb={areas:[],columns:[],lines:[]},tb=[],ub={areas:{colors:[]},columns:{colors:[]},lines:{colors:[],markers:false},rangeBands:{outerPadding:.15,padding:.15}};if(!this.state.metrics.length){if(this.state.error_notices.length){this.state.error_notices.forEach(function(hc){tb.push(wa.createElement(r,{className:"_3-8t",message:hc}));});return (wa.createElement("div",null," ",tb," "));}return (wa.createElement(r,{className:"_3-8t",message:v.errors.no_data}));}this.state.metrics.forEach(function(hc){var ic=this.state.hiddenMetricTitles.indexOf(hc.title)==-1;if(!ic)return;if(!hc.isEcosystemMetric){if(this.state.showEcosystem&&!hc.hasCorrespondingEcosystemMetric)return;var jc=this.state.showEcosystem?'lines':hc.type;rb[jc].push(hc.series);sb[jc].push(hc.title);ub[jc].colors.push(hc.color);}else if(this.state.showEcosystem){rb[hc.type].push(hc.series);sb[hc.type].push(hc.title);ub[hc.type].colors.push(hc.color);}},this);this.series=rb;this.titles=sb;var vb=0,wb=hb(rb,function(hc,ic){if(!hc.length)return null;hc.forEach(function(jc){vb=Math.max(vb,jc.length);});this.range.max=kb(hc,function(jc){return kb(jc,function(kc){return jb.utc.offset(kc[0],1);});});this.range.min=lb(hc,function(jc){return lb(jc,function(kc){return kc[0];});});return this._getChart(hc,sb[ic],ic);},this),xb=new Date(this.range.min),yb=new Date(this.range.max),zb,ac;if(this.props.disableRangeSelection||this.props.percentage||this.props.ratio){zb=wa.createElement(w,null);}else{zb=wa.createElement(w,{onSelection:this.onRangeSelection});ac=fb._("Haz clic o arrastra para seleccionar");}var bc=this.props.ratio||this.props.float?aa(3):oa();if(this.props.currency){bc=z(this.props.currency);}else if(this.props.seconds)bc=ma.ySecondsScale(bc);var cc=this.props.period===j.DAILY,dc=ya().domain([xb,yb]).clamp(true).interval(cc?ya.Intervals.Day:ya.Intervals.Hour);dc.tooltipFormat=function(){return function(hc){return gb(hc,cc?'l, M j, Y':'l, M j, Y g:ia',{utc:true});};};var ec=this.props.showPercentTotal&&this.props.data.length>1,fc=this.props.threshold?n.chartThresholds[this.props.threshold]:n.chartThresholds[this.props.helptext],gc=[];if(fc)if(fc.higherIsBetter){gc.push(wa.createElement(ua,{key:"higherIsBetter",color:m.RED50,from:0,to:fc.value,label:{color:m.GREY90,position:nb.TOP_RIGHT,text:fc.text}}));}else gc.push(wa.createElement(ua,{key:"lowerIsBetter",color:m.RED50,from:fc.value,label:{color:m.GREY80,position:nb.BOTTOM_RIGHT,text:fc.text}}));return (wa.createElement("div",null,wa.createElement("div",null,tb),wa.createElement(pa,{direction:"right"},this.props.setLegend?null:this.getLegend(this.props,this.state),this.props.setLegend?null:this.getFeaturesDropdown()),wa.createElement("div",{className:this.props.setLegend?"_2pig":null},wa.createElement(x,{height:this.props.height||u.CHART_HEIGHT,scaleX:dc,scaleY:this.props.percentage?ta():bc,theme:ub,width:this.props.width||(ca.isDevsite()?q.CHART_WIDTH:u.CHART_WIDTH)},wb.areas,wb.columns,wb.lines,this._buildEventLabels(),wa.createElement(ab,{ticks:vb,secondaryTicks:2}),wa.createElement(cb,null),wa.createElement(za,{actionContent:ac,showPercentTotal:ec}),zb,gc))));},render:function(){this._initExportData();return (wa.createElement("div",null,wa.createElement("div",{className:"_5r8_ pdm"},this.getTimeSeriesChart()),wa.createElement("div",{className:"_5x4g"},this.getChartHelpText())));},getChartHelpText:function(){if(this.props.helptext){return wa.createElement(o,{helpKey:this.props.helptext});}else return wa.createElement("div",null);},getExportData:function(){return this._exportData;},getFeaturesDropdown:function(){var rb,sb,tb;rb=[];sb=this.state.apiURIs.map(function(ub){var vb=ub.getPath().split('/');vb=vb[vb.length-1];var wb=ub.getQueryData().breakdowns;wb=wb?Object.keys(wb).map(function(xb){return wb[xb];}).join('-'):'';return [vb,wb].join('-');}).join('+');rb.push(this._getExportLink(this._exportData,sb));this._initExportData();if(!ca.isDevsite())rb.push(this._getChartLink());if(this.state.hasEcosystemData&&!this._isEcosystemDisabled())rb.push(this.getEcosystemLink());if(this.state.apiURIs.length>0)rb.push(this.getApiDialogLink());if(rb.length===0)return null;tb=wa.createElement(bb,null,rb.filter(function(ub){return !!ub;}).map(function(ub,vb){return wa.createElement(mb,{key:'feature-'+vb},ub);}));return wa.createElement(t,{className:"_2pik",menu:tb});},getApiDialogLink:function(){return (wa.createElement(i,{apiURIs:this.state.apiURIs}));},getEcosystemLink:function(){var rb=null;if(this.state.showEcosystem){rb=v.stop_compare;}else if(ca.isGame()){rb=v.compareGames;}else rb=v.compareApps;return wa.createElement("span",{onClick:this._toggleEcosystem},rb);},_toggleEcosystem:function(){this.setState({showEcosystem:!this.state.showEcosystem,hiddenMetricTitles:[]});},_processAreaSeries:function(rb){var sb={},tb=[];tb=rb.map(function(vb){var wb={};vb.forEach(function(xb){sb[xb[0].getTime()]=xb[0];wb[xb[0].getTime()]=xb[1];});return wb;});var ub=Object.keys(sb).sort();return tb.map(function(vb){var wb=[];ub.forEach(function(xb){if(vb[xb]){wb.push([sb[xb],vb[xb]]);}else wb.push([sb[xb],0]);});return wb;});},_getChart:function(rb,sb,tb){var ub,vb,wb,xb,yb;ub=ca.isRealtimeDebug();var zb={data:rb,titles:sb,valueX:function(ac,bc){return ac[0];},valueY:function(ac,bc){return ac[1];}};if(ub)wb=ca.getFullDateRange().until.valueOf();switch(tb){case 'areas':zb.data=this._processAreaSeries(rb);vb=ub?wa.createElement(xa,wa.__spread({},zb,{base:this.props.base,offset:this.props.areaOffsets,partialValue:function(ac,bc){return ac[0].valueOf()==wb;}})):wa.createElement(xa,wa.__spread({},zb,{base:this.props.base,offset:this.props.areaOffsets}));break;case 'columns':vb=wa.createElement(y,wa.__spread({},zb));break;case 'lines':if(ub){vb=wa.createElement(qa,wa.__spread({},zb,{partialValue:function(ac,bc){return ac[0].valueOf()==wb;}}));}else vb=wa.createElement(qa,wa.__spread({},zb));break;default:return null;}xb=[];for(yb=0;yb<rb.length&&yb<sb.length;yb++)xb.push({header:sb[yb],body:rb[yb].map(function(ac){return {time:ac[0],value:ac[1]};})});this._addExportData(xb);return vb;},_exportData:[],_initExportData:function(){this._exportData=[];},_addExportData:function(rb){this._exportData=this._exportData.concat(rb);},_buildEventLabels:function(){var rb=ca.getEventLabels(),sb=this.props.categories||[];sb.push(ca.getActiveSectionName());sb.push(this.props.helptext);rb=rb.filter(function(tb){var ub=na.pacificSecondsToUTCDate(tb.time);return ub>=this.range.min&&ub<=this.range.max;},this);rb=rb.filter(function(tb){for(var ub=0,vb=tb.categories.length;ub<vb;++ub)if(sb.indexOf(tb.categories[ub])!==-1)return true;return false;},this);rb=rb.map(function(tb){return (wa.createElement(ka,{content:tb.label,key:tb.label,x:na.pacificSecondsToUTCDate(tb.time)}));});return (wa.createElement(ra,null,rb));},onRangeSelection:function(rb){this.setState({showModal:true,selectedRange:rb});},onLegendCheckboxChange:function(rb,sb){var tb=this.state.hiddenMetricTitles.indexOf(rb),ub=this.state.hiddenMetricTitles;if(sb&&tb>-1){ub=this.state.hiddenMetricTitles.filter(function(wb){return wb!=this.state.hiddenMetricTitles[tb];},this);}else{var vb=0;this.state.metrics.forEach(function(wb){if(!wb.isEcosystemMetric&&this.state.showEcosystem&&!wb.hasCorrespondingEcosystemMetric)return;if(!this.state.showEcosystem&&wb.isEcosystemMetric)return;vb++;},this);if(!sb&&tb==-1&&this.state.hiddenMetricTitles.length!=vb-1){ub=this.state.hiddenMetricTitles.concat(rb);}else if(this.props.refreshLegend)this.props.refreshLegend();}this.setState({hiddenMetricTitles:ub});},getModalObject:function(){var rb=this.state.selectedRange,sb=(wa.createElement("span",null,v.summary,":",' ',wa.createElement(da,{from:rb[0],to:rb[1],utc:true,includeTime:this.props.period!==j.DAILY}))),tb=this.series.areas.map(this._filterAndSum(rb)),ub=oa().domain([0,Math.max.apply(null,tb)]),vb=ib(tb),wb=this.titles.areas.map(function(dc,ec){return [dc,(wa.createElement(ba,{values:[tb[ec]],scale:ub,colors:sa().range(['#9DACCB'])})),(new va(tb[ec]/vb)).toPrettyPercentage()];},this),xb=wb.length,yb=this.series.lines.map(this._filterAndSum(rb));wb=wb.concat(this.titles.lines.map(function(dc,ec){var fc=[dc,(new va(yb[ec])).enableLongForm().toPretty()];if(xb)fc.push(wa.createElement("noscript",null));return fc;}));var zb=wb.length,ac=this.series.columns.map(this._filterAndSum(rb));wb=wb.concat(this.titles.columns.map(function(dc,ec){var fc=[dc,(new va(ac[ec])).toPretty()];if(zb)fc.push(wa.createElement("noscript",null));return fc;}));var bc=[v.title,v.value];if(xb)bc.push(v.percentage);var cc=(wa.createElement(la,{header:bc,rows:wb,width:"100%"}));return {title:sb,content:cc};},_filterAndSum:function(rb){return function(sb){return ib(sb.map(function(tb){if(this.props.period==j.DAILY){if(tb[0]>jb.offset(rb[0],-1)&&tb[0]<=jb.offset(rb[1],-1))return tb[1];}else if(tb[0]>=rb[0].getTime()&&tb[0]<rb[1].getTime())return tb[1];return 0;},this));}.bind(this);}});e.exports=qb;},null);
__d("BonsaiTimeSeriesChartMixin",["BonsaiColors","InsightsContext","BonsaiStyle","BonsaiTimeSeriesChart","React","mergeDeep","mergeHelpers"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=b('mergeHelpers').ArrayStrategies,n=k,o=n.PropTypes,p={propTypes:{areaOffsets:o.array,base:o.string,currentCard:h.isDevsite()?o.string:o.string.isRequired,data:o.array.isRequired,height:o.number,percentage:o.bool,ratio:o.bool,disableEcosystem:o.bool,theme:o.object,titles:o.array.isRequired,totalData:o.object,width:o.number,unselectTitles:o.array,showPercentTotal:o.bool},_buildSeriesConfigs:function(q){var r=[],s=q[this._chartType].colors,t=0;for(;t<this.props.data.length;++t)r.push({data:this.props.data[t],title:this.props.titles[t],type:this._chartType,color:s[t%s.length],ecosystem_color:s[(t+2)%s.length],unselect:this.props.unselectTitles&&this.props.unselectTitles.indexOf(this.props.titles[t])!=-1});if(this.processTotal&&this.props.totalData){var u=this.processTotal(this.props.totalData,g.GRAY30,s[(t+2)%s.length]);for(var v=0;v<u.length;++v)r.push(u[v]);}return r;},getErrorMessages:function(){return this.refs.chart?this.refs.chart.getErrorMessages():[];},getExportData:function(){return this.refs.chart.getExportData();},render:function(){var q=l(i.CHART_THEME,this.props.theme,m.Clobber);return (k.createElement(j,k.__spread({},this.props,{ref:"chart",configs:this._buildSeriesConfigs(q),theme:q})));}};e.exports=p;},null);
__d("BonsaiAreasTimeSeriesChart",["BonsaiTimeSeriesChartMixin","BonsaiText","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=i.createClass({displayName:"BonsaiAreasTimeSeriesChart",_chartType:'areas',mixins:[g],getDefaultProps:function(){return {showPercentTotal:true};},processTotal:function(k,l,m){return [{data:k,title:h.total,type:'lines',color:l,ecosystem_color:m,unselect:this.props.unselectTitles&&this.props.unselectTitles.indexOf(h.total)!=-1}];}});e.exports=j;},null);
__d("BonsaiLinesTimeSeriesChart",["BonsaiTimeSeriesChartMixin","React"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=h.createClass({displayName:"BonsaiLinesTimeSeriesChart",_chartType:'lines',mixins:[g]});e.exports=i;},null);
__d("BonsaiBreakdownChart",["BonsaiApiBreakdown","BonsaiApiDataAdapter","BonsaiApiError","BonsaiApiPromise","BonsaiAreasTimeSeriesChart","BonsaiConstants","BonsaiErrorNotice","BonsaiLinesTimeSeriesChart","BonsaiText","InsightsLoadingIndicator.react","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=q,t=s.PropTypes,u=q.createClass({displayName:"BonsaiBreakdownChart",getDefaultProps:function(){return {hasDropdown:true,percentage:false,ratio:false,shouldStack:true,showTotal:true,sort:'total'};},propTypes:{currency:t.string,data:t.object.isRequired,filters:t.object,hasDropdown:t.bool,helptext:t.string,percentage:t.bool,ratio:t.bool,shouldStack:t.bool,showTotal:t.bool,title:t.string,width:t.number,breakdown:t.oneOf(Object.keys(g).map(function(v){return g[v];})).isRequired,keyLabel:t.oneOf(Object.keys(g).map(function(v){return g[v];})),sort:t.oneOf(['total','numerator','bucket'])},getErrorMessages:function(){return this.refs.chart?this.refs.chart.getErrorMessages():[];},getExportData:function(){return this.refs.chart.getExportData();},render:function(){if(this.props.data instanceof i)return (q.createElement("div",{className:"_5r8_"},q.createElement(m,{className:"_3-8t _3-96",message:this.props.data.getMessage()})));if(this.props.data instanceof j)return (q.createElement("div",{className:"_5r8_"},q.createElement(p,null)));var v=this.props.data,w=this.props.filters||{},x=Object.keys(w),y=this.props.breakdown,z=this.props.keyLabel||y,aa=null;if(x.length)v=v.groupBy.apply(v,x);x.forEach(function(la){v=v[w[la]];});if(v){v=v.groupBy(y);}else v={};if(y===g.NONE){aa=q.createElement(n,q.__spread({},this.props,{ref:"chart",breakdown:y,data:[v],titles:[this.props.title]}));return aa;}function ba(la){return [la,v[la]?v[la].getTotal():0];}function ca(la){var ma=new h({data:v[la].getData()});return [la,v[la]?ma.getTotal():0];}var da=Object.keys(v);if(this.props.sort==='bucket'){da.sort();}else{var ea=this.props.sort==='numerator'?ca:ba;da=da.map(ea,this);da.sort(function(la,ma){return ma[1]-la[1];});}var fa=[],ga=[],ha=Math.min(l.MAX_BREAKDOWN_BUCKETS,da.length);for(var ia=0;ia<ha;++ia){var ja=da[ia];if(this.props.sort!=='bucket')ja=da[ia][0];var ka=o.getBucketLabel(ja,z);fa.push(v[ja]);ga.push(ka);}if(this.props.shouldStack){aa=q.createElement(k,q.__spread({},this.props,{ref:"chart",breakdown:y,totalData:(x.length||!this.props.showTotal)?null:this.props.data,data:fa,titles:ga}));}else aa=q.createElement(n,q.__spread({},this.props,{ref:"chart",breakdown:y,data:fa,titles:ga}));return aa;}});e.exports=u;},null);
__d("BonsaiSelectorPanel",["React","LeftRight.react","InsightsContext","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g,m=l.PropTypes,n=g.createClass({displayName:"BonsaiSelectorPanel",propTypes:{divider:m.bool},getDefaultProps:function(){return {divider:true};},render:function(){var o=this.props.children,p=o[1],q=o[0],r="_ncc",s="_5tj5 mbl";if(i.isDevsite()){r="_4vqj";s="_4vqk mbl";}if(this.props.divider)s=k(s,"_40zm");return (g.createElement(h,null,g.createElement("div",{className:r},q),g.createElement("div",{className:s},p)));}});e.exports=n;},null);
__d("BonsaiTooltip",["Image.react","React","Tooltip","cx","xuiglyph"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h,m=l.PropTypes,n=h.createClass({displayName:"BonsaiTooltip",propTypes:{alignH:m.oneOf(['left','center','right']),position:m.oneOf(['above','below','left','right']),tooltip:m.string.isRequired},getDefaultProps:function(){return {alignH:'right',position:'above'};},render:function(){return (h.createElement("span",{className:"_24fl"},h.createElement(g,{src:k({name:'info-solid',shade:'light',size:'small'})})));},componentDidMount:function(){i.set(h.findDOMNode(this),this.props.tooltip,this.props.position,this.props.alignH);}});e.exports=n;},null);
__d("FalcorErrorNotice",["BonsaiText","Image.react","React","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=i,l=k.PropTypes,m=i.createClass({displayName:"FalcorErrorNotice",propTypes:{message:l.string,short:l.bool},render:function(){var n=this.props.short?g.errors.unavailable:this.props.message;return (i.createElement("div",i.__spread({},this.props,{className:"_3aw"}),i.createElement(h,{src:"/images/icons/platform/analytics/Info.png"}),i.createElement("div",{className:"_3ax"},n),i.createElement("div",{className:"_2aj_"},this.props.children)));}});e.exports=m;},null);
__d("FalcorMenuSelector",["React","ReactXUIMenu","PopoverMenu.react","XUIPopoverButton.react","cloneWithProps","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=g,o=n.PropTypes,p=g.createClass({displayName:"FalcorMenuSelector",propTypes:{onItemChange:o.func,buttonClass:o.string,activeValue:o.string},getInitialState:function(){return this._getActiveState(this.props);},componentWillReceiveProps:function(q){if(this.props.activeValue!==q.activeValue)this.setState(this._getActiveState(q));},_getActiveState:function(q){var r=q.children[0].props.label,s=q.children[0].props.value;if(q.activeValue){s=q.activeValue;g.Children.forEach(q.children,function(t){if(t.props.value===s)r=t.props.label;});}return {activeLabel:r,activeValue:s};},_onItemClick:function(event,q){var r={activeLabel:q.item.getLabel(),activeValue:q.item.getValue()};if(this.props.onItemChange)this.props.onItemChange(r);if(this.isMounted())this.setState(r);},_renderMenu:function(){var q=[];g.Children.forEach(this.props.children,function(r){var s=r.props.value===this.state.activeValue;q.push(k(r,{key:r.props.value,className:m(r.props.className,((s?"_2li6":'')))}));}.bind(this));return (g.createElement(h,{className:"_2li4",onItemClick:this._onItemClick},q));},render:function(){return (g.createElement(i,{className:this.props.className,menu:this._renderMenu(),alignh:"right"},g.createElement(j,{className:m(this.props.buttonClass,"_5g1q"),label:this.state.activeLabel,haschevron:true})));}});e.exports=p;},null);
__d("FalcorBreakdownChartSwitcher",["BonsaiApiBreakdown","InsightsContext","BonsaiSelectorPanel","BonsaiStyle","BonsaiText","BonsaiTooltip","DeveloperInsightsLogger","FalcorErrorNotice","FalcorMenuSelector","React","XUIGrayText.react","cloneWithProps","copyProperties","cx","fbt","getObjectValues","ReactXUIMenu"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=b('ReactXUIMenu').Item,x=p,y=x.PropTypes,z=p.createClass({displayName:"FalcorBreakdownChartSwitcher",ALL:"@ALL@",propTypes:{customBreakdowns:y.object,currentCard:h.isDevsite()?y.string:y.string.isRequired,defaultBreakdown:y.oneOf(v(g)),categories:y.arrayOf(y.string),onBreakdownChange:y.func,showBreakdownSelector:y.bool,selectorTitle:y.string},getDefaultProps:function(){return {defaultBreakdown:g.NONE,showBreakdownSelector:true};},componentWillReceiveProps:function(aa){this.setState({shouldRefresh:true});},onBreakdownChangeTo:function(aa){var ba=aa.activeValue,ca=this.getValidFiltersForData(this.findChildByKey(ba).props.data);if(ba===this.props.defaultBreakdown&&this.findChildByKey(this.props.defaultBreakdown))delete ca[g.CLIENT];h.setActiveCardName(this.props.currentCard);h.setActiveBreakdownName(ba);h.addCardState(this.props.currentCard,{breakdown:ba});m.logAction('breakdown_transition');if(this.props.onBreakdownChange)this.props.onBreakdownChange(ba);if(this.isMounted())this.setState({active:ba,filters:ca,shouldRefresh:true});},getInitialState:function(){var aa=this.getChildren(),ba=null,ca=null;if(h.getActiveCardName()==this.props.currentCard){ba=h.getActiveBreakdownName();ca=h.getActiveFilters();}return {active:ba||this.props.active||aa[0].key,filters:ca||{},legend:null,shouldRefresh:false};},setLegendState:function(aa){this.setState({legend:aa,shouldRefresh:false});},setRefreshState:function(){this.setState({shouldRefresh:true});},buildSelector:function(){var aa=this.getChildren(),ba=[],ca=null;aa.filter(function(fa){return !!fa;}).forEach(function(fa){var ga=fa.key,ha=!this.props.customBreakdowns?k.getBreakdownName(ga):this.props.customBreakdowns[ga],ia=false;if(this.state.active===ga){ia=true;ca=ga;}var ja=k.getBreakdownTooltip(ga,ia);ba.push(p.createElement(w,{className:"_2li5",key:ga,value:ga,label:ha},p.createElement("div",null,ha,ja?p.createElement(l,{tooltip:ja}):null)));}.bind(this));var da=this.props.selectorTitle||u._("MOSTRAR POR");if(!Array.isArray(ba)||ba.length<1)return null;var ea=this.props.showBreakdownSelector?p.createElement("div",null,p.createElement(q,{className:"_2pis",shade:"light",size:"small",display:"block",weight:"bold"},da),p.createElement(o,{className:"_5gr9",buttonClass:"_3-8x _3-9a",activeValue:ca,onItemChange:this.onBreakdownChangeTo},ba)):null;return (p.createElement("div",null,ea,p.createElement("div",{className:"_2pig _2pis"},this.state.legend)));},getValidFiltersForData:function(aa){var ba={};Object.keys(this.state.filters).filter(function(ca){return aa.hasBreakdown(ca);}).forEach(function(ca){ba[ca]=this.state.filters[ca];}.bind(this));return ba;},getChildren:function(){return Array.isArray(this.props.children)?this.props.children:[this.props.children];},findChildByKey:function(aa){var ba=this.getChildren(),ca=null;ba.forEach(function(da){if(da!==null&&da.key===aa)ca=da;});return ca;},getErrorMessage:function(){var aa=Object.keys(this.refs);if(!aa.length)return null;var ba=[];aa.forEach(function(ca){ba=ba.concat(this.refs[ca].getErrorMessages());}.bind(this));return ba[0];},getExportData:function(){return this.refs[this.state.active].getExportData();},render:function(){var aa=this.getErrorMessage();if(aa)return p.createElement(n,{message:aa});var ba=this.getChildren();if(ba.length===1){var ca=ba[0];if(!ca.props.threshold||!ca.props.categories)ca=r(ca,s(ca.props,{threshold:ca.props.threshold||this.props.threshold,categories:ca.props.categories||this.props.categories}));return ca;}var da=this.findChildByKey(this.state.active);if(!da)da=ba[0];var ea={filters:this.state.filters,width:j.FALCOR_WIDTH,setLegend:this.setLegendState,refreshLegend:!this.state.shouldRefresh?this.setRefreshState:null,ref:this.state.active};if(!da.props.threshold)ea.threshold=this.props.threshold;if(!da.props.categories)ea.categories=this.props.categories;var fa=r(da,s(da.props,ea));return (p.createElement(i,{divider:false},fa,this.buildSelector()));}});e.exports=z;},null);
__d("FalcorCardSearchInput",["AbstractTextInput.react","Image.react","LeftRight.react","React","cx","fbt","xuiglyph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=j,o=n.PropTypes,p=j.createClass({displayName:"FalcorCardSearchInput",propTypes:{onSearchChange:o.func.isRequired},render:function(){return (j.createElement(i,{className:"_bcq"},j.createElement(h,{className:"_bcr",src:m({name:'search',shade:'light',size:'medium'})}),j.createElement(g,{onChange:this.props.onSearchChange,placeholder:l._("B\u00fasquedas")})));}});e.exports=p;},null);
__d("FalcorDownloadMixin",["BlobFactory","Image.react","InsightsInfoTip.react","React","cx","fbt","formatDate","xuiglyph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o={componentWillUnmount:function(){var p=this._downloadLink;if(p){var q=a.URL||a.webkitURL,r=p.href;if(r)q.revokeObjectURL(r);}},_onClick:function(p){var q=this.props.getExportData();if(!q)return;var r=null;if(q.data){r=q;}else r=this._getFormatData(q);var s=[r.data],t=null;if(q.fileName){t=q.fileName.replace(/ /g,'_');}else{var u=r.times.reduce(function(z,aa){z.max=aa>z.max?aa:z.max;z.min=aa<z.min?aa:z.min;return z;},{max:Number.MIN_VALUE,min:Number.MAX_VALUE}),v=[u.min/1000,u.max/1000].map(function(z){return m(z,'jMY',{utc:true,skipPatternLocalization:true});}).join('_');t=[this.props.exportFilename,v].join('_')+'.csv';}var w='text/csv',x=g.getBlob(s,{type:w});if(window.navigator.msSaveBlob){window.navigator.msSaveBlob(x,t);}else{var y=a.URL||a.webkitURL;if(!this._downloadLink){this._downloadLink=document.createElement('a');document.body.appendChild(this._downloadLink);}this._downloadLink.href=y.createObjectURL(x);this._downloadLink.download=t;this._downloadLink.click();}},_getExportButton:function(){var p=a.URL||a.webkitURL,q=window.navigator&&window.navigator.msSaveBlob;if(!g.isSupported()||!((p&&p.createObjectURL)||q)){var r=l._("This browser is not supported. Please switch to the latest version of Chrome, Firefox or Internet Explorer.");return (j.createElement(i,{tip:r},j.createElement("div",{className:"_2e7s"},j.createElement(h,{src:n({name:'share',shade:'dark',size:'medium'})}))));}return (j.createElement("div",{className:"_2e7s",onClick:this._onClick},j.createElement(h,{src:n({name:'share',shade:'dark',size:'medium'})})));},_getFormatData:function(p){var q,r,s,t;q=[];r={};s=[];p.forEach(function(u){var v={};q.push(u.header);u.body.forEach(function(w){var x=w.time.getTime();r[x]=1;v[x]=v[x]?v[x]+w.value:w.value;});s.push(v);});r=Object.keys(r).sort();s=r.map(function(u){var v,w;v=s.map(function(x){return x[u];});w=new Date();w.setTime(u);v.unshift(m(w,'m/d/Y',{utc:true}));return v;});t=q.slice(0);t.unshift('Date');s.unshift(t);s=this._createCSVString(s);return {data:s,times:r};},_createCSVString:function(p){return p.map(function(q){return q.map(function(r){return r?r.toString():'-';}).map(function(r){return r.indexOf(',')===-1?r:"\""+r+"\"";}).join(',');}).join('\n');}};e.exports=o;},null);
__d("FalcorHelpTextDialogMixin",["LayerFadeOnHide","React","ReactLayeredComponentMixin","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n={mixins:[i],showHelpTextDialog:function(o,p,q){this.setState({isShowingHelpTextDialog:true,helpTextDialogTitle:o,helpTextDialogBody:p,extraText:q});},hideHelpTextDialog:function(){this.setState({isShowingHelpTextDialog:false});},renderLayers:function(){if(!this.state||!this.state.isShowingHelpTextDialog)return {};return {dialog:h.createElement(j,{className:"_4aim",shown:true,onToggle:this.hideHelpTextDialog,width:500,behaviors:{LayerFadeOnHide:g}},h.createElement(l,{className:"_4ain"},h.createElement("span",{className:"_4aiq"},this.state.helpTextDialogTitle)),h.createElement(k,{className:"_4air"},h.createElement("div",{className:"_4ait"},this.state.helpTextDialogBody,this.state.extraText)))};}};e.exports=n;},null);
__d("FalcorCard",["BonsaiConfig","FalcorCardSearchInput","BonsaiContextualHelp","FalcorDownloadMixin","FalcorHelpTextDialogMixin","Image.react","LeftRight.react","List.react","React","XUICard.react","cx","joinClasses","xuiglyph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=o,u=t.PropTypes,v=o.createClass({displayName:"FalcorCard",mixins:[j,k],propTypes:Object.assign({},p.propTypes,{title:u.string,getExportData:u.func,exportFilename:u.string,onSearchChange:u.func,showLine:u.bool,dropDown:u.node,buttons:u.node,helpText:u.shape({key:u.string.isRequired,title:u.string.isRequired,extra:u.element}),stepNumber:u.number}),getDefaultProps:function(){return {showLine:true};},render:function(){return (o.createElement(p,o.__spread({},this.props,{className:r(this.props.className,"_11oy"),title:""}),this._renderHeader(),this.props.children));},_renderHelpButton:function(){if(!this.props.helpText)return null;var w=g.helptext[this.props.helpText.key].content;if((!w||!w.__html)&&(!g.isEmployee||!g.isInternal)){if(!this.props.helpText.extra)return null;w='';}else w=o.createElement(i,{helpKey:this.props.helpText.key});return (o.createElement("div",{className:"_2e7s",onClick:this.showHelpTextDialog.bind(this,this.props.helpText.title,w,this.props.helpText.extra)},o.createElement(l,{src:s({name:'info-solid',shade:'dark',size:'medium'})})));},_renderHeader:function(){var w=this.props.title||this.props.getExportData||this.props.onSearchChange||this.props.dropDown||this.props.buttons||this.props.stepNumber,x=this.props.title;if(this.props.stepNumber)x=o.createElement("div",null,o.createElement("div",{className:"_3tor _3-91"},this.props.stepNumber),o.createElement("span",null,this.props.title));if(!w)return null;var y=this.props.onSearchChange?o.createElement(h,{onSearchChange:this.props.onSearchChange}):null,z=this.props.dropDown&&x?o.createElement(l,{className:"_3-8s",src:s({name:'chevron-right',shade:'light'})}):null,aa=o.createElement(n,{direction:"horizontal",border:"none",spacing:"none"},o.createElement("li",null,this.props.buttons),o.createElement("li",null,this._renderHelpButton()),o.createElement("li",null,this.props.getExportData?this._getExportButton():null)),ba=x||this.props.dropDown,ca=ba?o.createElement("div",null,x,z,this.props.dropDown):y,da=ba?o.createElement(m,null,y,o.createElement("div",{className:"_3-9b"},aa)):aa,ea=(("_11o_")+(w&&this.props.showLine?' '+"_4bha":''));return (o.createElement("div",{className:ea},o.createElement(m,null,ca,da)));}});e.exports=v;},null);
__d("FalcorHeaderSelector",["Image.react","InsightsContext","LeftRight.react","React","PopoverMenu.react","ReactXUIMenu","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=b('ReactXUIMenu').Item,p=j,q=p.PropTypes,r=j.createClass({displayName:"FalcorHeaderSelector",propTypes:{headerKey:q.string.isRequired,onItemChange:q.func},getInitialState:function(){var t=null;if(h.getActiveCardName()===this.props.headerKey)if(h.getActiveTabName())t=h.getActiveTabName();var u=this.props.children[0];j.Children.forEach(this.props.children,function(v){if(v.props.value===t)u=v;});return {activeSection:u};},_onItemClick:function(t){return function(){h.setActiveCardName(this.props.headerKey);h.setActiveTabName(t.props.value);h.addCardState(this.props.headerKey,{tab:t.props.value});if(this.props.onItemChange)this.props.onItemChange(t.props.value);this.setState({activeSection:t});}.bind(this);},_renderMenu:function(){var t=[];j.Children.forEach(this.props.children,function(u){var v=u.props.value===this.state.activeSection.props.value,w=(("_2li5")+(v?' '+"_2li6":'')),x=j.createElement("div",{onClick:this._onItemClick(u)},u.props.label,u.props.tooltip);t.push(j.createElement(o,{className:w,key:u.props.value,value:u.props.value},x));}.bind(this));return (j.createElement(l,{className:"_2li4"},t));},render:function(){return (j.createElement("div",{className:"_3imf"},j.createElement(k,{menu:this._renderMenu()},j.createElement(i,null,j.createElement("div",{className:"_3img"},this.state.activeSection.props.label),j.createElement(g,{src:n('/images/ui/x/button/normal/chevron.png')})))));}}),s=j.createClass({displayName:"FalcorHeaderSelectorItem",propTypes:{label:q.string,value:q.string,tooltip:q.element},render:function(){return this.props.children;}});r.Item=s;e.exports=r;},null);
__d("FalcorLegendSelectorMixin",["BonsaiSelectorPanel","BonsaiStyle","FalcorCard","FalcorErrorNotice","FalcorHeaderSelector","InsightsContext","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=k.Item,o={_getInitialCardState:function(p){if(l.getActiveCardName()==this.props.cardKey)p=l.getActiveTabName()?l.getActiveTabName():p;return {legend:null,shouldRefresh:true,activeSection:p};},_getLegendProps:function(){return {currentCard:this.props.cardKey,width:h.FALCOR_WIDTH,setLegend:this._setLegendState,refreshLegend:!this.state.shouldRefresh?this._setRefreshState:null};},_getExportFileName:function(){if(this.getFileName){var p=this.getFileName();if(p)return p;}var q=this._title()+' '+this._getKeyToLabel()[this.state.activeSection];return q.split(' ').join('_');},render:function(){var p=this._getKeyToLabel(),q=this._getKeyToSection(),r=null,s=null,t=Object.keys(p).map(function(x){if(this.state.activeSection===x){r=q[x];s=p[x];}return (m.createElement(n,{key:x,value:x,label:p[x]}));}.bind(this)),u=m.createElement(k,{headerKey:this.props.cardKey,onItemChange:this._onTabChange},t),v=this._getExtraCardProps?this._getExtraCardProps():null,w=this._getHelptextMap?this._getHelptextMap()[this.state.activeSection]:null;if(w)w={key:w,title:s};return (m.createElement(i,m.__spread({},v,{title:this._title(),dropDown:u,helpText:w,getExportData:this._onExportClick,exportFilename:this._getExportFileName()}),r));},_onExportClick:function(){if(this.refs[this.state.activeSection])return this.refs[this.state.activeSection].getExportData();if(this.getExportData)return this.getExportData();return null;},_buildTimeSeriesChartGroup:function(p){if(this.refs[p.ref]){var q=this.refs[p.ref].getErrorMessages();if(q.length)return m.createElement(j,{message:q[0]});}return (m.createElement(g,{divider:false},p,this.state.legend));},_onTabChange:function(p){this.setState({activeSection:p,shouldRefresh:true});},_setLegendState:function(p){this.setState({legend:p,shouldRefresh:false});},_setRefreshState:function(){this.setState({shouldRefresh:true});}};e.exports=o;},null);
__d("FalcorA2UOverviewCard",["BonsaiApiBreakdown","BonsaiBreakdownChart","FalcorBreakdownChartSwitcher","BonsaiSectionDataLoaderMixin","BonsaiText","FalcorLegendSelectorMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=m.createClass({displayName:"FalcorA2UOverviewCard",mixins:[j,l],getInitialState:function(){return this._getInitialCardState('click_rate');},componentWillMount:function(){this.addMetric('sends','app_notification_sends');this.addMetric('sends_ref','app_notification_sends',{breakdowns:[g.REF]});this.addMetricWithEcosystem('imps','app_notification_impressions');this.addMetric('imps_ref','app_notification_impressions',{breakdowns:[g.REF]});this.addMetricWithEcosystem('clicks','app_notification_clicks');this.addMetric('clicks_ref','app_notification_clicks',{breakdowns:[g.REF]});this.addMetric('ctr_ref','app_notification_ctr',{breakdowns:[g.REF]});this.fetchMetrics();},_title:function(){return n._("Notificaciones de la aplicaci\u00f3n");},_getHelptextMap:function(){return {click_rate:'A2UClickRate',sends:'A2USent',imps:'A2UImpressions',clicks:'A2UClicks'};},_data:function(p,q){var r={click_rate:{none:this.getDataWithEcosystem('clicks').divideBy(this.getDataWithEcosystem('imps')),ref:this.getData('ctr_ref')},sends:{none:this.getData('sends'),ref:this.getData('sends_ref')},imps:{none:this.getData('imps'),ref:this.getData('imps_ref')},clicks:{none:this.getData('clicks'),ref:this.getData('clicks_ref')}};return r[p][q];},_label:{click_rate:k.click_rate,sends:k.app_notifications_sent,imps:k.impressions,clicks:k.clicks},_getBreakdownChartSwitcher:function(p,q){return (m.createElement(i,{ref:p,currentCard:this.props.cardKey,threshold:this._getHelptextMap()[p]},m.createElement(h,{breakdown:g.NONE,currentCard:this.props.cardKey,data:this._data(p,'none'),key:g.NONE,percentage:q,title:this._label[p],categories:[this._getHelptextMap()[p]]}),m.createElement(h,{breakdown:g.REF,currentCard:this.props.cardKey,data:this._data(p,'ref'),key:g.REF,percentage:q,shouldStack:false,showTotal:false})));},_getKeyToLabel:function(){return {click_rate:this._label.click_rate,sends:this._label.sends,imps:this._label.imps,clicks:this._label.clicks};},_getKeyToSection:function(){return {click_rate:this._getBreakdownChartSwitcher('click_rate',true),sends:this._getBreakdownChartSwitcher('sends',false),imps:this._getBreakdownChartSwitcher('imps',false),clicks:this._getBreakdownChartSwitcher('clicks',false)};}});e.exports=o;},null);
__d("FalcorA2UNegativeCard",["BonsaiLinesTimeSeriesChart","BonsaiSectionDataLoaderMixin","FalcorLegendSelectorMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=j.createClass({displayName:"A2UNegativeCard",mixins:[h,i],getInitialState:function(){return this._getInitialCardState('rates');},componentWillMount:function(){this.addMetricWithEcosystem('spam_rate','app_notification_spam_rate');this.addMetricWithEcosystem('hide_rate','app_notification_hide_rate');this.addMetric('spam_reports','app_notification_spam_reports');this.addMetric('hides','app_notification_hides');this.addMetric('unhides','app_notification_unhides');this.fetchMetrics();},_getHelptextMap:function(){return {rates:'A2USpamRate',spam_reports:'A2USpamReports',hides:'A2UHides'};},_title:function(){return k._("Comentarios negativos");},_getKeyToLabel:function(){return {rates:this._text.spam_and_hide_rates,spam_reports:this._text.spam_reports,hides:this._text.hides};},_getKeyToSection:function(){return {rates:this._buildTimeSeriesChartGroup(j.createElement(g,j.__spread({},this._getLegendProps(),{ref:"rates",data:[this.getDataWithEcosystem('spam_rate'),this.getDataWithEcosystem('hide_rate')],titles:[this._text.spam_rate,this._text.hide_rate],categories:[this._getHelptextMap().rates]}))),spam_reports:this._buildTimeSeriesChartGroup(j.createElement(g,j.__spread({},this._getLegendProps(),{ref:"spam_reports",data:[this.getData('spam_reports')],titles:[this._text.spam_reports],categories:[this._getHelptextMap().spam_reports]}))),hides:this._buildTimeSeriesChartGroup(j.createElement(g,j.__spread({},this._getLegendProps(),{ref:"hides",data:[this.getData('hides'),this.getData('unhides')],titles:[this._text.hides,this._text.unhides],categories:[this._getHelptextMap().hides]})))};},_text:{spam_and_hide_rates:k._("Tasas de ocultamiento y spam"),spam_rate:k._("Tasa de spam"),hide_rate:k._("Tasa de ocultamiento"),spam_reports:k._("Reportes de spam"),hides:k._("Ocultamiento de notificaciones"),unhides:k._("Volver a mostrar las notificaciones")}});e.exports=l;},null);
__d("BonsaiSectionDateRangeMixin",["InsightsContext","BonsaiSections","BonsaiStyle","BonsaiDevsiteStyle","InsightsTimeSelector.react","InsightsUtils","Link.react","React","cloneWithProps","cx","fbt","formatDate","d3/time/day","d3/scale/linear"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=4,v={getInitialState:function(){var w=g.getActiveSectionName(),x=(w!==h.OVERVIEW)&&(w!==h.WATCH);return {showTimeSlider:x};},applyDateRangeToCard:function(w){if(!w)return null;return o(w,{key:w.key,fullDateRange:this.props.fullDateRange,visibleDateRange:this.props.visibleDateRange});},onRangeClick:function(){this.setState({showTimeSlider:!this.state.showTimeSlider});},renderTimeSelector:function(){var w=[l.fillArray(100,.4)],x=[this.props.fullDateRange.since,this.props.fullDateRange.until],y={since:this.props.visibleDateRange.since,until:s.utc.offset(this.props.visibleDateRange.until,1)},z=function(ga){var ha={since:ga.since,until:s.utc.offset(ga.until,-1)};this.props.onDateRangeChange(ha);},aa={'7':q._("una semana"),'28':q._("4 semanas"),'90':q._("90 d\u00edas")};if(g.getDaysToLoad()>180)aa['180']=q._("180   d\u00edas");if(g.getDaysToLoad()>365)aa['365']=q._("1 a\u00f1o");var ba=g.isDevsite()?j.TIME_SELECTOR_WIDTH:i.TIME_SELECTOR_WIDTH,ca=this.props.visibleDateRange,da=q._("Mostrando datos del {from} al {to}",[q.param("from",r(ca.since,'m/d/Y',{utc:true})),q.param("to",r(ca.until,'m/d/Y',{utc:true}))]),ea=null;if(g.getActiveSectionName()===h.OVERVIEW)ea=(n.createElement("div",{className:"_w4l"},n.createElement(m,{onClick:this.onRangeClick,className:"_w4m"},da)));if(g.getActiveSectionName()===h.WATCH)ea=(n.createElement("div",{className:"_3en6"},n.createElement("div",{className:"_w4m"},da)));if(this.state.showTimeSlider){var fa=(this.props.minDaysDateRangeSelector===(void 0))?u:this.props.minDaysDateRangeSelector;ea=n.createElement(k,{className:"_5tjx",areas:w,brushHeight:i.TIME_SELECTOR_HEIGHT,brushWidth:ba,domain:x,earliestTime:x[0],mostRecentTime:x[1],onRangeChange:z.bind(this),periodShortcuts:aa,scaleY:t().domain([0,1]).clamp(true),scaleYHasDomain:true,selectedDateRange:y,minDays:fa,timeZoneDisclaimer:da});}return (n.createElement("div",null,ea));}};e.exports=v;},null);
__d("BonsaiPercentageString",["BonsaiUtils","InsightsNumUtils","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=i,m=l.PropTypes,n=i.createClass({displayName:"BonsaiPercentageString",propTypes:{currentValue:m.number,percentage:m.number,previousValue:m.number},render:function(){var o=this.props.currentValue,p=this.props.previousValue;if(o&&p){return this._renderChangeString(o,p);}else if(this.props.percentage){return this._renderSimplePercentage();}else throw new Error('No percentage or current/previous value specified');},_renderSimplePercentage:function(){var o=parseFloat((this.props.percentage*100).toFixed(2),10);return (i.createElement("div",i.__spread({},this.props),h.prettyFloat(o)+'%'));},_renderChangeString:function(o,p){var q=g.calculatePercentageChange(o,p),r=k(q.className,this.props.className);return (i.createElement("div",{className:r},i.createElement("div",{className:"_vhz"}),q.string));}});e.exports=n;},null);
__d("BonsaiSparkLinesChart",["BonsaiApiError","BonsaiLayerModalMixin","BonsaiColors","BonsaiStyle","SpectrumChart","SpectrumCurrencyScale","SpectrumFloatScale","Grid.react","InsightsLegend.react","InsightsLegendAreaKey.react","InsightsTimeUtils","SpectrumIntegerScale","SpectrumLines","React","SpectrumStyle","SpectrumTimeScale","SpectrumTooltipMenu","SpectrumXAxis","SpectrumYAxis","cx","fbt","formatDate","mapObject","d3/time/day","d3/core/max","d3/core/min"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){b.__markCompiled&&b.__markCompiled();var ga=t,ha=ga.PropTypes;function ia(ma){ma.tickFormat=function(){return function(oa){return ba(oa,'m/d',{utc:true});};};var na=ma.copy;ma.copy=function(){return ja(na());};return ma;}function ja(ma){ma.tickFormatMaxLength=41;var na=ma.copy;ma.copy=function(){return ja(na());};return ma;}function ka(ma){ma.tickFormatMaxLength=46;var na=ma.copy;ma.copy=function(){return ka(na());};return ma;}var la=t.createClass({displayName:"BonsaiSparkLinesChart",mixins:[h],propTypes:{configs:ha.array,height:ha.number,width:ha.number,showXAxis:ha.bool,showYAxis:ha.bool,showAxisLines:ha.bool,valueType:ha.oneOf(['USD','seconds']),showTooltips:ha.bool,float:ha.bool},getDefaultProps:function(){return {configs:[],showTooltips:false};},componentWillReceiveProps:function(ma){this.setState(this._getStateFromProps(ma));},_getStateFromProps:function(ma){var na=[];ma.configs.forEach(function(oa){if(oa.data instanceof g)return;var pa=oa.series||oa.data.getTimeSeries();if(pa.length<2)return;var qa={color:oa.color,series:pa,legendValue:oa.legendValue};na.push(qa);},this);return {metrics:na};},getInitialState:function(){return this._getStateFromProps(this.props);},range:{max:-Infinity,min:Infinity},render:function(){var ma={lines:[]},na={gutter:{bottom:5,top:12},lines:{colors:[],markers:false},xAxis:{fontSize:u.FONT_SIZE_SMALL,labelColor:i.ANALYTICS_GRAY,tickPadding:6},yAxis:{fontSize:u.FONT_SIZE_SMALL,labelColor:i.ANALYTICS_GRAY,tickPadding:20}};if(!this.props.showAxisLines)na.yAxis.lineColor=null;if(!this.state.metrics.length)return (t.createElement("div",null));var oa=[];for(var pa=0;pa<this.state.metrics.length;pa++){ma.lines[pa]=this.state.metrics[pa].series;na.lines.colors[pa]=this.state.metrics[pa].color;if(this.state.metrics[pa].legendValue)oa[pa]=this.state.metrics[pa].legendValue;}this.series=ma;var qa=0,ra=ca(ma,function(bb,cb){if(!bb.length)return null;bb.forEach(function(db){qa=Math.max(qa,db.length);});this.range.max=ea(bb,function(db){return ea(db,function(eb){return da.utc.offset(eb[0],1);});});this.range.min=fa(bb,function(db){return fa(db,function(eb){return eb[0];});});return this._getChart(bb);},this),sa=new Date(this.range.min),ta=new Date(this.range.max),ua=v().domain([sa,ta]).clamp(true).interval(v.Intervals.Day),va=this.props.float?m(2):r(),wa=null;if(this.props.showXAxis){wa=t.createElement(x,{ticks:3,disableLines:!this.props.showAxisLines});ua=ia(ua);}var xa=null;if(this.props.showYAxis){xa=t.createElement(y,null);if(this.props.valueType==='USD'){va=ka(l('USD'));}else if(this.props.valueType==='seconds'){va=q.ySecondsScale(va);}else va=ja(va);}var ya=null,za=oa.length>1;if(za)ya=t.createElement(o,{className:"_2piv",layout:o.layout.STACKED},oa.map(function(bb,cb){return t.createElement(p,{className:"_2pip",color:na.lines.colors[cb],key:'legend_'+cb},t.createElement("span",{className:"_5qvg"},bb));}));var ab=this.props.showTooltips?t.createElement(w,{actionContent:aa._("Haz clic para ver m\u00e1s detalles")}):null;return (t.createElement(n,{className:this.props.className,cols:za?2:1},t.createElement(k,{height:this.props.height||j.SPARKLINES_HEIGHT,scaleX:ua,scaleY:va,theme:na,width:this.props.width||j.SPARKLINES_WIDTH},ra.lines,wa,xa,ab),ya));},_getChart:function(ma){var na=t.createElement(s,{data:ma,ignoreMouseEvents:!this.props.showTooltips,theme:{lines:{markers:false}},valueX:function(oa,pa){return oa[0];},valueY:function(oa,pa){return oa[1];}});return na;}});e.exports=la;},null);
__d("BonsaiOverviewMetric",["BonsaiApiError","BonsaiColors","BonsaiErrorNotice","BonsaiPercentageString","BonsaiSparkLinesChart","PrettyNum","React","cx","joinClasses","sprintf"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=m,r=q.PropTypes,s=m.createClass({displayName:"BonsaiOverviewMetric",propTypes:{subtitleText:r.string,title:r.oneOfType([r.string,r.object]),time_series:r.object.isRequired,format:r.string,precision:r.number,latest:r.bool,percentage:r.bool,reverseDelta:r.bool,small:r.bool},getDefaultProps:function(){return {format:'%s'};},render:function(){var t=null;if(this.props.title)t=m.createElement("div",{className:"_50f8 _4lin"},this.props.title);if(this.props.time_series instanceof g)return (m.createElement("div",{className:"_4lio"},t,m.createElement(i,{className:"_3-8t _3-96",message:this.props.time_series.getMessage()})));var u=[{data:this.props.time_series,color:h.X_ACCENT_BLUE}],v=this.props.latest?this.props.time_series.getLatestTotal():this.props.time_series.getTotal();if(!v)v=0;var w=new l(v,null,this.props.precision);if(this.props.percentage){v=w.toPrettyPercentage();}else if(this.props.currency){v=w.toPrettyCurrency(this.props.currency);}else v=w.toPretty();var x=null,y=this.props.time_series.getLatestTotal(),z=this.props.time_series.getOldestTotal(),aa=null;if(y&&z){if(this.props.reverseDelta)aa="_2-g6";x=m.createElement(j,{className:"_7lz",currentValue:y,previousValue:z});}var ba=!!this.props.subtitleText,ca=null;if(ba)ca=m.createElement("span",{className:"_50f8 _144p"},' ('+this.props.subtitleText+')');return (m.createElement("div",{className:"_4lio"},t,m.createElement("div",{className:o(((!ba?"_7l-":'')+(ba?' '+"_144q":'')+(this.props.small?' '+"_7l_":'')+(!this.props.small?' '+"_7m0":'')),aa)},m.createElement("span",{className:((!ba?"_19sl":'')+(ba?' '+"_144r":''))},p(this.props.format,v),ca),x),m.createElement(k,{className:"_4liq",width:80,height:30,configs:u})));}});e.exports=s;},null);
__d("BonsaiOverviewBarMixin",["BonsaiSectionDataLoaderMixin","BonsaiApiPromise","BonsaiApiDataAdapter","BonsaiUtils","BonsaiSections","InsightsContext","InsightsLoadingIndicator.react","LeftRight.react","BonsaiOverviewMetric","InsightsSummaryBar","React","URI","copyProperties","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=q,v=u.PropTypes,w={mixins:[g],getDefaultProps:function(){return {headerLink:false};},propTypes:{headerLink:v.bool},appEventMetricKey:function(x){return [x.aggregateBy,x.event_name];},getSumData:function(x){var y=["SUM",x];return this.getData(y);},componentWillMount:function(){var x=this.getMetrics();Object.keys(x).forEach(function(y){var z=x[y];if(typeof z!="object"){this.addMetric(y,x[y]);}else this.addMetric(this.appEventMetricKey(z),'app_event',z);},this);this.fetchMetrics();},postFetchDataProcess:function(){if(this.getDataAdapters!==undefined)return this.getDataAdapters();var x=this.getMetrics();return Object.keys(x).map(function(y){var z=x[y],aa=(typeof z!="object")?y:this.appEventMetricKey(z);return this.getData(aa);}.bind(this));},getMetricUris:function(){return this.getChartLocations().map(function(x){return new r(window.location.href).addQueryData(s(x,{section:this.getSection()}));}.bind(this));},getSectionUri:function(){return j.getSectionInsightsURI(this.getSection());},render:function(){var x=this.postFetchDataProcess(),y=Object.keys(this.getLabels()).map(function(ba){var ca=x[ba];if(ca instanceof h)return q.createElement(m,{size:'small',key:ba});var da=this.getLatest!==undefined&&this.getLatest()[ba],ea=this.getFormats!==undefined?this.getFormats()[ba]:'%s',fa=this.getPercentages!==undefined?this.getPercentages()[ba]:false,ga=this.getPrecision!==undefined?this.getPrecision()[ba]:(fa?1:0),ha=this.getMetrics()[ba];if(ha&&ha.event_name=="fb_mobile_purchase"){var ia=this.getSumData(ha.event_name);if(ia instanceof h){return q.createElement(m,{size:'small',key:ba});}else if(ia instanceof i)if(ia.getTotal()&&!ca.getTotal()){ca=ia;ea="%s";}}var ja=(q.createElement(o,{key:ba,time_series:ca,title:this.getLabels()[ba],latest:da,format:ea,percentage:fa,precision:ga,reverseDelta:this.getReverseDeltas!==undefined?this.getReverseDeltas()[ba]:false}));if(l.getActiveSectionName()!=k.OVERVIEW)return ja;return (q.createElement("a",{href:this.getMetricUris()[ba],key:ba},ja));}.bind(this)),z=y.length;for(;z<3;z++)y.push(q.createElement("div",{className:"_4lio"}));var aa=this.getTitle();if(this.props.headerLink)aa=(q.createElement("a",{href:this.getSectionUri()},aa));aa=(q.createElement("div",{className:"_120i"},aa));if(this.getSideLink)aa=q.createElement(n,null,aa,this.getSideLink());return (q.createElement("div",{className:"_120h"},aa,q.createElement(p,{className:"_120j",itemClassName:"_120k"},y)));}};e.exports=w;},null);
__d("OverviewAppNotifBar",["BonsaiSections","BonsaiSectionDateRangeMixin","BonsaiOverviewBarMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j.createClass({displayName:"OverviewAppNotifBar",mixins:[h,i],getSection:function(){return g.A2U;},getTitle:function(){return k._("Notificaciones de la aplicaci\u00f3n");},getMetrics:function(){return ['app_notification_sends','app_notification_spam_rate','app_notification_impressions','app_notification_clicks'];},getChartLocations:function(){return [{card:'a2U_overview',tab:'sends'},{card:'a2U_overview',tab:'click_rate'},{card:'a2U_negative',tab:'rates'}];},getDataAdapters:function(){return [this.getData(0),this.getData(3).divideBy(this.getData(2)),this.getData(1)];},getPercentages:function(){return [false,true,false];},getLabels:function(){return [k._("Notificaciones enviadas"),k._("Porcentaje de clics de las notificaciones"),k._("Tasa de notificaciones de spam por 10 000 impresiones")];}});e.exports=l;},null);
__d("FalcorSectionDateRangeMixin",["BonsaiSections","DatePickerRestraints","InsightsContext","InsightsEventLogger","Image.react","Link.react","React","XUIDateRangePicker.react","UTCUtils","cx","fbt","xuiglyph","d3/time/day"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=m,u=t.PropTypes,v={propTypes:{fullDateRange:u.object,visibleDateRange:u.object},getInitialState:function(){return {fullRange:this.props.fullDateRange,visibleRange:this.props.visibleDateRange,onDateRangeChange:this.props.onDateRangeChange||this._onDateRangeChange};},componentWillMount:function(){if(!this.state.fullRange)this.setState({fullRange:this.state.fullDateRange,visibleRange:this.state.visibleDateRange});var w=this._getOldestDate(),x=this._getLatestDate();if(this._shouldLimit(this.props)&&(this.state.visibleRange.since<w||this.state.visibleRange.until>x))this.setState({visibleRange:{since:this.state.visibleRange.since<w?w:this.state.visibleRange.since,until:this.state.visibleRange.until>x?x:this.state.visibleRange.until}});},componentWillReceiveProps:function(w){if(w.fullDateRange){var x=w.visibleDateRange;if(this._shouldLimit(w)){var y=i.getLaserMaxDateRangeStartDate(),z=i.getLaserMaxDateRangeEndDate();x={since:x.since<y?y:x.since,until:x.until>z?z:x.until};}this.setState({fullRange:w.fullDateRange,visibleRange:x});}else this.setState({fullRange:this.state.fullDateRange,visibleRange:this.state.visibleDateRange});},_shouldLimit:function(w){return w.section===g.COHORTS||w.section===g.FUNNELS||w.section===g.SEGMENTS;},_getOldestDate:function(){var w=this.state.fullRange.since,x=i.getLaserMaxDateRangeStartDate();if(this._shouldLimit(this.props)&&w<x)w=x;return w;},_getLatestDate:function(){var w=this.state.fullRange.until,x=i.getLaserMaxDateRangeEndDate();if(this._shouldLimit(this.props)&&w>x)w=i.getLaserMaxDateRangeEndDate();return w;},_getRangeLengths:function(){var w=s.range(this.state.visibleRange.since,this.state.visibleRange.until).length,x=s.range(this.state.fullRange.since,this.state.visibleRange.since).length;return {visibleLength:w,remainingLength:x};},getDateProps:function(){var w=this.state.visibleRange.since.getTime(),x=-(o.getPacificOffsetAt(w));w+=x;var y=this.state.visibleRange.until.getTime();x=-(o.getPacificOffsetAt(y));y+=x;return {fullDateRange:this.state.fullRange,visibleDateRange:this.state.visibleRange,dateRangeLengths:this._getRangeLengths(),startTime:this.state.visibleRange.since.getTime()/1000,endTime:this.state.visibleRange.until.getTime()/1000,startTimePST:w/1000,endTimePST:y/1000};},_getPresets:function(){var w=Math.min(s.offset(this.state.fullRange.until,-1).getTime(),this._getLatestDate().getTime());return [{title:q._("Todas"),since:this._getOldestDate().getTime(),until:w},{title:q._("\u00daltimos 7 d\u00edas"),since:s.offset(w,-7).getTime(),until:w},{title:q._("\u00daltimos 14 d\u00edas"),since:s.offset(w,-14).getTime(),until:w},{title:q._("\u00daltimos 30 d\u00edas"),since:s.offset(w,-30).getTime(),until:w}];},_createRangeAnchor:function(w,x){var y=function(){j.logDateRangeChange(w.since,w.until,true);this._onRangeChange(w.since,w.until);}.bind(this);return (m.createElement("li",{key:'item_'+x,className:"_5adk"},m.createElement(l,{onClick:y},w.title)));},_onRangeSelected:function(w,x){j.logDateRangeChange(w,x,false);this._onRangeChange(w,x);},_onRangeChange:function(w,x){var y={since:new Date(w),until:new Date(x)};this.setState({visibleRange:y});this.state.onDateRangeChange(y);},renderDateSelector:function(){if(this._showDateSelector&&!this._showDateSelector())return null;var w={since:this.state.visibleRange.since.getTime(),until:this.state.visibleRange.until.getTime()},x=[h.enforceDateIsNoEarlierThan(this._getOldestDate()),h.enforceDateIsNoLaterThan(this._getLatestDate())],y=m.createElement("div",null,this._getPresets().map(this._createRangeAnchor,this)),z={className:"_11fy",chevron:m.createElement(k,{src:r({name:'triangle-down',shade:'white',size:'small'})})};return (m.createElement(n,{className:"_5ubo",buttonProps:z,key:"_falcorDateRangePicker",onRangeSelected:this._onRangeSelected,rangePresets:y,defaultStartFocusTime:w.since,defaultStartSelectTime:w.since,defaultEndFocusTime:w.until,defaultEndSelectTime:w.until,startDateRestraints:x,endDateRestraints:x,yearRangePast:1,yearRangeFuture:0,calendarAlignment:'right',labelFormatString:'M j, Y',timezoneName:q._("Hora del Pac\u00edfico")}));}};e.exports=v;},null);
__d("XBonsaiAppEventConfigUpsellAsyncController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/insights\/app_event_config_settings\/upsell_dismiss\/",{app_id:{type:"Int",required:true}});},null);
__d("BonsaiAppEventConfigUtils",["AsyncRequest","InsightsContext","XBonsaiAppEventConfigUpsellAsyncController","XBonsaiAppEventConfigCanvasNoticeAsyncController"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={onImplicitPurchaseEventDismiss:function(){var l=i.getURIBuilder().setInt('app_id',h.getObjID()).getURI();new g().setURI(l).setMethod('POST').send();},onImplicitCanvasInstallDismiss:function(){var l=j.getURIBuilder().setInt('app_id',h.getObjID()).getURI();new g().setURI(l).setMethod('POST').send();}};e.exports=k;},null);
__d("BonsaiStatus",["BonsaiConfig","fbt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(k,l){if(l)l=l.toLowerCase();var m=g.status,n=null;if(l&&m[l])n=m[l][k]||"";if(!n){var o=m[k];n=o||n;if(!n&&(j.isOffline()||j.isOffline(l)))n=h._("Estamos realizando tareas de mantenimiento en las estad\u00edsticas de aplicaciones; volver\u00e1 a estar disponible lo antes posible.");}return n;}var j={isOffline:function(k){if(k)k=k.toLowerCase();var l=g.status;if(l.offline)return true;if(k)return l[k]?l[k].offline==true:false;return false;},isMessageAWarning:function(k){var l=g.status;if(k){k=k.toLowerCase();l=l[k];}return !!l.is_warning;},getMessage:function(k){return i('message',k);},getInternalMessage:function(k){var l=i('internal',k);if(l&&g.isInternal&&g.isEmployee)l='Internal: '+l;return l;}};e.exports=j;},null);
__d("FalcorButtonShape",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.PropTypes,j=i.shape({disabled:i.bool,href:i.string,onClick:i.func,text:i.string.isRequired});e.exports=j;},null);
__d("FalcorSearchSource",["Promise","SearchSource.atlas"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;function k(l){h.call(this);this.$FalcorSearchSource0=l.map(function(m){return {name:m.name,id:m.id};});}k.prototype.updateOptions=function(l){this.$FalcorSearchSource0=l.map(function(m){return {name:m.name,id:m.id};});};k.prototype.bootstrapSuggest=function(){return this.$FalcorSearchSource1({});};k.prototype.suggest=function(l){return this.$FalcorSearchSource1(l);};k.prototype.$FalcorSearchSource1=function(l){var m=this.$FalcorSearchSource2(this.$FalcorSearchSource0,l.query);return g.resolve(m);};k.prototype.$FalcorSearchSource2=function(l,m){if(!m)return l;m=m&&m.toLocaleLowerCase();var n=l.filter(function(o){return o.name.toLocaleLowerCase().indexOf(m)>=0;});return n;};e.exports=k;},null);
__d("FalcorHeader.react",["FalcorButtonShape","FalcorSearchSource","Image.react","LeftRight.react","Link.react","List.react","React","SearchableDropdownInput.atlas","URI","XUIButton.react","XUIPopoverButton.react","cx","invariant","xuiglyph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=m,v=u.PropTypes,w={Mini:0,OneLevel:1,TwoLevel:2},x=m.createClass({displayName:"FalcorHeader",propTypes:{buttons:v.arrayOf(g),control:v.node,optionsButtonURL:v.string,hasSideNavPadding:v.bool,subtitle:v.node,title:v.node,dateSelector:v.node,enableDateSelector:v.bool,toggles:v.node,selectorLinks:v.arrayOf(v.shape({displayName:v.string,url:v.string})),subsections:v.shape({onChange:v.func.isRequired,tabs:v.arrayOf(v.shape({key:v.string.isRequired,label:v.string.isRequired})).isRequired,active:v.string})},getDefaultProps:function(){return {enableDateSelector:true};},_activeSectionFromProps:function(y){var z=null;if(y.subsections&&y.subsections.tabs.length){var aa=y.subsections.tabs.reduce(function(ba,ca){return ba?ba:(y.subsections.active===ca.key);},false);if(aa){z=y.subsections.active;}else z=y.subsections.tabs[0].key;}return z;},getInitialState:function(){return {activeSubsection:this._activeSectionFromProps(this.props),miniMode:false};},componentWillMount:function(){if(this.props.selectorLinks){var y=this.props.selectorLinks.map(function(aa){return {name:aa.displayName,id:aa.url};}),z=new h(y);this.setState({searchSource:z});}},componentWillReceiveProps:function(y){var z=this.state.searchSource;if(y.selectorLinks){var aa=y.selectorLinks.map(function(ba){return {name:ba.displayName,id:ba.url};});if(!z){z=new h(aa);}else z.updateOptions(aa);}this.setState({activeSubsection:this._activeSectionFromProps(y),searchSource:z});},setMiniMode:function(y){if(y!==this.state.miniMode)this.setState({miniMode:y});},render:function(){var y=this.renderHeader(false);if(this.state.miniMode)return (m.createElement("div",null,this.renderHeader(true),y));return y;},renderHeader:function(y){var z=this.props,aa=(z.enableDateSelector&&z.dateSelector)||false,ba=aa?z.dateSelector:null,ca=w.OneLevel,da=this._renderButtons(y);if(y){ca=w.Mini;if(aa)da=[];}else if(z.control||z.subsections){ca=w.TwoLevel;s(z.control?!z.subsections:z.subsections);}else if(da.length>0&&aa){ca=w.TwoLevel;}else if(z.toggles)ca=w.TwoLevel;var ea=m.createElement(i,{src:t({name:'triangle-down',size:"large",shade:"white"})}),fa=z.selectorLinks&&z.selectorLinks.length>0,ga=m.createElement(q,{className:"_ljf _5ubl",chevron:ea,haschevron:!!this.props.selectorLinks,label:z.title,maxwidth:0});if(fa)ga=this._renderMenu(z.title,ea);var ha="_ljg _1pqy _3h1l",ia=z.subtitle&&ca!==w.Mini?m.createElement("div",{className:ha},z.subtitle):null,ja="_5ubn";if(ca<=w.OneLevel&&aa){da.push(ba);ja="_4xam";}var ka=m.createElement("div",{className:ja},da),la=null;if(ca===w.TwoLevel){var ma=z.control;if(z.subsections)ma=this._renderSubsectionTabs();la=[m.createElement("div",{className:"_5ubp",key:"_divider"}),m.createElement(j,{key:"_content"},m.createElement("div",null,ma),m.createElement("div",null,z.toggles,ba))];}var na=(("_4xan")+(z.subsections?' '+"_4-y8":'')+(ca===w.Mini?' '+"_4ou7":'')+(z.hasSideNavPadding?' '+"_5d-6":''));return (m.createElement("div",{className:na},m.createElement("div",{className:"_4xao"},ia,m.createElement(j,null,m.createElement("div",{className:"_5ubl"},ga),ka),la)));},_renderButtons:function(y){var z=this.props.buttons||[],aa='xlarge';if(y)aa='medium';return z.filter(function(ba){return !!ba;}).map(function(ba,ca){return m.createElement(p,{className:"_5ubi",disabled:ba.disabled,href:ba.href,key:ca+ba.text,label:ba.text,onClick:ba.onClick,size:aa});});},_renderSubsectionTabs:function(){var y=this.props.subsections.tabs.map(function(z){return m.createElement("li",{key:z.key},this._renderSubsectionLink(z));}.bind(this));return (m.createElement(l,{direction:"horizontal",spacing:"large",border:"none"},y));},_renderSubsectionLink:function(y){var z=(("_ljg")+(' '+"_1pqy")+(y.key!==this.state.activeSubsection?' '+"_3h1l":'')+(y.key===this.state.activeSubsection?' '+"_4-y9":''));if(y.key===this.state.activeSubsection)return (m.createElement("span",{className:z},y.label,m.createElement("div",{className:"_4-ya"},m.createElement("div",{className:"_4-yb"}))));return (m.createElement(k,{className:z,href:"#",onClick:function(){return this._changeTab(y.key);}.bind(this)},y.label));},_changeTab:function(y){if(y!==this.state.activeSubsection){this.props.subsections.onChange(y);this.setState({activeSubsection:y});}},_onEventSelect:function(y){var z=new o(y.id);z.go();},_renderMenu:function(y,z){if(!y)return null;return (m.createElement(n,{className:"_ljf _5ubl",chevron:z,dropdownWidth:300,searchSource:this.state.searchSource,placeholder:y,onSelect:this._onEventSelect}));}});e.exports=x;},null);
__d("FalcorNotice",["FalcorButtonShape","Image.react","LeftRight.react","React","XUIButton.react","XUIButtonGroup.react","XUICard.react","XUICloseButton.react","cx","joinClasses","keyMirror","xuiglyph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();"use strict";var s=j,t=s.PropTypes,u={ERROR:{background:"_2ijh",image:r({name:'error-solid',shade:'white',size:'large'})},INFORMATION:{background:"_2iji",image:r({name:'information',shade:'white',size:'large'})},SUCCESS:{background:"_2ijj",image:r({name:'checkmark',shade:'white',size:'large'})},WARNING:{background:"_2ijk",image:r({name:'error-solid',shade:'white',size:'large'})}},v=j.createClass({displayName:"FalcorNotice",propTypes:{noticeType:t.oneOf(Object.keys(u)).isRequired,message:t.oneOfType([t.object,t.string]).isRequired,subtext:t.oneOfType([t.object,t.string]),firstButton:g,secondButton:g,dismissButton:g},getInitialState:function(){return {dismissed:false};},render:function(){var w=null,x=null,y=[];if(this.state.dismissed)return null;if(this.props.dismissButton)w=j.createElement(n,{className:"_2ijl",href:this.props.dismissButton.href,onClick:this._onDismiss});if(this.props.firstButton)y.push(j.createElement(k,{key:"_firstButton",className:"_2ijm",label:this.props.firstButton.text,href:this.props.firstButton.href,onClick:this.props.firstButton.onClick,size:"large"}));if(this.props.secondButton)y.push(j.createElement(k,{key:"_secondButton",className:"_2ijm",label:this.props.secondButton.text,href:this.props.secondButton.href,onClick:this.props.secondButton.onClick,size:"large"}));if(this.props.subtext)x=j.createElement("div",{className:"_2ijn"},this.props.subtext);var z=u[this.props.noticeType],aa=null;if(y.length>0){aa=j.createElement(i,null,j.createElement("div",null,j.createElement("div",{className:"_2ijo"},this.props.message),x),j.createElement(l,{className:"_2ijp"},y));}else aa=j.createElement("div",null,j.createElement("div",{className:"_2ijo"},this.props.message),x);return (j.createElement("div",{className:"_2ijq"},j.createElement(m,null,j.createElement("div",{className:p("_2ijr",z.background)},j.createElement(h,{className:"_2ijs",src:z.image})),w,j.createElement("div",{className:"_2ijt"},aa))));},_onDismiss:function(){this.setState({dismissed:true});this.props.dismissButton.onClick();}});v.NoticeTypes=q(u);e.exports=v;},null);
__d("FalcorSectionRendererMixin",["BonsaiAppEventConfigUtils","BonsaiErrorNotice","BonsaiHelpText","BonsaiSections","BonsaiStatus","BonsaiText","BonsaiUtils","FalcorHeader.react","FalcorNotice","InsightsContext","React","ScrollableArea.react","cloneWithProps","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=75,w=43;function x(){return window.innerHeight-w;}var y={getInitialState:function(){return {scrollableHeight:x()};},componentWillMount:function(){window.addEventListener('resize',this._onResize);},componentWillUnmount:function(){window.removeEventListener('resize',this._onResize);},componentDidUpdate:function(){this._onScroll();},_onResize:function(z){if(this.isMounted())this.setState({scrollableHeight:x()});},_onScroll:function(){if(!this.isMounted())return;var z=this.refs&&this.refs.scroller;if(z){var aa=z.getArea(),ba=aa.getScrollTop();if(ba>v){this.refs.header.setMiniMode(true);}else if(ba<=v)this.refs.header.setMiniMode(false);}},render:function(){var z=[],aa,ba=p.getActiveSectionName();if(p.isDemoApp()){var ca=q.createElement(i,{helpKey:'DemoAppDisclaimerMainText'}),da=q.createElement(i,{helpKey:'DemoAppDisclaimerSubText'});z.push(q.createElement(o,{noticeType:o.NoticeTypes.INFORMATION,key:"demo_app_notice",message:ca,subtext:da}));}var ea=k.getMessage(ba);if(ea){var fa='notify';if(k.isMessageAWarning(ba))fa='warn';z.push(q.createElement(h,{className:"_3-96",key:"message",message:ea,use:fa}));}var ga=k.getInternalMessage(ba);if(ga)z.push(q.createElement(h,{className:"_3-96",key:"internal",message:ga}));if(k.isOffline(ba))return (q.createElement("div",{className:"_23hs"},q.createElement("div",{className:"_1t0x clearfix"},z)));if(p.isReadOnly()&&!p.isDemoApp()){var ha=u._("You can see this page because you have been granted permission to access this app. Analytics is currently read-only.");z.push(q.createElement(o,{key:"_readOnly",noticeType:o.NoticeTypes.INFORMATION,message:ha}));}if(p.hasCustomEvents()&&p.getShowImplicitPurchaseEventsUpsell())z.push(q.createElement(o,{key:"_purchaseUpsell",noticeType:o.NoticeTypes.INFORMATION,message:l.implicit_purchase_events_upsell.text,subtext:l.implicit_purchase_events_upsell.subtext,firstButton:{onClick:function(){m.getSectionInsightsURI(j.SETTINGS).go();},text:l.enable_button},secondButton:{href:l.implicit_purchase_events_upsell.url,text:l.learn_button},dismissButton:{onClick:g.onImplicitPurchaseEventDismiss,text:''}}));if(p.getShowImplicitCanvasInstallNotice()){var ia=u._("App Launches and App Installs are now logged automatically for canvas app users. Calls to the JavaScript SDK's 'activateApp' method are now ignored as they're no longer needed."),ja=p.isReadOnly()?null:{onClick:g.onImplicitCanvasInstallDismiss,text:''};z.push(q.createElement(o,{key:"_canvasNotice",noticeType:o.NoticeTypes.INFORMATION,message:ia,dismissButton:ja}));}if(this.constructor.getTopInfo)aa=this.constructor.getTopInfo();var ka=this.getContent(this.props,this.state),la;if(this.getSummary)la=this.getSummary(this.props,this.state);if(la)ka.unshift(s(la,{key:'summary_bar'}));var ma;if(this.getHeaderProps){ma=this.getHeaderProps();}else ma={title:this.getTitle()};if(!this.props.upsell&&this._useSectionDateRangeMixin())ma.dateSelector=this.renderDateSelector();ma.hasSideNavPadding=true;return (q.createElement(r,{ref:"scroller",height:this.state.scrollableHeight,onScroll:this._onScroll},q.createElement(n,q.__spread({ref:"header"},ma)),q.createElement("div",{className:"_1t0x clearfix"},aa,z,ka)));},_useSectionDateRangeMixin:function(){return this.renderDateSelector!=null;}};e.exports=y;},null);
__d("FalcorA2USectionController",["FalcorA2UOverviewCard","FalcorA2UNegativeCard","BonsaiSections","BonsaiSectionDisplayNames","OverviewAppNotifBar","FalcorSectionDateRangeMixin","FalcorSectionRendererMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=n.createClass({displayName:"FalcorA2USectionController",mixins:[l,m],statics:{getKey:function(){return i.A2U;}},getSummary:function(){return (n.createElement(k,n.__spread({},this.getDateProps())));},getContent:function(){return [n.createElement(g,n.__spread({},this.getDateProps(),{cardKey:"a2U_overview",key:"a2U_overview"})),n.createElement(h,n.__spread({},this.getDateProps(),{cardKey:"a2U_negative",key:"a2U_negative"}))];},getTitle:function(){return j.get(o.getKey());}});e.exports=o;},null);
__d("FalcorAppEventRuleDataUtils",["BonsaiSections","InsightsFunnelConstants"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=[],j=[g.SEGMENTS],k={validateAppEventRule:function(l){if(!l||!l.event_name)return 'Invalid App Event Rule - rule is undefined';var m=Object.keys(l);for(var n=0;n<m.length;n++){var o=m[n];if(o!=='application'&&o!=='event_name'&&o!=='parameters')return 'Invalid App Event Rule - unknown property: '+o;}if(!l.application)return 'Invalid App Event Rule - missing property: application';var p=l.parameters;if(!Array.isArray(p))return 'Invalid App Event Rule - invalid event parameters';var q;for(n=0;n<p.length;n++){q=this.validateAppEventRuleParameter(p[n]);if(q)return q;}return null;},validateAppEventRuleParameter:function(l){if(!l||!l.parameter_name)return 'Invalid App Event Parameter - parameter is undefined';var m=Object.keys(l);for(var n=0;n<m.length;n++){var o=m[n];if(o!=='parameter_name'&&o!=='operator'&&o!=='values')return 'Invalid App Event Parameter - unknown property: '+o;}if(!l.operator)return 'Invalid App Event Parameter - missing parameter operator';if(!l.values||l.values.length===0)return 'Invalid App Event Parameter - missing parameter values';return null;},validateAppEventRuleData:function(l,m){var n=i.indexOf(m)>=0,o=j.indexOf(m)>=0,p=Object.keys(l);for(var q=0;q<p.length;q++){var r=p[q];if(r!=='event_rule'&&r!=='name'&&r!=='negate_rule')return 'Invalid Rule Data - unknown property: '+r;}if(n&&!l.name)return 'Invalid Rule Data - Empty rule name';if(o&&l.negate_rule!==true&&l.negate_rule!==false)return 'Invalid Rule Data - Unspecified negation option';return this.validateAppEventRule(l.event_rule);},validateAppEventRuleDataList:function(l,m){if(m===g.FUNNELS&&(l.length<1||l.length>h.MAX_NUM_STAGES))return 'Only 1 - '+h.MAX_NUM_STAGES+' Funnel Stages are allowed';var n;for(var o=0;o<l.length;o++){n=this.validateAppEventRuleData(l[o],m);if(n)return n;}return null;},isAppEventRuleValid:function(l){return !this.validateAppEventRule(l);},isAppEventRuleParameterValid:function(l){return !this.validateAppEventRuleParameter(l);},isAppEventRuleDataValid:function(l,m){return !this.validateAppEventRuleData(l,m);},isAppEventRuleDataListValid:function(l,m){return !this.validateAppEventRuleDataList(l,m);}};e.exports=k;},null);
__d("CohortModel",["BonsaiAppEventTypesUtils","BonsaiSections","AppEventsCohortsChartType","FalcorAppEventRuleDataUtils","fbt","intlList"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m={isValid:function(){var o=this.name&&this.name.trim();if(!o)return false;o=this.chart_type;if(!o)return false;o=this.first_event&&this.followup_event;if(!o)return false;return j.isAppEventRuleDataListValid([this.first_event,this.followup_event],h.COHORTS);},getDescription:function(){var o=g.getAppEventDisplayName(this.first_event.event_rule.event_name),p=g.getAppEventDisplayName(this.followup_event.event_rule.event_name);return l([o,p],l.CONJUNCTIONS.NONE);},getWireFormat:function(){return {name:this.name,description:this.description,chart_type:this.chart_type,first_event:this.first_event,followup_event:this.followup_event};}};function n(o){var p;if(!o){p=Object.assign({},m,{name:k._("New Cohort"),description:'',chart_type:i.USER_RETENTION,first_event:{name:'firstEvent'},followup_event:{name:'followupEvent'}});}else p=Object.assign({},m,o);return p;}e.exports=n;},null);
__d("CohortStore",["CohortModel","InsightsEntityStore","InsightsGraphAPIConstants"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j;function k(){if(!j)j=new h(i.COHORTS_EDGE,i.COHORTS_NODE,g);return j;}e.exports=k();},null);
__d("FalcorDeleteDialog",["React","SimpleXUIDialog","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={confirmDelete:function(k,l){var m=g.createElement("div",null,i._("Please confirm deletion of '{Analytics object name}'. This cannot be undone.",[i.param("Analytics object name",k)]));h.showConfirm(m,i._("Eliminar"),l);}};e.exports=j;},null);
__d("FalcorAnalyticsFeatureSectionController",["BonsaiSectionDisplayNames","BonsaiUtils","FalcorSectionDateRangeMixin","FalcorSectionRendererMixin","InsightsContext","InsightsEventLogger","FalcorCommonViews","FalcorDeleteDialog","React","URI","fbt","invariant","isValidID"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=o,u=t.PropTypes,v={featureID:u.string,view:u.string},w=o.createClass({displayName:"FalcorAnalyticsFeatureSectionController",mixins:[i,j],propTypes:Object.assign({},v,{additionalHeaderProps:u.object,section:u.string.isRequired,onRenderView:u.func.isRequired,entityStore:u.object.isRequired}),containerPropTypes:Object.assign({},v),getInitialState:function(){return {feature:null,featureList:null,featureListLoading:false};},componentDidUpdate:function(x,y){if(!this.state.featureList)this._loadEntityList();},componentWillMount:function(){var x=this.props.entityStore;x.setEntityChangeCallback(function(y){if(y!=this.state.feature&&this.isMounted())this.setState({feature:y});}.bind(this));x.setEntityID(this.props.featureID);this._loadEntityList();},componentWillReceiveProps:function(x){if(this.props.featureID!==x.featureID)x.entityStore.setEntityID(x.featureID);},getTitle:function(){if(this.props.featureID){return this.state.feature?this.state.feature.name:'';}else return g.get(this.props.section);},getHeaderProps:function(){var x=Object.assign({buttons:this._getButtons(),title:this.getTitle()},this.props.additionalHeaderProps);if(this.props.featureID){x.subtitle=g.getSingular(this.props.section);if(this.state.featureList)x.selectorLinks=this._buildFeatureUrlList();}return x;},getContent:function(){var x=this._getViewFromProps(),y=this.state.feature||this.props.entityStore.newEntity(),z=this.props.onRenderView(x,this.state.featureList,this.props.featureID,y,this.getDateProps().startTimePST,this.getDateProps().endTimePST,this._getSegmentID());if(!z)r(false);return [z];},_getButtons:function(){var x=this._getViewFromProps(),y=[];switch(x){case m.LIST:y=[this._getCreateButton()];break;case m.DETAILS:y=[this._getCreateButton(),this._getEditButton()];break;case m.EDIT:y=[this._getSaveButton(),this._getDeleteButton(),this._getCancelButton()];break;case m.CREATE:y=[this._getSaveButton(),this._getCancelButton()];}return y;},_getCreateButton:function(){var x=h.getSectionInsightsURI(this.props.section,null,m.CREATE).toString(),y={disabled:k.appNeedsMoreEventsToCreateFeature(this.props.section),onClick:this._logHeaderButtonClick.bind(this,'create'),href:x,text:q._("Crear nuevo")};return y;},_getEditButton:function(){var x=h.getSectionInsightsURI(this.props.section,this.props.featureID,m.EDIT).toString(),y={onClick:this._logHeaderButtonClick.bind(this,'edit'),href:x,text:q._("Editar")};return y;},_getSaveButton:function(){r(this.props.view===m.EDIT||this.props.view===m.CREATE);var x={disabled:k.isReadOnly()||k.appNeedsMoreEventsToCreateFeature(this.props.section),onClick:this._onSave,text:q._("Guardar")};return x;},_getDeleteButton:function(){var x={onClick:this._onDelete,text:q._("Eliminar")};return x;},_getCancelButton:function(){var x=h.getSectionInsightsURI(this.props.section).toString(),y={onClick:this._logHeaderButtonClick.bind(this,'cancel'),href:x,text:q._("Cancelar")};return y;},_getViewFromProps:function(){switch(this.props.view){case m.CREATE:case m.LIST:return this.props.view;case m.DETAILS:case m.EDIT:r(this.props.featureID&&s(this.props.featureID));return this.props.view;default:return this.props.featureID?m.DETAILS:m.LIST;}},_buildFeatureUrlList:function(){var x=[],y;for(y=0;y<this.state.featureList.length;y++){var z=this.state.featureList[y];if(z.id===this.props.featureID)continue;x.push({displayName:z.name,url:h.getSectionInsightsURI(this.props.section,z.id,this._getViewFromProps()).toString()});}return x;},_loadEntityList:function(){if(this.state.featureListLoading)return;if(this.isMounted())this.setState({featureListLoading:true});this.props.entityStore.loadEntityList(function(x){if(this.isMounted())this.setState({featureList:x,featureListLoading:false});}.bind(this));},_resetEntityList:function(){if(this.isMounted())this.setState({featureList:null,featureListLoading:false});},_showDateSelector:function(){return this._getViewFromProps()===m.DETAILS;},_onSave:function(){this._logHeaderButtonClick('save');if(this.state.feature&&this.state.feature.isValid()){if(this.props.view===m.CREATE){this.props.entityStore.createEntity(function(x){var y=this._getSegmentID(),z=y?{segmentID:y}:{};this._resetEntityList();h.getSectionInsightsURI(this.props.section,x.id,m.DETAILS,z).go();}.bind(this));}else if(this.props.view===m.EDIT)this.props.entityStore.saveEntity(function(x){this._resetEntityList();h.getSectionInsightsURI(this.props.section,this.state.feature.id,m.DETAILS).go();}.bind(this));}else this.props.entityStore.updateEntityConfiguration({showValidationError:{$set:true}});},_onDelete:function(){this._logHeaderButtonClick('delete');n.confirmDelete(this.state.feature.name,this._deleteEntity);},_deleteEntity:function(x){if(x){this._logHeaderButtonClick('delete_confirmed');this.props.entityStore.deleteEntity(function(y){this._resetEntityList();h.getSectionInsightsURI(this.props.section).go();}.bind(this));}else this._logHeaderButtonClick('delete_canceled');},_getSegmentID:function(){var x=p.getRequestURI(),y=x.getQueryData();return y.segment_id;},_logHeaderButtonClick:function(x){var y=k.getActiveSectionName().toLowerCase();l.logEvent({_eventName:y+'_'+x+'_click',feature_id:this.props.featureID?this.props.featureID:null,view:this.props.view?this.props.view.toLowerCase():null});}});e.exports=w;},null);
__d("FalcorAppEventSelector",["BonsaiAppEventTypesUtils","BonsaiConstants","FalcorSearchSource","React","SearchableDropdownInput.atlas","XUISelector.react","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=j,o=n.PropTypes,p=j.createClass({displayName:"FalcorAppEventSelector",propTypes:Object.assign({},l.propTypes,{enableCreateNewAppEvent:o.bool,extraAppEvents:o.arrayOf(o.shape({event_name:o.string,display_name:o.string}))}),getDefaultProps:function(){return {extraAppEvents:[]};},getInitialState:function(){return {appEventsUnique:{},searchSource:null};},componentWillMount:function(){var q=g.getAppEvents().concat(this.props.extraAppEvents),r={};q.map(function(event){r[event.event_name]=event;});var s=this._getEventSelectorOptions(r),t=new i(s);this.setState({appEventsUnique:r,searchSource:t});},componentWillReceiveProps:function(q){if(this.state.searchSource&&q.value){var r=this._getSelectedItem();if(r){var s=this._getEventSelectorOptions(this.state.appEventsUnique),t=s.find(function(u){return u.id===r.id;});if(!t){s.push(r);this.state.searchSource.updateOptions(s);}}}},_getSelectedItem:function(){var q=this.state.appEventsUnique,r;if(this.props.value)if(q[this.props.value]==null){r={id:this.props.value,name:this.props.value};}else r={id:q[this.props.value].event_name,name:q[this.props.value].display_name};return r;},_getEventSelectorOptions:function(q){var r=[],s=Object.keys(q).map(function(u){return {id:q[u].event_name,name:q[u].display_name};});r=r.concat(s);if(this.props.enableCreateNewAppEvent){var t=m._("Create New App Event...");r.push({id:h.EVENT_SELECTOR_NEW_VALUE,name:t});}return r;},render:function(){var q=m._("Select an App Event");return (j.createElement(k,{className:this.props.className,dropdownWidth:300,onSelect:function(){for(var r=[],s=0,t=arguments.length;s<t;s++)r.push(arguments[s]);j.findDOMNode(this).blur();this.props.onSelect.apply(this,r);}.bind(this),searchSource:this.state.searchSource,placeholder:q,value:this._getSelectedItem()}));}});e.exports=p;},null);
__d("FalcorParameterRuleBuilderSearchSource",["AbstractSearchSource","SearchableEntry"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';for(var i in g)if(g.hasOwnProperty(i))k[i]=g[i];var j=g===null?null:g.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=g;function k(l){this.setValues(l);}k.prototype.setValues=function(l){l.sort(function(m,n){return m.title.localeCompare(n.title);});this.parameterPossibleValues=l;};k.prototype.getSearchEntries=function(l){var m=[];this.parameterPossibleValues.forEach(function(n){var o=l.indexOf(n.uniqueID);if(o>-1)m.push(new h(n));});return m;};k.prototype.isEmpty=function(){return this.parameterPossibleValues.length===0;};k.prototype.searchImpl=function(l,m,n){var o=[],p=l.toLowerCase();this.parameterPossibleValues.forEach(function(q){if(q.uniqueID.toLowerCase().startsWith(p)||q.title.toLowerCase().startsWith(p))o.push(new h(q));});m(o,l);};e.exports=k;},null);
__d("FalcorParameterRuleBuilderTypeaheadView",["React","TypeaheadViewPropTypes","XUITypeaheadTextOnlyView.react","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g.createClass({displayName:"FalcorParameterRuleBuilderTypeaheadView",propTypes:h,render:function(){return (g.createElement("div",{className:"_1ouq"},g.createElement(i,g.__spread({},this.props))));}});e.exports=k;},null);
__d("FalcorParameterRuleBuilder",["AppEventField","FalcorParameterRuleBuilderSearchSource","FalcorParameterRuleBuilderTypeaheadView","FalcorSearchSource","Layout.react","LoadingIndicator.react","AudienceManagerAppRemarketingOperatorConfig","React","SearchableDropdownInput.atlas","SearchableEntry","XUICloseButton.react","XUISelector.react","XUISelectorButton.react","XUITokenizer.react","XUITokenizerToken.react","cx","fbt","update"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();'use strict';var y=k.Column,z=k.FillColumn,aa=r.Option,ba=n,ca=ba.PropTypes,da={typeahead_placeholder_add_a_value:w._("Agrega un valor"),typeahead_placeholder_add_values:w._("Agrega valores")},ea={ViewRenderer:i,TokenRenderer:u,maxEntries:Infinity,useLayer:true},fa=n.createClass({displayName:"FalcorParameterRuleBuilder",propTypes:{allowCustomValue:ca.bool,getParameterDisplayValue:ca.func,loadParameterValues:ca.func,onChange:ca.func.isRequired,onDelete:ca.func,operatorConfig:ca.object,parameterSelectorLabel:ca.string,parameterRule:ca.object,parameters:ca.arrayOf(ca.object).isRequired},componentWillMount:function(){this._loadValues();var ga=this._getParameterOptionsFromProps(this.props),ha=new j(ga);this.setState({parameterSearchSource:ha});},_getParameterOptionsFromProps:function(ga){return ga.parameters.map(function(ha,ia){return {id:ia,name:ha.display_name||ha.parameter_name};});},componentWillReceiveProps:function(ga){if(ga.parameters!==this.props.parameters){var ha=this._getParameterOptionsFromProps(ga);this.state.parameterSearchSource.updateOptions(ha);}},componentDidUpdate:function(ga,ha){if(!this.props.parameterRule)return;if(!ga.parameterRule||ga.parameterRule.parameter_name!==this.props.parameterRule.parameter_name)this._loadValues();},getDefaultProps:function(){return {allowCustomValue:true,operatorConfig:m,parameterSelectorLabel:(w._("Select a Parameter"))};},getInitialState:function(){return {loadingValues:false,valueSearchQuery:'',valueSearchSource:new h([])};},render:function(){var ga=this._getParameterIndex();return (n.createElement(k,null,n.createElement(y,{className:"_3-90"},this._renderParameterSelector(ga)),n.createElement(y,{className:"_3-90"},this._renderOperatorSelector(ga)),this._renderValueInputColumn(ga),n.createElement(y,{className:((ga!==null?"_2piu":'')+(' '+"_2pik")+(' '+"_2pic"))},this._renderDeleteButton())));},_addParameterValue:function(ga){ga=ga.trim();if(!ga||this.props.parameterRule.values.indexOf(ga)>=0)return;var ha=x(this.props.parameterRule,{values:{$push:[ga]}});this.setState({valueSearchQuery:''});this.props.onChange(ha);},_getParameterIndex:function(){var ga=this.props.parameterRule,ha=this.props.parameters;if(!ga)return null;for(var ia=0;ia<ha.length;ia++)if(ha[ia].parameter_name===ga.parameter_name)return ia;return null;},_onChangeParameter:function(ga){n.findDOMNode(this.refs.parameterSelector).blur();var ha=ga.id,ia=this.props.parameters[ha],ja={parameter_name:ia.parameter_name,operator:this.props.operatorConfig.defaultValue,values:[]};this.props.onChange(ja);},_onChangeParameterOperator:function(ga){var ha=ga.value,ia={parameter_name:this.props.parameterRule.parameter_name,operator:ha,values:[]};this.props.onChange(ia);},_onTokenizerAddEntryAttempt:function(ga){this._addParameterValue(ga.getUniqueID());},_onTokenizerInputBlur:function(){if(!this.state.valueSearchQuery||!this.props.allowCustomValue)return;this._addParameterValue(this.state.valueSearchQuery);},_onTokenizerRemoveEntryAttempt:function(ga){var ha=this.props.parameterRule,ia=ha.values.indexOf(ga.getUniqueID());if(ia<0)return;var ja=x(this.props.parameterRule,{values:{$splice:[[ia,1]]}});this.props.onChange(ja);},_onTokenizerQueryStringChange:function(event){if(this.props.parameterRule.values.length>0&&!this.props.operatorConfig.isArray[this.props.parameterRule.operator])return;var ga=event.target.value;if(this.props.parameterRule.parameter_name===g.VALUE_TO_SUM&&ga.length>0&&!/^\d+\.?\d*$/.test(ga))return;this.setState({valueSearchQuery:ga});},_renderDeleteButton:function(){return this.props.onDelete?n.createElement(q,{href:"#",onClick:this.props.onDelete,size:"medium"}):null;},_renderParameterSelector:function(ga){var ha=this._getParameterOptionsFromProps(this.props),ia=ha[ga];return (n.createElement(o,{className:"_59xd",disabled:this.state.loadingValues,dropdownWidth:300,onSelect:this._onChangeParameter,placeholder:this.props.parameterSelectorLabel,ref:"parameterSelector",searchSource:this.state.parameterSearchSource,value:ia}));},_renderOperatorSelector:function(ga){if(ga===null)return null;return (n.createElement(r,{disabled:this.state.loadingValues,size:"large",onChange:this._onChangeParameterOperator,value:this.props.parameterRule?this.props.parameterRule.operator:this.props.operatorConfig.defaultValue},n.createElement(s,{className:"_29wt"}),this.props.operatorConfig.operators.map(function(ha){return n.createElement(aa,{key:ha.value,value:ha.value},ha.text);})));},_renderValueInputColumn:function(ga){if(ga===null)return null;if(this.state.loadingValues)return (n.createElement(y,null,n.createElement(l,{size:"medium",color:"white",className:"_29ww"})));var ha=this.props.parameterRule,ia=this.props.operatorConfig.isArray[ha.operator],ja=ia||ha.values.length===0,ka;if(this.state.valueSearchSource.isEmpty()){ka=ia?da.typeahead_placeholder_add_values:da.typeahead_placeholder_add_a_value;}else{var la=this.props.parameters[ga],ma=la.display_name||la.parameter_name;ka=w._("Escribe para buscar valores de {parameter type}...",[w.param("parameter type",ma)]);}var na=ha.values.map(function(oa){return new p({title:this.props.getParameterDisplayValue?this.props.getParameterDisplayValue(ha.parameter_name,oa):oa,uniqueID:oa});}.bind(this));return (n.createElement(z,null,n.createElement(t,{className:"_29wx",entries:na,onAddEntryAttempt:this._onTokenizerAddEntryAttempt,onInputBlur:this._onTokenizerInputBlur,onQueryStringChange:this._onTokenizerQueryStringChange,onRemoveEntryAttempt:this._onTokenizerRemoveEntryAttempt,placeholder:ka,presenter:ea,queryString:this.state.valueSearchQuery,searchSource:this.state.valueSearchSource,showEntriesOnFocus:ja})));},_loadValues:function(){var ga=this.props.parameterRule,ha=this.getInitialState(),ia=this.props.loadParameterValues&&!!ga;ha.loadingValues=ia;this.setState(ha);if(!ia)return;this.props.loadParameterValues(ga.parameter_name,function(ja){this.setState({loadingValues:false,valueSearchSource:new h(ja)});}.bind(this));}});e.exports=fa;},null);
__d("FalcorAppEventRuleBuilder",["FalcorAppEventSelector","BonsaiAppEventTypesUtils","FalcorParameterRuleBuilder","Link.react","List.react","React","XUISelector.react","XUISelectorButton.react","cx","fbt","update"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';var r=m.Option,s=l,t=s.PropTypes,u=1,v=l.createClass({displayName:"FalcorAppEventRuleBuilder",propTypes:{appID:t.string.isRequired,ruleName:t.string,eventRule:t.object,negateRule:t.bool,onChangeEventRule:t.func.isRequired,onChangeNegation:t.func,onChangeRuleName:t.func},getDefaultProps:function(){return {ruleName:'',negateRule:false};},componentWillMount:function(){this._paramKeys=this.props.eventRule&&this.props.eventRule.parameters?this.props.eventRule.parameters.map(function(w){return u++;}):[];},render:function(){var w=this.props.eventRule,x=!!(w&&w.event_name),y=x&&w.parameters.length>0,z=l.createElement(g,{className:"_59xd _3-91",onSelect:this._onChangeEvent,value:w?w.event_name:null}),aa=l.createElement(j,{className:"_59xf",onClick:this._onAddParameterRule},y?p._("Refine More"):p._("Refine"));return (l.createElement("div",{className:"_59x9"},l.createElement("div",null,this._renderNegationSeletor(),z),l.createElement("div",{className:"_3-8y _3-9b"},l.createElement("div",null,this._renderParameterForms()),l.createElement("div",{className:"_3-8-"},x?aa:null))));},_renderNegationSeletor:function(){return this.props.onChangeNegation?l.createElement(m,{className:"_3-91",onChange:this._onChangeNegation,size:"large",value:this.props.negateRule},l.createElement(n,{className:"_59xd"}),l.createElement(r,{value:false},"Include Event"),l.createElement(r,{value:true},"Exclude Event")):null;},_renderParameterForms:function(){var w=this.props.eventRule;if(!w||!w.event_name||!w.parameters.length)return null;var x=w.event_name,y=h.getAppEventParameters(x);return (l.createElement(k,{border:"none",spacing:"none"},w.parameters.map(function(z,aa){return l.createElement("li",{key:this._paramKeys[aa]||aa},aa>=1?l.createElement("div",null,"AND"):null,l.createElement(i,{getParameterDisplayValue:function(ba,ca){return h.getAppEventParameterKnownDisplayValue(x,ba,ca);},loadParameterValues:function(ba,ca){h.loadParameterValues(x,ba,ca);},onChange:function(ba){this._onChangeParameterRule(aa,ba);}.bind(this),onDelete:this._onDeleteParameterRule.bind(this,aa),parameterRule:z,parameters:y}));}.bind(this))));},_onChangeEvent:function(w){var x=w.id,y={application:this.props.appID,event_name:x,parameters:[]};this._paramKeys=[];this.props.onChangeEventRule(y);},_onChangeNegation:function(w){var x=w.value;this.props.onChangeNegation(x);},_onAddParameterRule:function(){this._paramKeys.push(u++);var w=q(this.props.eventRule,{parameters:{$push:[null]}});this.props.onChangeEventRule(w);},_onChangeParameterRule:function(w,x){var y=q(this.props.eventRule,{parameters:{$splice:[[w,1,x]]}});this.props.onChangeEventRule(y);},_onDeleteParameterRule:function(w){this._paramKeys.splice(w,1);var x=q(this.props.eventRule,{parameters:{$splice:[[w,1]]}});this.props.onChangeEventRule(x);}});e.exports=v;},null);
__d("FalcorAppEventRuleDataBuilder",["BonsaiAppEventTypesUtils","FalcorAppEventRuleBuilder","React","update"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i,l=k.PropTypes,m=i.createClass({displayName:"FalcorAppEventRuleDataBuilder",propTypes:{appID:l.string.isRequired,eventRuleData:l.object.isRequired,onChange:l.func.isRequired,requireRuleName:l.bool,requireNegationSelector:l.bool},getDefaultProps:function(){return {requireRuleName:false,requireNegationSelector:false};},render:function(){var n=this.props.eventRuleData,o=this.props.requireRuleName,p=this.props.requireNegationSelector;return (i.createElement(h,{appID:this.props.appID,ruleName:n.name,eventRule:n.event_rule,negateRule:n.negate_rule,onChangeEventRule:this._onChangeEventRule,onChangeNegation:p?this._onChangeNegation:null,onChangeRuleName:o?this._onChangeRuleName:null}));},_onChangeEventRule:function(n){var o=this.props.requireRuleName?g.getAppEventDisplayName(n.event_name):this.props.eventRuleData.name||'',p=j(this.props.eventRuleData,{name:{$set:o},event_rule:{$set:n}});this.props.onChange(p);},_onChangeNegation:function(n){var o=j(this.props.eventRuleData,{negate_rule:{$set:n}});this.props.onChange(o);},_onChangeRuleName:function(n){var o=j(this.props.eventRuleData,{name:{$set:n}});this.props.onChange(o);}});e.exports=m;},null);
__d("FunnelModel",["BonsaiAppEventTypesUtils","BonsaiSections","FalcorAppEventRuleDataUtils","fbt","intlList"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=1,m={isValid:function(){if(!(this.name&&this.name.trim()))return false;return i.isAppEventRuleDataListValid(this.funnel_stages_configs,h.FUNNELS);},getDescription:function(){return k(this.funnel_stages_configs.map(function(o){return g.getAppEventDisplayName(o.event_rule.event_name);}),k.CONJUNCTIONS.NONE);},getWireFormat:function(){var o=this.funnel_stages_configs;return {name:this.name,funnel_stages_configs:o};},nextKey:function(){return l++;}};function n(o){var p;if(!o){p=Object.assign({},m,{name:j._("User Flow"),funnel_stages_configs:[{name:'',event_rule:null}]});}else p=Object.assign({},m,o);p.uiKeys=p.funnel_stages_configs.map(function(q){return p.nextKey();});return p;}e.exports=n;},null);
__d("FunnelStore",["FunnelModel","InsightsEntityStore","InsightsGraphAPIConstants"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=null;function k(){if(!j)j=new h(i.FUNNEL_EDGE,i.FUNNEL_NODE,g);return j;}e.exports=k();},null);
__d("FalcorFeatureValidationMixin",["CohortStore","FalcorNotice","FunnelStore","React","SegmentStore","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m={_getFeatureFromProps:function(n){return n.cohort||n.funnel||n.segment;},componentWillReceiveProps:function(n){var o;if(n.cohorts){o=g;}else if(n.funnel){o=i;}else if(n.segment)o=k;var p=this._getFeatureFromProps(n);if(p.showValidationError&&p.isValid())o.updateEntityConfiguration({showValidationError:{$set:false}});},_renderErrorOnSave:function(n,o){var p=this._getFeatureFromProps(this.props);return p&&p.showValidationError?j.createElement(h,{className:"_3-98",noticeType:h.NoticeTypes.ERROR,message:n,subtext:o}):null;}};e.exports=m;},null);
__d("InsightsCohortsEditCardView",["BonsaiSections","CohortStore","FalcorAppEventRuleDataBuilder","FalcorAppEventRuleDataUtils","FalcorCard","FalcorFeatureValidationMixin","InsightsContext","InsightsEventLogger","React","XUITextInput.react","cx","fbt","invariant","update"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();'use strict';var u=o,v=u.PropTypes,w=r._("It looks like this event is incomplete."),x=r._("Please fix this event and try saving again."),y=o.createClass({displayName:"InsightsCohortsEditCardView",mixins:[l],propTypes:{appID:v.string.isRequired,cohort:v.object.isRequired},render:function(){var z=this.props.cohort,aa=this._getEventSection('first_event'),ba=this._getEventSection('followup_event');return (o.createElement("div",{className:"_4x6w"},this._getNoNameError(),o.createElement(k,null,o.createElement("div",null,r._("COHORT NAME")),o.createElement(p,{className:"_5hgx",height:"tall",onChange:this._onNameChange,value:z.name})),aa,ba));},_getNoNameError:function(){if(!this.props.cohort.name.trim())return this._renderErrorOnSave(r._("It looks like you forgot to enter a name for your cohort."),r._("Please enter a name and try saving again."));return null;},_getEventError:function(z){var aa=j.validateAppEventRuleData(this.props.cohort[z],g.COHORTS);if(aa)return this._renderErrorOnSave(w,x);return null;},_getEventSection:function(z){var aa=this.props.cohort[z],ba=this._getEventError(z),ca,da;switch(z){case 'first_event':ca=1;da=r._("Show People Who");break;case 'followup_event':ca=2;da=r._("And Then Later");break;default:s(false);}var ea=o.createElement("div",{className:"_3toq"},o.createElement("div",{className:"_3tor _3-91"},r._("{stepNum}",[r.param("stepNum",ca)])),o.createElement("span",{className:"_3tos"},da));return (o.createElement("div",null,ea,ba,o.createElement(k,{className:((!!ba?"_46be":'')),showLine:false},o.createElement(i,{appID:this.props.appID,eventRuleData:aa,onChange:this._onEventRuleChange.bind(this,z),requireNegationSelector:false,requireRuleName:false}))));},_onNameChange:function(event){var z=t(this.props.cohort,{name:{$set:event.target.value}});h.setEntityConfiguration(z);},_onDescriptionChange:function(z){var aa=t(this.props.cohort,{description:{$set:z}});h.setEntityConfiguration(aa);},_onChartTypeChange:function(z){var aa=t(this.props.cohort,{chart_type:{$set:z}});h.setEntityConfiguration(aa);},_onEventRuleChange:function(z,aa){var ba={};ba[z]={$set:aa};if(!this.props.cohort[z].event_rule||this.props.cohort[z].event_rule.event_name!==aa.event_rule.event_name)n.logEvent({_eventName:'cohorts_builder_change_rule',feature_id:m.getActiveInsightsCohortsID()?m.getActiveInsightsCohortsID():null,rule_type:z.toLowerCase(),rule_value:aa.event_rule.event_name});var ca=t(this.props.cohort,ba);h.setEntityConfiguration(ca);}});e.exports=y;},null);
__d("InsightsCohortsEditCardController",["InsightsCohortsEditCardView","React"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=h,j=i.PropTypes,k=h.createClass({displayName:"InsightsCohortsEditCardController",propTypes:{appID:j.string.isRequired,cohort:j.object},render:function(){return (h.createElement(g,{appID:this.props.appID,cohort:this.props.cohort}));}});e.exports=k;},null);
__d("FalcorEmptyFeatureCard",["BonsaiHelpText","FalcorCard","FalcorEmptyStates","Image.react","React","XUIButton.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=k,o=n.PropTypes,p=k.createClass({displayName:"FalcorEmptyFeatureCard",propTypes:{section:o.oneOf(Object.keys(i)).isRequired,variant:o.string},render:function(){var q=i.getEmptyState(this.props.section,this.props.variant),r=q.primaryButtonURI?k.createElement(l,{className:"_3ikm _3ikw _3-90",href:q.primaryButtonURI,label:q.primaryButtonText,use:"confirm",size:"xlarge"}):null,s=q.secondaryButtonURI?k.createElement(l,{className:"_3ikm",href:q.secondaryButtonURI,label:q.secondaryButtonText,size:"xlarge"}):null,t=q.image?k.createElement(j,{className:"_3ikj",src:q.image}):null;return (k.createElement(h,{className:"_3iki"},t,k.createElement("div",{className:"_335h"},k.createElement("div",{className:"_3ikk"},k.createElement(g,{helpKey:q.primaryTextCMSKey})),k.createElement("div",{className:"_3ikl"},k.createElement(g,{helpKey:q.secondaryTextCMSKey}))),r,s));}});e.exports=p;},null);
__d("FalcorPaginatedDataTable",["BonsaiContextualHelp","BonsaiErrorNotice","BonsaiPopoverMenu","BonsaiText","InsightsContext","React","ReactXUIMenu","XUISortableDataTable.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=m.Item,r=l,s=r.PropTypes,t=15,u=l.createClass({displayName:"FalcorPaginatedDataTable",propTypes:{columns:s.array.isRequired,columnToSortBy:s.string,helptext:s.string,searchFieldName:s.string,rows:s.array.isRequired,pageSize:s.number,onSort:s.func,pagination:s.bool,getExportValueFromCell:s.func},getDefaultProps:function(){return {pagination:true,pageSize:t};},getInitialState:function(){return {pageNumber:0};},_toNextPage:function(){this.setState({pageNumber:this.state.pageNumber+1});},_toPrevPage:function(){this.setState({pageNumber:this.state.pageNumber-1});},_onSort:function(v){this.setState({pageNumber:0});if(this.props.onSort)this.props.onSort(v);},_getFeaturesDropdown:function(){var v,w;v=[this._getExportLink(this.props.exportData,this.props.downloadFileName)];if(!k.isDevsite())v.push(this._getChartLink());w=l.createElement(m,null,v.map(function(x){return l.createElement(q,null,x);}));return l.createElement(i,{menu:w,buttonClass:"_3-99"});},onSearchChange:function(v){if(v&&v.target)this.setState({searchString:v.target.value,pageNumber:0});},render:function(){var v=this._getRows(),w=Math.ceil(v.length/this.props.pageSize),x=Math.min(w,this.state.pageNumber),y=this.props.pageSize===Infinity,z=(l.createElement(h,{className:"_3-8t _3-96",message:j.errors.no_data}));if(v&&v.length)z=l.createElement(n,{className:"_58_u",outerBorder:false,onSort:this._onSort,columns:this.props.columns,columnToSortBy:this.props.columnToSortBy,rows:v,viewStart:y?0:x*this.props.pageSize,viewLength:y?null:this.props.pageSize});var aa='';if(this.props.exportData)aa=this._getFeaturesDropdown();var ba=l.createElement("noscript",null);if(w>1&&this.props.pagination){var ca=p._("Viewing Page {page number} of {total pages}",[p.param("page number",x+1),p.param("total pages",w)]),da=p._("Anterior"),ea=p._("Siguiente");ba=l.createElement("span",null,ca,' ',"·",' ',x===0?l.createElement("span",{className:"fcg"},da):l.createElement("a",{href:"#",onClick:this._toPrevPage},da),' ',"·",' ',x===w-1?l.createElement("span",{className:"fcg"},ea):l.createElement("a",{href:"#",onClick:this._toNextPage},ea));}return (l.createElement("div",l.__spread({},this.props),ba,z,l.createElement("div",{className:"_5x4g"},this._getChartHelpText())));},_getChartHelpText:function(){if(this.props.helptext){return l.createElement(g,{helpKey:this.props.helptext});}else return null;},_getRows:function(){var v=this.props.rows;if(this.state.searchString){var w=this.state.searchString.toLocaleLowerCase();v=v.filter(function(x){if(!x||!x[this.props.searchFieldName])return false;var y=x[this.props.searchFieldName].toLocaleLowerCase();return y.indexOf(w)!=-1;}.bind(this));}return v;},getExportData:function(){var v=[];v.push(this.props.columns.map(function(x){return x.label;}).join(','));var w=this._getRows();w.forEach(function(x){return v.push(this.props.columns.map(function(y){var z=x[y.id];if(this.props.getExportValueFromCell){return this.props.getExportValueFromCell(z);}else return z;}.bind(this)).join(','));}.bind(this));return v.join('\n');}});e.exports=u;},null);
__d("FalcorObjectTable",["BonsaiSections","BonsaiUtils","FalcorCommonViews","FalcorPaginatedDataTable","Image.react","InsightsEventLogger","Link.react","React","Tooltip","cx","fbt","formatDate","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=n,u=t.PropTypes,v={header_name:q._("Nombre"),header_description:q._("Descripci\u00f3n"),header_last_seen:q._("Last Viewed"),header_last_updated:q._("\u00daltima actualizaci\u00f3n")};function w(z,aa){if(z){return aa?aa-z:-1;}else return aa?1:0;}function x(z){if(!z)return n.createElement("div",null);return (n.createElement("div",n.__spread({},o.propsFor(z.toLocaleString())),r(z,'M d, Y')));}var y=n.createClass({displayName:"FalcorObjectTable",propTypes:{appID:u.string.isRequired,data:u.array.isRequired,section:u.oneOf(s(g)).isRequired},render:function(){return (n.createElement(j,{columns:this._getColumns(),columnToSortBy:"time_last_seen",pageSize:25,ref:"dataTable",rows:this.props.data,searchFieldName:"name",onSort:this._onSort}));},onSearchChange:function(z){this.refs.dataTable.onSearchChange(z);},_getColumns:function(){return [{cellRenderer:function(z){var aa=h.getSectionInsightsURI(this.props.section,z.id,i.DETAILS);return (n.createElement(m,{href:aa,onClick:this._onViewDetailsClick.bind(this,z.id)},z.name));}.bind(this),comparator:function(z,aa){return z.name.localeCompare(aa.name);},id:'name_data',label:v.header_name,sortable:true,width:300},{id:'description',label:v.header_description,sortable:true},{cellRenderer:x,comparator:function(z,aa){return w(z.time_last_seen,aa.time_last_seen);},id:'time_last_seen',label:v.header_last_seen,sortable:true,width:100},{id:'id',cellRenderer:function(z){var aa=h.getSectionInsightsURI(this.props.section,z,i.EDIT);return (n.createElement("div",{className:"_52jv"},n.createElement(m,{href:aa,onClick:this._onEditClick.bind(this,z)},n.createElement(k,{src:"/images/icons/platform/analytics/Edit.png"}))));}.bind(this),sortable:false,width:20}];},_onEditClick:function(z){l.logEvent({_eventName:'object_table_link_click',action:'edit',feature_id:z,section:this.props.section.toLowerCase()});},_onSort:function(z){l.logEvent({_eventName:'object_table_sort',column:z,section:this.props.section.toLowerCase()});},_onViewDetailsClick:function(z){l.logEvent({_eventName:'object_table_link_click',action:'view_details',feature_id:z,section:this.props.section.toLowerCase()});}});e.exports=y;},null);
__d("FalcorFeatureTableCard",["BonsaiSections","FalcorCard","FalcorEmptyFeatureCard","FalcorObjectTable","InsightsGraphAPIConstants","InsightsLoadingIndicator.react","React","getObjectValues","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=m,q=p.PropTypes,r=m.createClass({displayName:"FalcorFeatureTableCard",propTypes:{appID:q.string.isRequired,data:q.array,section:q.oneOf(n(g)).isRequired,edge:q.oneOf(n(k)).isRequired},render:function(){return (m.createElement("div",null,this._getListCard()));},_getListCard:function(){var s=this.props.data;if(!s){return this._getLoadingState();}else if(s.length===0){return this._getEmptyState();}else if(s.length>0){return this._getLoadedState();}else o(false);},_getLoadingState:function(){return (m.createElement(l,null));},_getEmptyState:function(){return (m.createElement(i,{section:this.props.section}));},_getLoadedState:function(){return (m.createElement(h,{onSearchChange:function(s){this.refs.dataTable.onSearchChange(s);}.bind(this),showLine:false},m.createElement(j,{appID:this.props.appID,data:this.props.data,ref:"dataTable",section:this.props.section})));}});e.exports=r;},null);
__d("InsightsCohortsListCardController",["BonsaiSections","FalcorFeatureTableCard","InsightsEventLogger","InsightsGraphAPIConstants","React"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=k,m=l.PropTypes,n=k.createClass({displayName:"InsightsCohortsListCardController",propTypes:{appID:m.string.isRequired,cohortList:m.array},componentDidMount:function(){i.logCardView('cohorts_list',{});},render:function(){return (k.createElement(h,{appID:this.props.appID,data:this.props.cohortList,section:g.COHORTS,edge:j.COHORTS_EDGE}));}});e.exports=n;},null);
__d("FalcorAsyncTaskLoaderMixin",["AppEventsAsyncTaskStatus","BonsaiConfig","InsightsContext","InsightsEventLogger","InsightsGraphAPI","InsightsGraphAPIConstants","InsightsLoadingIndicator.react","ProgressBar.react","React","cx","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s={error_message_invalid_operation:q._("Can't load the object."),error_message_admin:q._("Para ver esta informaci\u00f3n debes ser un administrador de aplicaciones."),error_message_graph_error:q._("We're sorry, something went wrong. Refresh browser to try again.")},t={_startTime:null,getInitialState:function(){return this._getInitialStateForMixin();},_cancelAsyncTask:function(){if(this.state.timeoutID)clearTimeout(this.state.timeoutID);if(!this.isMounted())return;this.setState(this._getInitialStateForMixin());},_getInitialStateForMixin:function(){return {numAsyncCalls:0,timeoutID:null,mostRecentlyReportedSubstatus:null,progressData:null,operationTimedOut:false,asyncTaskID:null,errorMessage:null};},_operationTimedOut:function(u){this.setState({operationTimedOut:true,asyncTaskID:u});},_pollAsyncTaskData:function(u,v,w,x,y){var z=x===null,aa=h.falcorConstants.async_graph_call_max_num;w=w||{};if(!z&&this.state.numAsyncCalls>aa){this._operationTimedOut(x);return;}if(z){this.startTime=Date.now();var ba=i.getActiveSectionName().toLowerCase();j.logEvent({_eventName:ba+'_async_task_started',feature_id:v});}else w.async_task_id=x;k.objectGet(u,v,w).done(function(ca){if(!this.isMounted())return;r(ca.data.async_task_id);if(this.state.asyncTaskID&&this.state.asyncTaskID!==ca.data.async_task_id)return;if(ca.data.async_task_status!==g.COMPLETED){var da=z?h.falcorConstants.async_graph_call_initial_interval:h.falcorConstants.async_graph_call_secondary_interval,ea=setTimeout(this._pollAsyncTaskData.bind(this,u,v,w,ca.data.async_task_id,y),da),fa=z?0:this.state.numAsyncCalls+1,ga={numAsyncCalls:fa,timeoutID:ea};if(ca.data.async_task_status===g.PROGRESS_NOTICE){var ha=ca.data.async_task_substatus;if(ha!==this.state.mostRecentlyReportedSubstatus){ga.mostRecentlyReportedStatus=ha;ga.progressData=JSON.parse(ha);}}if(z)ga.asyncTaskID=ca.data.async_task_id;this.setState(ga);}else{var ia=i.getActiveSectionName().toLowerCase();j.logEvent({_eventName:ia+'_async_task_completed',feature_id:v,elapsed_time:Math.round((Date.now()-this.startTime)/1000)});y(ca.data,ca.id);}}.bind(this),function(ca){this._setErrorMessage(this._getErrorMessage(ca));}.bind(this));},loadAsyncTaskData:function(u,v,w,x){this._cancelAsyncTask();this._validateRequestAndLoadData(u,v,w,x);},loadAsyncTaskDataWithoutValidation:function(u,v,w,x){this._cancelAsyncTask();this._pollAsyncTaskData(u,v,w,null,x);},renderProgressOrTimeoutIndicator:function(){var u;if(this.state.operationTimedOut){u=o.createElement("span",null,q._("Operation timed out. Refresh browser to try again. Reference: {async id to report back}",[q.param("async id to report back",this.state.asyncTaskID)]));}else if(this.state.errorMessage){u=o.createElement("span",null,this.state.errorMessage);}else{var v=null,w=this.state.progressData;if(w){var x=w.description,y=100*w.step_number/w.total_steps,z=o.createElement(n,{className:"_5m-_ _3-8-",value:y});v=o.createElement("div",null,o.createElement("div",null,x),o.createElement("div",null,z));}u=o.createElement("div",null,o.createElement(m,null),v);}return (o.createElement("div",{className:"_3qb1"},u));},_getErrorMessage:function(u){switch(u.code){case 3003:return s.error_message_admin;default:return s.error_message_graph_error;}},_setErrorMessage:function(u){if(!this.isMounted())return;this.setState({errorMessage:u});},_validateRequestAndLoadData:function(u,v,w,x){var y=null;switch(u){case l.FUNNEL_NODE:y=l.FUNNEL_EDGE;break;case l.COHORTS_NODE:y=l.COHORTS_EDGE;break;case l.SEGMENT_NODE:y=l.SEGMENT_EDGE;break;case l.MOBILE_MEASUREMENT_NODE:y=l.MOBILE_MEASUREMENT_EDGE;break;default:this._setErrorMessage(s.error_message_invalid_operation);return;}var z=function(ba){if(ba.data.findIndex(function(ca){return ca.id===v;})>=0){this._pollAsyncTaskData(u,v,w,null,x);}else this._setErrorMessage(s.error_message_invalid_operation);}.bind(this),aa=function(ba){this._setErrorMessage(this._getErrorMessage(ba));}.bind(this);if(y===l.MOBILE_MEASUREMENT_EDGE){k.objectEdgeGet(u,i.getMMAppID(),y).done(z,aa);}else k.appEdgeGet(y).done(z,aa);}};e.exports=t;},null);
__d("FalcorSamplingVariance",["BonsaiTooltip","InsightsNumUtils","React","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k={calculateVariance:function(l,m){var n=m,o=l;return Math.round(.98*Math.sqrt((1/(o*n))-(1/o))*o);},renderVarianceTooltip:function(l,m){var n=this._getVarianceText(l,m,false);if(n===null)return null;return (i.createElement(g,{tooltip:n}));},getSamplingTooltipSentence:function(l){return l<=.99?j._("Based on a {sampling rate with \u0025} sampling rate.",[j.param("sampling rate with %",h.prettyPercent(l,1))]):null;},getVarianceSentence:function(l,m){return this._getVarianceText(l,m,true);},getVarianceTooltipSentence:function(l,m){return this._getVarianceText(l,m,false);},_getVarianceText:function(l,m,n){if(m>.99)return null;var o=k.calculateVariance(l,m),p;if(l>0){p=j._("{total count}+\/- {percent variance} ({absolute variance}) based on a {sampling rate} sampling rate.",[j.param("total count",n?h.prettyInt(l)+' users ':''),j.param("percent variance",h.prettyPercent(o/l,1)),j.param("absolute variance",h.prettyInt(o)),j.param("sampling rate",h.prettyPercent(m,1))]);}else p=j._("Empty population based on {sampling rate} sampling rate.",[j.param("sampling rate",h.prettyPercent(m,1))]);return p;}};e.exports=k;},null);
__d("FalcorSegmentSelector",["BonsaiSections","BonsaiUtils","FalcorCommonViews","Image.react","InsightsGraphAPI","InsightsGraphAPIConstants","React","XUISelector.react","XUISelectorButton.react","cx","fbt","update","xuiglyph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=n.Option,u=m,v=u.PropTypes,w="noneText",x="_createSegment",y=m.createClass({displayName:"FalcorSegmentSelector",propTypes:{noneText:v.string,onChange:v.func.isRequired,showTitle:v.bool,segmentID:v.string},getDefaultProps:function(){return {noneText:q._("Ninguna"),showTitle:true};},getInitialState:function(){return {isLoaded:false,segments:[],selectedSegmentIndex:w};},componentWillMount:function(){k.appEdgeGet(l.SEGMENT_EDGE).done(function(z){var aa=r(this.state.segments,{$push:z.data});if(this.isMounted())this.setState({isLoaded:true,segments:aa});if(this.props.segmentID){var ba=-1;aa.forEach(function(ca,da){if(ca.id===this.props.segmentID)ba=da;}.bind(this));if(ba!==-1)this.setState({selectedSegmentIndex:ba});}}.bind(this));},render:function(){var z=this.state.segments.map(function(ba,ca){return m.createElement(t,{key:ba.id,value:ca},ba.name);});z.unshift(m.createElement(t,{key:w,value:w},this.props[w]));z.push(m.createElement(t,{key:x,value:x},q._("Create new segment...")));var aa=this.props.showTitle?m.createElement("span",{className:"_2pii"},q._("SEGMENT")):null;return (m.createElement("span",null,aa,m.createElement(n,{disabled:!this.state.isLoaded,onChange:this._onChange,value:this.state.selectedSegmentIndex},m.createElement(o,{className:"_11fy",chevron:m.createElement(j,{src:s({name:'triangle-down',shade:'white',size:'small'})})}),z)));},_onChange:function(z){if(z.value===x){h.getSectionInsightsURI(g.SEGMENTS,null,i.CREATE).go();}else{this.setState({selectedSegmentIndex:z.value});this.props.onChange(this.state.segments[z.value]);}}});e.exports=y;},null);
__d("FalcorSelector",["Image.react","React","Tooltip","XUISelector.react","XUISelectorButton.react","cx","xuiglyph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=j.Option,o=h,p=o.PropTypes,q=h.createClass({displayName:"FalcorSelector",propTypes:{selectorLabel:p.string,value:p.string.isRequired,isDisabled:p.bool,onChange:p.func.isRequired,options:p.arrayOf(p.shape({isDisabled:p.bool,text:p.string.isRequired,tooltip:p.string,value:p.string.isRequired,className:p.string})).isRequired,borderless:p.bool,placeholder:p.shape({text:p.string.isRequired,value:p.string.isRequired})},render:function(){var r=this.props.options.map(function(u){return h.createElement(n,h.__spread({},i.propsFor(!!u.isDisabled?u.tooltip:null),{disabled:!!u.isDisabled,value:u.value,key:u.value,className:u.className}),u.text);});if(this.props.placeholder)r.unshift(h.createElement(n,{className:"hidden_elem",value:this.props.placeholder.value,key:this.props.placeholder.value},this.props.placeholder.text));var s=this.props.selectorLabel?null:this.props.className,t=h.createElement(j,{className:s,disabled:!!this.props.isDisabled,onChange:this.props.onChange,value:this.props.value},h.createElement(k,{className:(("_11fy")+(this.props.borderless?' '+"_3qw5":'')),chevron:h.createElement(g,{src:m({name:'triangle-down',shade:'white',size:'small'})})}),r);if(this.props.selectorLabel)t=h.createElement("span",{className:this.props.className},h.createElement("span",{className:"_2pii"},this.props.selectorLabel),t);return t;}});e.exports=q;},null);
__d("InsightsCohortsData",["AppEventsCohortsChartType","AppEventsCohortsCollationInterval","FBDate","fbt","invariant","Timezone"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=b('Timezone'),m=l.PST8PDT;function n(o,p,q,r,s,t,u,v,w,x,y){this.$InsightsCohortsData0=this.$InsightsCohortsData1(o);this.$InsightsCohortsData2={};this.$InsightsCohortsData3={};this.$InsightsCohortsData4=p;this.$InsightsCohortsData5=q,this.$InsightsCohortsData6=r,this.$InsightsCohortsData7=s;this.$InsightsCohortsData8=t;this.$InsightsCohortsData9=u;this.$InsightsCohortsDataa=v;this.$InsightsCohortsDatab=w;this.$InsightsCohortsDatac=x;this.$InsightsCohortsDatad=y;}n.prototype.getUserRetentionData=function(o){var p=this.$InsightsCohortsDatae('eventUniques',0);p.exportData=this.$InsightsCohortsDataf(o,p);return p;};n.prototype.getValueRetentionData=function(o){var p=this.$InsightsCohortsDatae('eventValue',2);p.exportData=this.$InsightsCohortsDataf(o,p,['First Event Value'],function(q){return q[0].firstEventCount;});return p;};n.prototype.getCumulativeValueData=function(o){var p=this.$InsightsCohortsDatag('eventValue',2);p.exportData=this.$InsightsCohortsDataf(o,p);return p;};n.prototype.getCumulativeCountData=function(o){var p=this.$InsightsCohortsDatag('eventCount',2);p.exportData=this.$InsightsCohortsDataf(o,p);return p;};n.prototype.getAllowedChartTypes=function(){return this.$InsightsCohortsDatah;};n.prototype.getSamplingRate=function(){return this.$InsightsCohortsData4;};n.prototype.getFirstEventUniquesCount=function(){return this.$InsightsCohortsData5;};n.prototype.getFollowupEventUniquesCount=function(){return this.$InsightsCohortsData6;};n.prototype.getPartition=function(){return this.$InsightsCohortsData7;};n.prototype.getReadDuration=function(){return this.$InsightsCohortsData8;};n.prototype.getOverallDuration=function(){return this.$InsightsCohortsData9;};n.prototype.getAsyncTaskId=function(){return this.$InsightsCohortsDataa;};n.prototype.getIsUSDValues=function(){return !!this.$InsightsCohortsDatai;};n.prototype.getWarningMessage=function(){return this.$InsightsCohortsDatab;};n.prototype.$InsightsCohortsDatae=function(o,p){if(this.$InsightsCohortsData2[o])return this.$InsightsCohortsData2[o];var q=[];for(var r=0;r<this.$InsightsCohortsData0.length;++r){var s=this.$InsightsCohortsData0[r][o],t=this.$InsightsCohortsData0[r].followupEventData,u=[];for(var v=0;v<t.length;++v){var w={cohortLabel:this.$InsightsCohortsData0[r].firstEventTimestamp,exportData:t[v][o].toFixed(p),intervalsAfter:t[v].intervalsAfter,firstEventCount:s,followupEventCount:t[v][o],uniqueUsers:this.$InsightsCohortsData0[r].eventUniques};if(w.firstEventCount>0){w.value=(w.followupEventCount*100)/w.firstEventCount;}else w.value=0;u.push(w);}q.push(u);}this.$InsightsCohortsData2[o]=this.$InsightsCohortsDataj(q);return this.$InsightsCohortsData2[o];};n.prototype.$InsightsCohortsDatag=function(o,p){if(this.$InsightsCohortsData3[o])return this.$InsightsCohortsData3[o];var q=[];for(var r=0;r<this.$InsightsCohortsData0.length;++r){var s=this.$InsightsCohortsData0[r].followupEventData,t=[],u=0;for(var v=0;v<s.length;++v){var w=u;if(this.$InsightsCohortsData0[r].eventUniques>0)w+=(s[v][o]/this.$InsightsCohortsData0[r].eventUniques);var x={cohortLabel:this.$InsightsCohortsData0[r].firstEventTimestamp,exportData:w.toFixed(p),firstEventCount:this.$InsightsCohortsData0[r].eventUniques,followupEventCount:s[v][o],intervalsAfter:s[v].intervalsAfter,uniqueUsers:this.$InsightsCohortsData0[r].eventUniques,value:w};u=x.value;t.push(x);}q.push(t);}this.$InsightsCohortsData3[o]=this.$InsightsCohortsDataj(q);return this.$InsightsCohortsData3[o];};n.prototype.$InsightsCohortsData1=function(o){var p=[],q={},r=Object.keys(o),s=false,t=false,u=false;for(var v=0;v<r.length;++v){var w=o[r[v]],x=w.first_event,y=w.followup_event,z=y.map(function(event,aa){t=t||event.value_sum>0;u=u||event.usd_sum>0;return {intervalsAfter:aa,eventCount:event.count,eventValue:event.usd_sum||event.value_sum,eventUniques:event.uniques};});q={firstEventTimestamp:x.timestamp,eventCount:x.count,eventValue:x.usd_sum||x.value_sum,eventUniques:x.uniques,followupEventData:z};s=s||x.value_sum>0;p.push(q);}this.$InsightsCohortsDatah=[g.USER_RETENTION,g.CUMULATIVE_EVENTS];if(t){this.$InsightsCohortsDatah.push(g.LIFETIME_VALUE);if(s)this.$InsightsCohortsDatah.push(g.VALUE_RETENTION);}if(u)this.$InsightsCohortsDatai=true;return p;};n.prototype.$InsightsCohortsDatak=function(o){var p=[];for(var q=0;q<o;++q)p.push(q);return p;};n.prototype.$InsightsCohortsDatal=function(o){var p=[j._("Promedio")];for(var q=0;q<o.length;++q)p.push(this.$InsightsCohortsDatam(o[q][0].cohortLabel,q<o.length-1?o[q+1][0].cohortLabel:this.$InsightsCohortsDatac+1));return p;};n.prototype.$InsightsCohortsDatam=function(o,p){var q=new i(o*1000,m),r=new i((p-2*60*60)*1000,m);switch(this.$InsightsCohortsDatad){case h.DAILY:return q.format('M j');case h.WEEKLY:if(q.getMonth()!=r.getMonth()){return (j._("{Date range start} - {Date range end}",[j.param("Date range start",q.format('M j')),j.param("Date range end",r.format('M j'))]));}else return (j._("{Date range start} - {Date range end}",[j.param("Date range start",q.format('M j')),j.param("Date range end",r.format('j'))]));break;case h.MONTHLY:return (j._("{Date range start} - {Date range end}",[j.param("Date range start",q.format('M j')),j.param("Date range end",r.format('j'))]));default:k(false);return '';}};n.prototype.$InsightsCohortsDatan=function(o){var p=[],q=0,r=Number.MAX_VALUE,s=Number.MIN_VALUE,t=Number.MAX_VALUE,u=Number.MIN_VALUE,v=0,w=0,x=0;o.forEach(function(ba){ba.forEach(function(ca){var da=p[ca.intervalsAfter]||{elements:0,valueSum:0};da.valueSum+=(ca.value*ca.firstEventCount);da.elements+=ca.firstEventCount;p[ca.intervalsAfter]=da;if(r>ca.value){t=r;r=ca.value;}else if(t>ca.value&&ca.value!=r)t=ca.value;if(s<ca.value){u=s;s=ca.value;}else if(u<ca.value&&ca.value!=s)u=ca.value;v+=ca.value;w+=(ca.value*ca.value);x++;});q+=ba[0].uniqueUsers;});q/=o.length;var y=[];p.forEach(function(ba,ca){y.push({intervalsAfter:ca,uniqueUsers:q,value:ba.elements>0?ba.valueSum/ba.elements:0});});var z=Math.sqrt((x*w)-(v*v))/x,aa=v/x;t=(t===Number.MAX_VALUE)?r:t;u=(u===Number.MIN_VALUE)?s:u;return {average:y,mean:aa,range:{min:t,max:u},standardDeviation:z};};n.prototype.$InsightsCohortsDataj=function(o){var p=this.$InsightsCohortsDatal(o),q=this.$InsightsCohortsDatak(o[0].length),r=this.$InsightsCohortsDatan(o);return {average:r.average,colLabels:q,isUSDValues:this.getIsUSDValues(),mean:r.mean,range:r.range,retentionTable:o,rowLabels:p,samplingRate:this.getSamplingRate(),standardDeviation:r.standardDeviation};};n.prototype.$InsightsCohortsDatao=function(o,p){var q=p.retentionTable[0][0].cohortLabel,r=this.$InsightsCohortsDatac,s=new i(q*1000,m),t=new i((r-2*60*60)*1000,m);return [o,this.$InsightsCohortsDatad,s.format('Y-m-d'),t.format('Y-m-d')].join('_')+'.csv';};n.prototype.$InsightsCohortsDatap=function(o,p){return (['Date','Cohort Size',o?o.join(','):null,p.join(',')].filter(function(q){return q!==null;}).join(','));};n.prototype.$InsightsCohortsDataf=function(o,p,q,r){var s=[];s.push(this.$InsightsCohortsDatap(q,p.colLabels));var t=p.retentionTable,u=p.rowLabels;for(var v=0;v<t.length;++v){var w=t[v],x=w.map(function(z){return z.exportData;}).join(',');x=[u[v+1],w[0].uniqueUsers,r?r(w):null,x].filter(function(z){return z!==null;}).join(',');s.push(x);}var y={data:s.join('\n'),fileName:this.$InsightsCohortsDatao(o,p)};return y;};e.exports=n;},null);
__d("InsightsCohortsDataShape",["AppEventsCohortsCollationInterval","React"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=h,j=i.PropTypes,k=j.shape({average:j.array.isRequired,colLabels:j.arrayOf(j.number).isRequired,collationInterval:j.oneOf(Object.keys(g)),isUSDValues:j.bool.isRequired,mean:j.number.isRequired,range:j.shape({min:j.number.isRequired,max:j.number.isRequired}).isRequired,retentionTable:j.array.isRequired,rowLabels:j.arrayOf(j.string).isRequired,samplingRate:j.number.isRequired,standardDeviation:j.number.isRequired});e.exports=k;},null);
__d("FalcorDataTooltipTheme",["cx"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={wrapperClassName:"_1xyi",arrowDimensions:{offset:20,length:18}};e.exports=h;},null);
__d("FalcorDataTooltip",["FalcorDataTooltipTheme","HasLayerContextMixin","React","ReactAbstractContextualDialog","ReactLayer","XUIContextualDialogBody.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=i,o=n.PropTypes,p=k.createClass(j.createSpec({displayName:'FalcorDataTooltip',theme:g})),q=i.createClass({displayName:"FalcorDataTooltip",mixins:[h],propTypes:Object.assign({},j.propTypes,{indicatorColor:o.string}),getDefaultProps:function(){return {position:'right'};},render:function(){var r=this.props.indicatorColor?'10px solid '+this.props.indicatorColor:'0px',s;switch(this.props.position){case 'above':s={borderBottom:r};break;case 'below':s={borderTop:r};break;case 'left':s={borderRight:r};break;case 'right':s={borderLeft:r};break;default:s={};}return (i.createElement(p,i.__spread({},this.props,{position:this.props.position,context:this.getContextNode()}),i.createElement("div",{className:"_3k-y"},i.createElement("div",{className:"_3k-z",style:{background:this.props.indicatorColor}})),i.createElement("div",{className:"_53iv",style:s},i.createElement(l,null,this.props.children))));},statics:{getCohortDataTooltip:function(r,s,t){var u=t?i.createElement("div",{className:"_3k-- _3-8z"},t):null;return (i.createElement("div",null,i.createElement("div",{className:"_3k-_"},r),i.createElement("div",{className:"_3k_0"},s),u));},getFunnelDataTooltip:function(r,s,t){var u=t?i.createElement("div",{className:"_3k-- _3-8z"},t):null;return (i.createElement("div",null,i.createElement("div",{className:"_3k-_"},r),i.createElement("div",{className:"_3k_0"},s),u));}}});e.exports=q;},null);
__d("FalcorDataTooltipMixin",["FalcorDataTooltip","React","ReactLayeredComponentMixin"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j={_timeoutRef:null,mixins:[i],getInitialState:function(){return this._getFalcorDataTooltipMixinInitialState();},renderLayers:function(){var k=this.state.getTooltipContentFunction?this.state.getTooltipContentFunction():null;return {funnelTooltip:h.createElement(g,{contextRef:function(){return this.refs[this.state.tooltipRef];}.bind(this),indicatorColor:this.state.indicatorColor,shown:this.state.tooltipRef!==null},k)};},onHideTooltip:function(){this.setState(this._getFalcorDataTooltipMixinInitialState());},onHideTooltipWithDelay:function(){clearTimeout(this._timeoutRef);this._timeoutRef=setTimeout(this.onHideTooltip,400);},onShowTooltip:function(k,l,m){clearTimeout(this._timeoutRef);this.setState({getTooltipContentFunction:l,indicatorColor:m,tooltipRef:k});},_getFalcorDataTooltipMixinInitialState:function(){return {getTooltipContentFunction:null,indicatorColor:null,tooltipRef:null};}};e.exports=j;},null);
__d("InsightsCohortsUtils",["AppEventsCohortsChartType","AppEventsCohortsCollationInterval","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k={getDisplayStringForCollationInterval:function(l){switch(l){case h.DAILY:return i._("Por d\u00eda");case h.WEEKLY:return i._("Cada semana");case h.MONTHLY:return i._("Cada mes");default:j(false);return '';}},getGraphLabelForCollationInterval:function(l){switch(l){case h.DAILY:return i._("Days after Initial Event");case h.WEEKLY:return i._("Weeks after Initial Event");case h.MONTHLY:return i._("Months after Initial Event");default:j(false);return '';}},getTooltipForCollationInterval:function(l){switch(l){case h.DAILY:return i._("Daily is available if the selected range is less than 31 days");case h.WEEKLY:return i._("Weekly is available if the selected range is greater than 8 days");case h.MONTHLY:return i._("Monthly is available if the selected range is greater than 30 days");default:j(false);return '';}},getDisplayStringForChartType:function(l){switch(l){case g.USER_RETENTION:return i._("Retenci\u00f3n de usuarios");case g.CUMULATIVE_EVENTS:return i._("Cumulative Events");case g.LIFETIME_VALUE:return i._("Valores acumulados");case g.VALUE_RETENTION:return i._("Value Retention");default:j(false);return '';}},getGraphLabelForChartType:function(l){switch(l){case g.USER_RETENTION:return i._("Percent of Users");case g.CUMULATIVE_EVENTS:return i._("Total de eventos por usuario");case g.LIFETIME_VALUE:return i._("Cumulative Value Per User");case g.VALUE_RETENTION:return i._("Percent of Value Retained");default:j(false);return '';}},getTooltipForChartType:function(l){switch(l){case g.USER_RETENTION:return null;case g.CUMULATIVE_EVENTS:return null;case g.LIFETIME_VALUE:return i._("Cumulative Values is available if the followup event has values");case g.VALUE_RETENTION:return i._("Value Retention is available if the first and followup event have values");default:j(false);return '';}}};e.exports=k;},null);
__d("InsightsCohortsTableView",["AppEventsCohortsChartType","AppEventsCohortsCollationInterval","FalcorDataTooltip","FalcorDataTooltipMixin","InsightsCohortsDataShape","InsightsCohortsUtils","InsightsNumUtils","Link.react","React","cx","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=o,t=s.PropTypes,u='#FFFFFF',v='#12293F',w=['#EFF5FA','#DFEBF6','#D0E2F1','#B0CEE8','#81B0DA','#619DD1','#3A84C5','#3274AE','#295F8E','#204A6F','#17344F'],x='#FFFFFF',y='#666E7C',z=2,aa=o.createClass({displayName:"InsightsCohortsTableView",propTypes:{chartType:t.string.isRequired,cohortData:k.isRequired,collationInterval:t.string.isRequired,displayCohorts:t.arrayOf(t.number),onRowSelect:t.func,onRowDeselect:t.func},render:function(){return (o.createElement("div",{className:"_2je1"},o.createElement("div",{className:"_2je2"},o.createElement("table",{className:"_2je3"},o.createElement("tbody",null,this._generateTableHeaderColumn()))),o.createElement("div",{className:"_2je4"},o.createElement("table",{className:"_2je3"},o.createElement("tbody",null,this._generateTableBody())))));},_generateTableHeaderColumn:function(){var ca=this.props.cohortData.rowLabels,da=[o.createElement("tr",{key:"_firstRow"},o.createElement("th",{key:"_firstRow"},o.createElement("div",{className:"_2je5 _2je6"},q._("{collationInterval} Cohorts",[q.param("collationInterval",l.getDisplayStringForCollationInterval(this.props.collationInterval))]))))],ea=this.props.cohortData.retentionTable;da=da.concat(ca.map(function(fa,ga){if(ga===0){return (o.createElement("tr",{key:ga},this._generateRowHeader(fa,ga,this.props.cohortData.average[0])));}else return (o.createElement("tr",{key:ga},this._generateRowHeader(fa,ga,ea[ga-1][0])));}.bind(this)));return da;},_generateTableHeaderRow:function(){var ca=this.props.cohortData.colLabels,da=ca.map(function(ea,fa){return (o.createElement("th",{key:fa},o.createElement("div",{className:"_2je7"},ea)));});return o.createElement("tr",{key:"_headerRow"},da);},_generateAverageRow:function(){var ca=this.props.cohortData.average,da=ca.map(function(ea,fa){return (o.createElement("td",{key:fa},o.createElement("div",{className:"_2je8"},this._generateCellText(ea))));}.bind(this));return o.createElement("tr",{key:"_averageRow"},da);},_generateTableBody:function(){var ca=this.props.cohortData.retentionTable,da=[],ea=this.props.cohortData.range.min,fa=this.props.cohortData.range.max,ga=this.props.cohortData.mean,ha=this.props.cohortData.standardDeviation,ia=Math.max(ea,ga-(3*ha)),ja=Math.min(fa,ga+(3*ha));ia=parseFloat(ia.toFixed(2));ja=parseFloat(ja.toFixed(2));var ka=-1;da.push(this._generateTableHeaderRow());da.push(this._generateAverageRow());for(var la=0;la<ca.length;++la){var ma=[],na=ca[la];for(var oa=0;oa<na.length;++oa){var pa=this._getCellColor(na[oa].value,ia,ja),qa={backgroundColor:pa.backgroundColor,color:pa.color,textAlign:'center'};ma.push(o.createElement(ba,{cellRef:la+' '+oa,getTooltip:this._getTooltip.bind(this,na[oa]),key:oa,style:qa},this._generateCellText(na[oa])));}if(ka<na.length)ka=na.length;da.push(o.createElement("tr",{key:la},ma));}return da;},_getCellColor:function(ca,da,ea){if(ca<da){return {backgroundColor:u,color:y};}else if(ca>ea)return {backgroundColor:v,color:x};var fa=(ea-da)/w.length,ga=Math.round((ca-da)/fa);return {backgroundColor:ga>=w.length?w[w.length-1]:w[ga],color:ga>=(w.length-1)/2?x:y};},_generateRowHeader:function(ca,da,ea){var fa=this.props.displayCohorts.indexOf(da)!=-1,ga=null,ha=null;if(fa){ga="_2je9";ha=this._onRowDeselect.bind(this,da);}else{ga="_2jea";ha=this._onRowSelect.bind(this,da);}return (o.createElement("th",{key:da,className:"_5l3"},o.createElement("div",{className:"_2je6"},o.createElement("div",null,o.createElement(n,{className:ga,onClick:ha},ca)),o.createElement("div",{className:"_2jeb"},this._getRowHeaderSubtitle(ea)))));},_getTooltip:function(ca){var da=q._("{Collation Interval unit} {Interval number after first event}",[q.param("Collation Interval unit",this._getCollationIntervalString()),q.param("Interval number after first event",ca.intervalsAfter)]),ea=this.props.cohortData.samplingRate,fa=ea<=.99?q._("Based on a {sampling rate with \u0025} sampling rate.",[q.param("sampling rate with %",m.prettyPercent(ea,1))]):null,ga,ha;switch(this.props.chartType){case g.USER_RETENTION:ga=q._("{Number of Users in follow up event} of {Number of Users in first event} Users ({Percentage of Users})",[q.param("Number of Users in follow up event",m.prettyInt(ca.followupEventCount)),q.param("Number of Users in first event",m.prettyShortInt(ca.firstEventCount)),q.param("Percentage of Users",m.prettyPercent(ca.value/100,z))]);break;case g.CUMULATIVE_EVENTS:ha=ca.value*ca.uniqueUsers;ga=q._("{Number of events per user} events per user ({Total number of events} in total)",[q.param("Number of events per user",ca.value.toFixed(z)),q.param("Total number of events",m.prettyShortInt(ha))]);break;case g.LIFETIME_VALUE:ha=ca.value*ca.uniqueUsers;ga=q._("{Value of event per user} per user ({total value} in total)",[q.param("Value of event per user",this.props.cohortData.isUSDValues?this._formatCurrencyValueForTooltip(ca.value):ca.value.toFixed(z)),q.param("total value",this.props.cohortData.isUSDValues?this._formatCurrencyValueForTooltip(ha):ca.value.toFixed(z))]);break;case g.VALUE_RETENTION:ga=q._("{Retained value} of {Total value for first event} ({Percentage of values})",[q.param("Retained value",this.props.cohortData.isUSDValues?this._formatCurrencyValueForTooltip(ca.followupEventCount):ca.followupEventCount.toFixed(z)),q.param("Total value for first event",this.props.cohortData.isUSDValues?this._formatCurrencyValueForTooltip(ca.firstEventCount):ca.firstEventCount.toFixed(z)),q.param("Percentage of values",m.prettyPercent(ca.value/100,z))]);break;default:r(false);}return i.getCohortDataTooltip(ga,da,fa);},_formatCurrencyValueForTooltip:function(ca){if(ca<1000){return m.prettyCurrency('USD',ca);}else return m.prettyShortCurrency('USD',ca);},_getCollationIntervalString:function(){switch(this.props.collationInterval){case h.DAILY:return q._("D\u00eda");case h.WEEKLY:return q._("Semanal");case h.MONTHLY:return q._("Mensual");default:r(false);return '';}},_getUniqueUserString:function(ca){return (q._("{Number of unique users} unique users",[q.param("Number of unique users",m.prettyInt(ca.uniqueUsers))]));},_getRowHeaderSubtitle:function(ca){return (q._("{Unique Users value} Users",[q.param("Unique Users value",m.prettyShortInt(ca.uniqueUsers))]));},_generateCellText:function(ca){var da=ca.value>=1?1:2;switch(this.props.chartType){case g.USER_RETENTION:da=ca.value>=10?0:da;return m.prettyPercent(ca.value/100,da);case g.CUMULATIVE_EVENTS:return m.prettyFloat(parseFloat(ca.value.toFixed(da)));case g.LIFETIME_VALUE:if(this.props.cohortData.isUSDValues){return m.prettyShortCurrency('USD',ca.value);}else if(ca.value>100){return m.prettyShortInt(ca.value);}else return m.prettyFloat(parseFloat(ca.value.toFixed(da)));break;case g.VALUE_RETENTION:da=ca.value>=10?0:da;return m.prettyPercent(ca.value/100,da);default:r(false);}},_onRowSelect:function(ca){this.props.onRowSelect(ca);},_onRowDeselect:function(ca){this.props.onRowDeselect(ca);}}),ba=o.createClass({displayName:"InsightsCohortsTableCell",mixins:[j],propTypes:{cellRef:t.string.isRequired,getTooltip:t.func.isRequired,style:t.object},render:function(){return (o.createElement("td",o.__spread({},this.props,{onMouseEnter:this.onShowTooltip.bind(this,this.props.cellRef,this.props.getTooltip,null),onMouseLeave:this.onHideTooltip,ref:this.props.cellRef}),this.props.children));}});e.exports=aa;},null);
__d("InsightsCohortsAverageChartView",["BonsaiColors","SpectrumChart","AppEventsCohortsChartType","AppEventsCohortsCollationInterval","SpectrumCurrencyScale","FalcorCard","FlexibleBlock.react","InsightsCohortsDataShape","InsightsCohortsTableView","InsightsCohortsUtils","InsightsEventLogger","InsightsLegendCheckboxKey.react","InsightsLegendScrollableVert.react","SpectrumLines","d3/scale/ordinal","SpectrumPercentageScale","React","Tooltip","SpectrumTooltipData","SpectrumTooltipMenu","SpectrumXAxis","SpectrumYAxis","cx","fbt","invariant","update"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){b.__markCompiled&&b.__markCompiled();'use strict';var ga=w,ha=ga.PropTypes,ia=['#135680','#A817BD','#178013','#A7E0FD','#E8ED00','#FF4EDF','#1784BD','#3DBD17','#4EBDFF','#4EFF89'],ja=w.createClass({displayName:"InsightsCohortsAverageChartView",propTypes:{chartType:ha.string.isRequired,cohortData:n.isRequired,collationInterval:ha.string.isRequired,title:ha.string.isRequired,helptext:ha.element},getInitialState:function(){return {displayCohorts:this._getDisplayCohorts(this.props.cohortData)};},componentWillReceiveProps:function(ka){if(this.props.cohortData!=ka.cohortData){var la=this._getDisplayCohorts(ka.cohortData);this.setState({displayCohorts:la});}},render:function(){return (w.createElement("div",null,w.createElement(l,{helpText:{key:'CohortsCardInfo',title:this.props.title,extra:this.props.helptext},title:this.props.title,getExportData:this._exportData},this._renderChart()),this._renderTable()));},_renderChart:function(){var ka=[],la=[],ma=[],na=-1;this.state.displayCohorts.forEach(function(pa){if(pa.checked){var qa=this._getChartData(pa);ka.push(qa);la.push(pa.color);if(na<qa.length)na=qa.length;}var ra=this.props.cohortData.rowLabels[pa.index];ma.push({legend:ra,checked:pa.checked,color:pa.color,disabled:pa.disabled});}.bind(this));var oa=this.props.cohortData.colLabels.slice(0,na);return (w.createElement(m,{flex:"right"},w.createElement("div",null,w.createElement("div",{className:"_38wy"},p.getGraphLabelForChartType(this.props.chartType)),w.createElement(h,{scaleX:u().domain(oa),scaleY:this._getScaleY(),width:748,height:320,theme:this._getTheme(la)},w.createElement(t,{data:ka,valueY:this._getValueY()}),w.createElement(aa,null),w.createElement(ba,null),w.createElement(z,{customFormat:this._getChartTooltip})),w.createElement("div",{className:"_38wz"},p.getGraphLabelForCollationInterval(this.props.collationInterval))),this._renderLegend(ma)));},_renderLegend:function(ka){var la=da._("You can only select up to {Number of selectable rows} rows",[da.param("Number of selectable rows",this._getMaxSelectableRows())]),ma=ka.map(function(na,oa){return w.createElement("div",w.__spread({key:oa},x.propsFor(na.disabled?la:null)),w.createElement(r,{key:"legend_"+oa,color:na.color||g.GRAY10,checked:na.checked,disabled:na.disabled,onChange:this._onChangeCohortDisplay.bind(this,oa),className:"_7l7"},w.createElement("label",{className:"_7l6"},na.legend)));}.bind(this));return (w.createElement("div",{className:"_4ygo"},this._renderLegendHeader(),w.createElement(s,{height:300,width:140},ma)));},_renderLegendHeader:function(){var ka=p.getDisplayStringForCollationInterval(this.props.collationInterval);return (w.createElement("div",{className:"_4ygp"},da._("COHORTS ( {collationInterval} )",[da.param("collationInterval",ka)])));},_renderTable:function(){return (w.createElement(l,null,w.createElement(o,{chartType:this.props.chartType,cohortData:this.props.cohortData,collationInterval:this.props.collationInterval,displayCohorts:this.state.displayCohorts.filter(function(ka){return ka.checked&&ka.index>=0;}).map(function(ka){return ka.index;}),onRowSelect:this._onAddCohortDisplay,onRowDeselect:this._onRemoveCohortDisplay})));},_getMaxSelectableRows:function(){return ia.length;},_getTheme:function(ka){return {lines:{colors:ka,markers:false}};},_getChartData:function(ka){var la=null;if(ka.index===0){la=this.props.cohortData[ka.cohortDataKey];}else la=this.props.cohortData.retentionTable[ka.index-1];la=la.map(function(ma){return ma.value;});return la;},_onChangeCohortDisplay:function(ka,la){var ma={};ma[ka]={$merge:{checked:la,color:la?this._getNextAvailableColor():null}};var na=fa(this.state.displayCohorts,ma);if(na.every(function(qa){return !qa.checked;})){na=this.state.displayCohorts;}else{var oa=na.filter(function(qa){return qa.checked;}).length,pa=oa>=this._getMaxSelectableRows();na.forEach(function(qa){return qa.disabled=!qa.checked&&pa;});}q.logEvent({_eventName:'cohort_chart_display_change',index:ka,action:la?'add':'remove',display_count:this.state.displayCohorts.filter(function(qa){return qa.checked;}).length,collation_interval:this.props.collationInterval.toLowerCase(),chart_type:this.props.chartType.toLowerCase()});this.setState({displayCohorts:na});},_onAddCohortDisplay:function(ka){if(!this.state.displayCohorts[ka].disabled)this._onChangeCohortDisplay(ka,true);},_onRemoveCohortDisplay:function(ka){this._onChangeCohortDisplay(ka,false);},_getDisplayCohorts:function(ka){var la=[{checked:true,index:0,cohortDataKey:'average',disabled:false}];la=la.concat(ka.retentionTable.map(function(na,oa){return {checked:false,index:oa+1,disabled:false};}));var ma=0;la.forEach(function(na){na.color=na.checked?ia[ma++]:null;});return la;},_getNextAvailableColor:function(){var ka=this._getAvailableColors();ea(ka&&ka.length>0);return ka[0];},_getUsedColors:function(){if(this.state&&this.state.displayCohorts)return this.state.displayCohorts.filter(function(ka){return !!ka.color;}).map(function(ka){return ka.color;});return [];},_getAvailableColors:function(){var ka=this._getUsedColors();return ia.filter(function(la){return ka.indexOf(la)===-1;});},_getScaleY:function(){switch(this.props.chartType){case i.USER_RETENTION:return v();case i.CUMULATIVE_EVENTS:return null;case i.LIFETIME_VALUE:return this.props.cohortData.isUSDValues?k('USD'):null;case i.VALUE_RETENTION:return v();default:ea(false);return null;}},_getValueY:function(){switch(this.props.chartType){case i.USER_RETENTION:return function(ka,la){return ka/100;};case i.CUMULATIVE_EVENTS:return null;case i.LIFETIME_VALUE:return null;case i.VALUE_RETENTION:return function(ka,la){return ka/100;};default:ea(false);return null;}},_getCollationIntervalString:function(ka){switch(this.props.collationInterval){case j.DAILY:return ka===1?da._("d\u00eda"):da._("d\u00edas");case j.WEEKLY:return ka===1?da._("semana"):da._("semanas");case j.MONTHLY:return ka===1?da._("'month'"):da._("meses");default:ea(false);return '';}},_getChartTooltip:function(ka){var la=null;switch(this.props.chartType){case i.USER_RETENTION:la=da._("{Percentage of users} of users {Intervals after first event} {Collation Interval} after",[da.param("Percentage of users",ka.yValueString),da.param("Intervals after first event",ka.xValueString),da.param("Collation Interval",this._getCollationIntervalString(ka.valueX))]);break;case i.CUMULATIVE_EVENTS:la=da._("{Number of events per user} events {Intervals after first event} {Collation Interval} after",[da.param("Number of events per user",ka.yValueString),da.param("Intervals after first event",ka.xValueString),da.param("Collation Interval",this._getCollationIntervalString(ka.valueX))]);break;case i.LIFETIME_VALUE:la=da._("{Value of event per user} per user {Intervals after first event} {Collation Interval} after",[da.param("Value of event per user",ka.yValueString),da.param("Intervals after first event",ka.xValueString),da.param("Collation Interval",this._getCollationIntervalString(ka.valueX))]);break;case i.VALUE_RETENTION:la=da._("{Retained Value} of value {Intervals after first event} {Collation Interval} after",[da.param("Retained Value",ka.yValueString),da.param("Intervals after first event",ka.xValueString),da.param("Collation Interval",this._getCollationIntervalString(ka.valueX))]);break;default:ea(false);}return ([w.createElement(y,{key:"data"},la)]);},_exportData:function(){return this.props.cohortData.exportData;}});e.exports=ja;},null);
__d("InsightsCohortsDataCardController",["BonsaiAppEventTypesUtils","BonsaiConfig","BonsaiUtils","AppEventsCohortsChartType","AppEventsCohortsCollationInterval","FalcorAsyncTaskLoaderMixin","FalcorCard","FalcorNotice","FalcorSamplingVariance","FalcorSegmentSelector","FalcorSelector","InsightsCohortsData","InsightsCohortsAverageChartView","InsightsCohortsUtils","InsightsContext","InsightsEventLogger","InsightsGraphAPIConstants","InsightsLoadingIndicator.react","React","cx","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){b.__markCompiled&&b.__markCompiled();var ca=y,da=ca.PropTypes,ea=y.createClass({displayName:"InsightsCohortsDataCardController",mixins:[l],propTypes:{cohortsID:da.string.isRequired,startTime:da.number.isRequired,endTime:da.number.isRequired,cohort:da.object,updateHeaderProps:da.func.isRequired,segmentID:da.string},componentWillMount:function(){this.props.updateHeaderProps(this._getHeaderConfig(this.state.collationInterval,this.state.allowedCollationIntervals,this._getChartType(),this.state.allowedChartTypes));this._loadCohortsData(this.props,this.state.segmentIDs,this.state.collationInterval);},componentWillReceiveProps:function(fa){var ga=this.props.cohortsID!==fa.cohortsID||this.props.startTime!==fa.startTime||this.props.endTime!==fa.endTime;if(ga)this._loadCohortsData(fa,this.state.segmentIDs,this.state.collationInterval);},componentDidUpdate:function(fa,ga){if(this.state.chartType!==ga.chartType||this.state.collationInterval!==ga.collationInterval)v.logCardView('cohort_data',{feature_id:this.props.cohortsID,chart_type:this.state.chartType.toLowerCase(),collation_interval:this.state.collationInterval.toLowerCase()});},getInitialState:function(){var fa=this.props.segmentID?[this.props.segmentID]:[];return {allowedChartTypes:Object.keys(j),allowedCollationIntervals:Object.keys(k),cohortsData:null,collationInterval:k.DAILY,segmentIDs:fa};},render:function(){if(!this.props.cohort)return y.createElement(x,null);var fa=this._getTitle();if(!fa)return y.createElement(x,null);if(this._isDataLoading())return (y.createElement(m,{title:this._getTitle()},this.renderProgressOrTimeoutIndicator()));var ga=this.state.cohortsData.getWarningMessage();if(ga)ga=y.createElement(n,{noticeType:n.NoticeTypes.WARNING,message:h.helptext[ga].content.__html});return (y.createElement("div",null,ga,this._tableViewContent()));},_renderSamplingNote:function(){var fa=this.state.cohortsData,ga=i.formatLaserReceivedDate(fa.getPartition()),ha=fa.getSamplingRate(),ia=fa.getFirstEventUniquesCount(),ja=fa.getFollowupEventUniquesCount(),ka=o.getVarianceSentence(ia,ha),la=null;if(ka!==null)la=y.createElement("div",null,aa._("Initial event: {first event's variance sentence}.",[aa.param("first event's variance sentence",ka)]));var ma=o.getVarianceSentence(ja,ha),na=null;if(ma!==null)na=y.createElement("div",null,aa._("Followup event: {followup event's variance sentence}.",[aa.param("followup event's variance sentence",ma)]));var oa=null;if(!la&&!na){oa=aa._("This report is based on unsampled data");}else oa=aa._("This report is based on sampled data");return (y.createElement("div",null,y.createElement("div",{className:"_13i9"},oa),la,na,y.createElement("br",null),y.createElement("div",null,aa._("This chart contains data up to and including {partition string}.",[aa.param("partition string",ga)]))));},_tableViewContent:function(){return (y.createElement(s,{title:this._getTitle(),helptext:this._renderSamplingNote(),cohortData:this._getCohortData(),collationInterval:this.state.collationInterval,chartType:this._getChartType()}));},_getTitle:function(){var fa=this.props.cohort;if(!fa.first_event||!fa.first_event.event_rule||!fa.first_event.event_rule.event_name)return null;var ga=g.getAppEventDisplayName(fa.first_event.event_rule.event_name),ha=g.getAppEventDisplayName(fa.followup_event.event_rule.event_name);return (aa._("{Initial event name} to {Followup event name}",[aa.param("Initial event name",ga),aa.param("Followup event name",ha)]));},_getHeaderConfig:function(fa,ga,ha,ia){var ja=aa._("COHORTS"),ka=Object.keys(k).map(function(na){return {isDisabled:ga&&ga.indexOf(na)===-1,value:na,text:t.getDisplayStringForCollationInterval(na),tooltip:t.getTooltipForCollationInterval(na)};}),la=aa._("CHART TYPE"),ma=Object.keys(j).map(function(na){return {isDisabled:ia&&ia.indexOf(na)===-1,value:na,text:t.getDisplayStringForChartType(na),tooltip:t.getTooltipForChartType(na)};});return {control:y.createElement("div",null,y.createElement(p,{onChange:this._onApplySegment,segmentID:this.state.segmentIDs[0]}),y.createElement(q,{className:"_2piv",value:fa,onChange:this._onCollationIntervalChange,options:ka,selectorLabel:ja}),y.createElement(q,{className:"_2piv",value:ha,onChange:this._onChartTypeChange,options:ma,selectorLabel:la}))};},_getExportFileNamePrefix:function(){return [this.props.cohort.name,this._getChartType()].join('-');},_getCohortData:function(){ba(this.props.cohort!=null);if(this._isDataLoading())return null;var fa=this._getChartType(),ga=this._getExportFileNamePrefix();switch(fa){case j.USER_RETENTION:return this.state.cohortsData.getUserRetentionData(ga);case j.CUMULATIVE_EVENTS:return this.state.cohortsData.getCumulativeCountData(ga);case j.LIFETIME_VALUE:return this.state.cohortsData.getCumulativeValueData(ga);case j.VALUE_RETENTION:return this.state.cohortsData.getValueRetentionData(ga);default:ba(false);return {};}},_onApplySegment:function(fa){var ga=fa?[fa.id]:[];this.setState({segmentIDs:ga});this._loadCohortsData(this.props,ga,this.state.collationInterval);v.logEvent({_eventName:'cohorts_apply_feature',feature_id:ga[0]?ga[0]:null,apply_to_section:u.getActiveSectionName().toLowerCase(),apply_to_feature_id:this.props.cohortsID});},_onCollationIntervalChange:function(fa){this.setState({collationInterval:fa.value});this.props.updateHeaderProps(this._getHeaderConfig(fa.value,this.state.allowedCollationIntervals,this._getChartType(),this.state.allowedChartTypes));this._loadCohortsData(this.props,this.state.segmentIDs,fa.value);},_onChartTypeChange:function(fa){this.setState({chartType:fa.value});this.props.updateHeaderProps(this._getHeaderConfig(this.state.collationInterval,this.state.allowedCollationIntervals,fa.value,this.state.allowedChartTypes));},_isDataLoading:function(){return this.state.cohortsData===null;},_onDataLoaded:function(fa){var ga=JSON.parse(fa.cohorts_data),ha=new r(ga.data,fa.sampling_rate,fa.first_event_uniques_count,fa.followup_event_uniques_count,fa.partition,fa.read_duration,fa.overall_duration,fa.async_task_id,ga.warning_message,ga.end_time,ga.collation_interval),ia=ha.getAllowedChartTypes(),ja=this._getChartType();if(ia.indexOf(ja)===-1)ja=ia[0];this.setState({allowedChartTypes:ia,allowedCollationIntervals:ga.allowed_intervals,cohortsData:ha,collationInterval:ga.collation_interval,chartType:ja});this.props.updateHeaderProps(this._getHeaderConfig(ga.collation_interval,ga.allowed_intervals,ja,ia));},_loadCohortsData:function(fa,ga,ha){this.setState({cohortsData:null});var ia={fields:'data',start_date:fa.startTime,end_date:fa.endTime,collation_interval:ha,segment_ids:ga};this.loadAsyncTaskData(w.COHORTS_NODE,fa.cohortsID,ia,this._onDataLoaded);},_getChartType:function(){if(this.state.chartType)return this.state.chartType;if(this.props.cohort)return this.props.cohort.chart_type;return j.USER_RETENTION;}});e.exports=ea;},null);
__d("FalcorCohortsSectionController",["BonsaiSections","CohortStore","FalcorAnalyticsFeatureSectionController","FalcorCommonViews","InsightsCohortsEditCardController","InsightsCohortsListCardController","InsightsCohortsDataCardController","InsightsContext","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=o.createClass({displayName:"FalcorCohortsSectionController",statics:{getKey:function(){return g.COHORTS;}},propTypes:Object.assign({},i.containerPropTypes),getInitialState:function(){return {additionalHeaderProps:null};},componentWillReceiveProps:function(q){if(this.props.view!==q.view)this.setState({additionalHeaderProps:null});},render:function(){return (o.createElement(i,o.__spread({},this.props,{onRenderView:this._onRenderView,section:g.COHORTS,entityStore:h,additionalHeaderProps:this.state.additionalHeaderProps})));},_onRenderView:function(q,r,s,t,u,v,w){switch(q){case j.CREATE:case j.EDIT:return (o.createElement(k,{appID:n.getObjID(),cardKey:"cohorts_edit",cohort:t,key:"cohorts_edit"}));case j.LIST:return (o.createElement(l,{key:"cohorts_list",cardKey:"cohorts_list",cohortList:r,appID:n.getObjID()}));case j.DETAILS:return (o.createElement(m,{key:"cohorts_analysis",cardKey:"cohorts_analysis",cohortsID:s,cohort:t,startTime:u,endTime:v,updateHeaderProps:this._onUpdateHeaderProps,segmentID:w}));}return null;},_onUpdateHeaderProps:function(q){this.setState({additionalHeaderProps:q});}});e.exports=p;},null);
__d("CustomEventLinks",["BonsaiCustomEventsHistory","BonsaiSections","BonsaiStyle","BonsaiUtils","InsightsContext"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l={get:function(m,n){var o=k.getCustomEvents(),p=o.slice(0),q;if(n&&p.length>i.CUSTOM_EVENTS_PAGE_LENGTH){var r=g.getRecentlyVisitedAppEvents();if(m)r=r.filter(function(u){return u!=m;});r.sort();if(r.Length){p=p.filter(function(u){return r.indexOf(u.name)!=-1;});}else p=[];if(p.length<i.CUSTOM_EVENTS_PAGE_LENGTH){var s=i.CUSTOM_EVENTS_PAGE_LENGTH-p.length;for(q=0;q<s;q++)if(p.indexOf(o[q])==-1)p.push(o[q]);}}var t=[];for(q=0;q<p.length;q++){var event=p[q];if(m===event.name)continue;t.push({displayName:event.display_name,name:event.name,url:j.getSectionInsightsURI(h.CUSTOM_EVENTS,event.name).toString()});}return t;}};e.exports=l;},null);
__d("BonsaiPaginatedDataTable",["BonsaiChartLinkMixin","BonsaiContextualHelp","BonsaiDownloadMixin","BonsaiErrorNotice","BonsaiPopoverMenu","BonsaiText","cx","fbt","InsightsContext","LeftRight.react","React","ReactXUIMenu","XUISortableDataTable.react","XUITextInput.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=r.Item,v=q,w=v.PropTypes,x=15,y=q.createClass({displayName:"BonsaiPaginatedDataTable",mixins:[i,g],propTypes:{columns:w.array.isRequired,columnToSortBy:w.string,helptext:w.string,searchFieldName:w.string,rows:w.array.isRequired,pageSize:w.number,exportData:w.array,downloadFileName:w.string},getDefaultProps:function(){return {pageSize:x};},getInitialState:function(){return {pageNumber:0};},_toNextPage:function(){this.setState({pageNumber:this.state.pageNumber+1});},_toPrevPage:function(){this.setState({pageNumber:this.state.pageNumber-1});},_onSort:function(){this.setState({pageNumber:0});},_onSearchboxChange:function(z){if(z&&z.target)this.setState({searchFilter:z.target.value,pageNumber:0});},_getFeaturesDropdown:function(){var z,aa;z=[this._getExportLink(this.props.exportData,this.props.downloadFileName)];if(!o.isDevsite())z.push(this._getChartLink());aa=q.createElement(r,null,z.map(function(ba){return q.createElement(u,null,ba);}));return q.createElement(k,{menu:aa,buttonClass:"_3-99"});},render:function(){var z,aa,ba,ca,da,ea;z=this._getRows();aa=Math.ceil(z.length/this.props.pageSize);ba=Math.min(aa,this.state.pageNumber);ca=q.createElement("noscript",null);if(this.props.searchFieldName)ca=q.createElement(t,{onChange:this._onSearchboxChange,placeholder:n._("Busca...")});da=(q.createElement(j,{className:"_3-8t _3-96",message:l.errors.no_data}));if(z&&z.length)da=q.createElement(s,{outerBorder:true,onSort:this._onSort,columns:this.props.columns,columnToSortBy:this.props.columnToSortBy,rows:z,viewStart:ba*this.props.pageSize,viewLength:this.props.pageSize});ea='';if(this.props.exportData)ea=this._getFeaturesDropdown();return (q.createElement("div",q.__spread({},this.props),q.createElement(p,{className:"mbm"},q.createElement("div",null,q.createElement("span",null,n._("En la p\u00e1gina {page_number} de {total_pages}",[n.param("page_number",q.createElement("span",{className:"fwb"},aa===0?0:ba+1)),n.param("total_pages",aa)])),' ',"·",' ',ba===0?q.createElement("span",{className:"fcg"},"Prev"):q.createElement("a",{href:"#",onClick:this._toPrevPage},n._("Anterior")),' ',"·",' ',aa===0||ba===aa-1?q.createElement("span",{className:"fcg"},"Next"):q.createElement("a",{href:"#",onClick:this._toNextPage},n._("Siguiente"))),q.createElement("div",null,ca,ea)),da,q.createElement("div",{className:"_5x4g"},this._getChartHelpText())));},_getChartHelpText:function(){if(this.props.helptext){return q.createElement(h,{helpKey:this.props.helptext});}else return null;},_getRows:function(){var z=this.props.rows;if(this.state.searchFilter){var aa=this.state.searchFilter.toLocaleLowerCase();z=z.filter(function(ba){if(!ba||!ba[this.props.searchFieldName])return false;var ca=ba[this.props.searchFieldName].toLocaleLowerCase();return ca.indexOf(aa)!=-1;}.bind(this));}return z;}});e.exports=y;},null);
__d("FalcorLoadingCard",["FalcorCard","Image.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i,n=m.PropTypes,o=i.createClass({displayName:"FalcorLoadingCard",propTypes:{showCard:n.bool,onlySpinner:n.bool},getDefaultProps:function(){return {showCard:true,onlySpinner:false};},render:function(){var p=i.createElement(h,{src:l('/images/platform/insights/loader.gif')}),q=i.createElement("div",{className:"_2fud"},k._("Loading Chart"));if(this.props.showCard)return (i.createElement(g,{className:"_2fue"},p,q));if(this.props.onlySpinner)return (i.createElement("div",{className:"_2fuf"},p));return (i.createElement("div",{className:"_2fuf"},p,q));}});e.exports=o;},null);
__d("CustomEventBreakdownTable",["BonsaiApiBreakdown","BonsaiApiDataAdapter","BonsaiApiError","BonsaiApiPromise","BonsaiConfig","BonsaiPaginatedDataTable","BonsaiPercentageString","BonsaiSectionDataLoaderMixin","BonsaiText","BonsaiUtils","CustomEventSectionDataLoaderMixin","FalcorErrorNotice","FalcorLoadingCard","FalcorPaginatedDataTable","InsightsLoadingIndicator.react","InsightsNumUtils","ObjectSort","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){b.__markCompiled&&b.__markCompiled();var aa=x,ba=aa.PropTypes,ca={label_not_logged_value:z._("No se registr\u00f3 ning\u00fan valor"),label_not_logged_and_other_value:z._("Se ingres\u00f3 otro valor o no se ingres\u00f3 ninguno"),value:z._("Valor"),value_pct:z._("Porcentaje de valor"),value_per_event:z._("Valor\/evento")},da={int:function(ga){if(!ga)return '';return v.prettyInt(ga);},pct:function(ga){if(!ga)return '';return (x.createElement(m,{percentage:ga}));},usd:function(ga){if(!ga)return '';return v.prettyCurrency('USD',ga);},value:function(ga){if(!ga)return '';ga=parseFloat(ga.toFixed(2),10);return v.prettyFloat(ga);}};function ea(ga){if(ga&&(ga instanceof i)){return ga.getMessage();}else return null;}var fa=x.createClass({displayName:"CustomEventBreakdownTable",mixins:[n,q],willApplyFilters:function(){return false;},propTypes:{breakdown:ba.object.isRequired,event:ba.object.isRequired,loadData:ba.bool.isRequired,isFalcor:ba.bool,discardValueData:ba.bool},componentWillMount:function(){this._fetchTableData(this.props);},componentWillReceiveProps:function(ga){this._fetchTableData(ga);},getInitialState:function(){return {breakdownTableData:null};},_fetchTableData:function(ga){if(!ga.loadData)return;this.resetMetrics();this.setState(this.getInitialState());this._addBreakdownMetric('COUNT',ga,[]);this._addBreakdownMetric('COUNT',ga,[ga.breakdown.name]);this._addBreakdownMetric('SUM',ga,[]);this._addBreakdownMetric('SUM',ga,[ga.breakdown.name]);this._addBreakdownMetric('USD_SUM',ga,[]);this._addBreakdownMetric('USD_SUM',ga,[ga.breakdown.name]);this.fetchMetrics();},_addBreakdownMetric:function(ga,ha,ia){var ja={aggregateBy:ga,breakdowns:ia},ka=[ga].concat(ia);this.addUnfilteredCustomEventMetric(ha,ka,ja);},render:function(){var ga=null,ha=false,ia=this.props.breakdown,ja=this.getUnfilteredCustomEventData(['COUNT',ia.name]),ka=this.getUnfilteredCustomEventData(['SUM',ia.name]),la=this.getUnfilteredCustomEventData(['USD_SUM',ia.name]),ma=this.getUnfilteredCustomEventData(['COUNT']),na=this.getUnfilteredCustomEventData(['SUM']),oa=this.getUnfilteredCustomEventData(['USD_SUM']);if(ja instanceof h&&ka instanceof h&&la instanceof h&&ma instanceof h&&na instanceof h&&oa instanceof h){if(!ja.getTotal()){var pa=g.isBreakdownAfterSdkV4_2(this.props.breakdown.name)?x.createElement("span",null,z._("Este desglose requiere la versi\u00f3n 4.2 o superior del SDK de Facebook. Los \u00faltimos SDK est\u00e1n disponibles en"),' ',x.createElement("a",{href:"https://developers.facebook.com/docs#apis-and-sdks",target:"_blank"},z._("el sitio web para desarrolladores de Facebook")),"."):null;return (x.createElement(r,{message:o.errors.no_data},pa));}if(this.state.breakdownTableData){ga=this._buildTable(this.state.breakdownTableData);}else{ha=true;this._buildTableDataAsync(ia);}}else if(ja instanceof j||ka instanceof j||la instanceof j||ma instanceof j||na instanceof j||oa instanceof j){ha=true;}else{var qa=ea(ja)||ea(ka)||ea(la)||ea(ma)||ea(na)||ea(oa);if(qa)ga=x.createElement("div",x.__spread({},this.props,{className:"mam",key:ia.display_name,tableKey:ia.display_name}),x.createElement(r,{className:"_3-8t _3-96",message:qa}));}if(ha){if(this.props.isFalcor)return (x.createElement(s,{showCard:false}));return (x.createElement("div",{className:"mam"},x.createElement(u,x.__spread({},this.props))));}else if(ga){return ga;}else return (x.createElement("div",{className:"mam"},x.createElement(r,{className:"_3-8t _3-96",message:o.errors.unavailable})));},getExportData:function(){if(this.state.breakdownTableData)return this.state.breakdownTableData["export"];return null;},_buildTableDataAsync:function(ga){setTimeout(function(){var ha=this._buildTableData(ga);this.setState({breakdownTableData:ha});}.bind(this),0);},_buildTableData:function(ga){if(this.state.breakdownTableData)return this.state.breakdownTableData;var ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za;la=this.getUnfilteredCustomEventData(['COUNT',ga.name]);ha=la.getTotal();ja=this.getUnfilteredCustomEventData(['COUNT']).getTotal();za=ha<.995*ja?{bucket:Object.keys(la).length<=100?ca.label_not_logged_value:ca.label_not_logged_and_other_value,count:ja-ha,count_pct:(ja-ha)/ja}:null;ma=[{id:'bucket',label:ga.display_name,sortable:true,comparator:this._sortBucketLabel},{id:'count',label:o.count,sortable:true,cellRenderer:da.int,isNumeric:true},{id:'count_pct',label:o.count_pct,sortable:true,cellRenderer:da.pct,isNumeric:true,width:80}];na=p.getSumData(this.getUnfilteredCustomEventData(['COUNT',ga.name]),this.getUnfilteredCustomEventData(['SUM',ga.name]));oa=p.getSumData(this.getUnfilteredCustomEventData(['COUNT',ga.name]),this.getUnfilteredCustomEventData(['USD_SUM',ga.name]));ka=1;pa=null;qa=null;if(!this.props.discardValueData&&(na||oa)){ra=ca.value;sa=ca.value_pct;ta=ca.value_per_event;ua=da.value;if(oa)ua=da.usd;qa=oa?oa:na;ia=qa.getTotal();ka=oa?this.getUnfilteredCustomEventData(['USD_SUM']).getTotal():this.getUnfilteredCustomEventData(['SUM']).getTotal();pa=qa.divideBy(la).groupBy(ga.name);qa=qa.groupBy(ga.name);ma.push({id:'value',label:ra,sortable:true,cellRenderer:ua,isNumeric:true},{id:'value_pct',label:sa,sortable:true,cellRenderer:da.pct,isNumeric:true},{id:'value_per_event',label:ta,sortable:true,cellRenderer:ua,isNumeric:true});if(za){za.value=ka-ia;za.value_pct=za.value/ka;za.value_per_event=za.value/za.count;}}la=la.groupBy(ga.name);va=true;wa=k.customEventDisplayMinimums;ya=this._formatDataForExport(la,ga.name);xa=Object.keys(la).map(function(ab){var bb,cb,db,eb,fb;bb=la[ab];switch(ga.name){case g.ACQUISITION_SOURCE_L1:cb=o.getAcquisitionSourceNameWithLink(ab,1);break;case g.ACQUISITION_SOURCE_L2:cb=o.getAcquisitionSourceNameWithLink(ab,2);break;case g.ACQUISITION_SOURCE_L3:cb=o.getAcquisitionSourceNameWithLink(ab,3);break;default:cb=o.getBucketLabel(ab,ga.name);break;}if(isNaN(cb))va=false;if(ga.name===g.LABEL_COHORT&&cb===null)return null;if(ab==cb)cb=o.getEventAndBreakdownSpecificBucketTranslation(this.props.event,ab,ga.name);var gb=this._getSearchableLabel(cb);db=bb.getTotal();eb={searchKey:gb,bucket:cb,count:db,count_pct:db/ja};if(qa&&qa[ab]){fb=qa[ab].getTotal();eb.value=fb;eb.value_pct=fb/ka;eb.value_per_event=pa[ab].getTotal();}return eb;}.bind(this),this).concat(za).filter(function(ab){return ab!==null;}).sort(function(ab,bb){return bb.count-ab.count;});if(va)ma[0].comparator=w.getReverseNumericSortFunction('bucket');return {breakdown:ga,columns:ma,rows:xa,"export":ya};},_getSearchableLabel:function(ga){if(!Array.isArray(ga))return ga;var ha='';ga.forEach(function(ia){if(typeof ia==='string'){ha=ha+ia;}else ha=ha+ia.props.children;});return ha;},_sortBucketLabel:function(ga,ha){var ia=ga.searchKey,ja=ha.searchKey;return ia.toLowerCase().localeCompare(ja.toLowerCase());},_buildTable:function(ga){var ha,ia,ja;ha=ga.breakdown.display_name;ia=/ +/g;ja=this.props.event.display_name.replace(ia,'_').toLowerCase()+'_'+ha.replace(ia,'_');if(this.props.isFalcor)return (x.createElement(t,{ref:"falcorTable",columns:ga.columns,searchFieldName:"searchKey",rows:ga.rows,pageSize:Infinity}));return (x.createElement("div",x.__spread({},this.props,{key:ha,className:"mam",tableKey:ha}),x.createElement(l,{columns:ga.columns,helptext:"CustomEventsBreakdownTables",searchFieldName:"bucket",rows:ga.rows,exportData:ga["export"],downloadFileName:ja,currentCard:this.props.cardKey})));},_formatDataForExport:function(ga,ha){var ia,ja,ka,la;ia={};ja=Object.keys(ga).map(function(ma){var na=o.getBucketLabel(ma,ha);if(ma===na)na=o.getEventAndBreakdownSpecificBucketTranslation(this.props.event,ma,ha);return {key:ma,label:na};}.bind(this));for(ka=0;ka<ja.length;ka++)ia[ja[ka].label]=ga[ja[ka].key].getData();la=[];ja=Object.keys(ia).sort(function(ma,na){var oa,pa;oa=ia[na].reduce(function(qa,ra){return qa+ra.value;},0);pa=ia[ma].reduce(function(qa,ra){return qa+ra.value;},0);return oa-pa;});for(ka=0;ka<ja.length;ka++)la.push({header:ja[ka],body:ia[ja[ka]]});return la;},shouldAutoRefetch:function(){return false;}});e.exports=fa;},null);
__d("FalcorCustomEventsBreakdownCard",["AppEventsAppIdentifyingBreakdowns","BonsaiApiBreakdown","BonsaiConfig","FalcorHeaderSelector","BonsaiErrorNotice","BonsaiText","BonsaiTooltip","CustomEventBreakdownTable","FalcorCard","InsightsContext","InsightsEventLogger","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=j.Item,v=r,w=v.PropTypes,x={title:t._("Tablas de desglose")},y=['fb_mobile_time_between_sessions'],z=r.createClass({displayName:"FalcorCustomEventsBreakdownCard",willApplyFilters:function(){return false;},propTypes:{event:w.object.isRequired,timeSpentEvent:w.object},getInitialState:function(){var aa={};aa[h.COUNTRY]=true;return {loadTableData:aa,activeSection:h.COUNTRY};},componentWillMount:function(){this._getAllBreakdowns().forEach(function(aa){if(p.getActiveCardName()===this.props.cardKey&&p.getActiveTabName()===aa.name&&!this.state.loadTableData[aa.name])this._onBreakdownChange(aa.name);}.bind(this));},componentWillReceiveProps:function(aa){if(this.props.event!=aa.event)this.setState(this.getInitialState());},componentDidMount:function(){q.logCardView(this.props.cardKey.toLowerCase(),{card_section:this.state.activeSection,event:this.props.event.name});},componentDidUpdate:function(aa,ba){if(this.props.event.name!=aa.event.name||this.state.activeSection!==ba.activeSection)q.logCardView(this.props.cardKey.toLowerCase(),{card_section:this.state.activeSection,event:this.props.event.name});},_getAllBreakdowns:function(aa){aa=aa||this.props;var ba=[];ba.push(h.COUNTRY);if(i.showDeviceAndLocationBreakdowns){ba.push(h.REGION_CODE);ba.push(h.CITY_CODE);ba.push(h.TIMEZONE);}ba.push(h.LOCALE);ba.push(h.DEVICE_OS);ba.push(h.DEVICE_MODEL);if(i.showDeviceAndLocationBreakdowns){ba.push(h.CARRIER);ba.push(h.SCREEN_DIMENSIONS);ba.push(h.CORE_COUNT);ba.push(h.TOTAL_DISK_GB);ba.push(h.REMAINING_DISK_GB);}ba.push(h.USER_AGENT);if(!p.isDemoApp())ba=ba.concat(Object.keys(g));ba.push(h.ACQUISITION_SOURCE_L1),ba.push(h.ACQUISITION_SOURCE_L2),ba.push(h.ACQUISITION_SOURCE_L3),ba=ba.map(function(da){return {name:da,display_name:l.getBreakdownName(da)};});if(Array.isArray(aa.event.custom_event_fields))ba=ba.concat(aa.event.custom_event_fields);if(aa.timeSpentEvent&&Array.isArray(aa.timeSpentEvent.custom_event_fields)){var ca=aa.timeSpentEvent.custom_event_fields;ca.forEach(function(da){if(y.indexOf(da.name)!==-1)ba.push(da);});}return ba;},_title:function(){return x.title;},_onExportClick:function(){return this.refs.breakdownTable.getExportData();},render:function(){var aa=null,ba=[],ca=null;this._getAllBreakdowns().forEach(function(ga){var ha=l.getBreakdownTooltip(ga.name,false);if(ha)ha=r.createElement(m,{tooltip:ha});ba.push(r.createElement(u,{key:ga.name,value:ga.name,label:ga.display_name,tooltip:ha}));if(ga.name===this.state.activeSection){var ia,ja;if(this.props.timeSpentEvent&&y.indexOf(ga.name)!==-1){ia=this.props.timeSpentEvent;ja=true;}else{ia=this.props.event;ja=false;}ca=ga.display_name;aa=r.createElement(n,r.__spread({},this.props,{ref:"breakdownTable",breakdown:ga,event:ia,loadData:this.state.loadTableData[ga.name],tableKey:ga.display_name,isFalcor:true,discardValueData:ja}));}}.bind(this),this);var da=r.createElement(j,{headerKey:this.props.cardKey,onItemChange:this._onBreakdownChange},ba);if(!aa)aa=r.createElement("div",{className:"mam"},r.createElement(k,{className:"_3-8t _3-96",message:l.errors.unavailable}));var ea=/ +/g,fa=this.props.event.display_name.replace(ea,'_').toLowerCase()+'_'+ca.replace(ea,'_');return (r.createElement(o,{dropDown:da,onSearchChange:this._onSearchChange,showLine:false,getExportData:this._onExportClick,exportFilename:fa},aa));},_onSearchChange:function(aa){this.refs.breakdownTable.refs.falcorTable.onSearchChange(aa);},_onBreakdownChange:function(aa){var ba=this.state.loadTableData;ba[aa]=true;this.setState({loadTableData:ba,activeSection:aa});}});e.exports=z;},null);
__d("BonsaiDemoDataProcessMixin",["BonsaiApiBreakdown","BonsaiApiError","BonsaiApiPromise","BonsaiText"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={processGeoLocaleData:function(l){var m,n;m={};n=[g.COUNTRY,g.LOCALE];n.forEach(function(o){var p,q,r;m[o]=[];p=l?l[o]:this.getData(o);if(p instanceof h||p instanceof i){m[o]=p;}else if(p){q=[];r=p.groupBy(g[o.toUpperCase()]);Object.keys(r).sort(function(s,t){return r[t].getLatestTotal()-r[s].getLatestTotal();}).forEach(function(s){var t={};t.header=j.getBucketLabel(s,o);t.body=r[s].getData();t.oldest=r[s].getOldestTotal();t.latest=r[s].getLatestTotal();q.push(t);});m[o]=q;}}.bind(this),this);return m;},processFalcorGenderAgeData:function(l){if(l instanceof h||l instanceof i)return l;var m=this.processGenderAgeData(l),n=m.chart,o=Object.keys(n).sort(),p=o.filter(function(s){return s!=='UNKNOWN'&&(n[s].F||n[s].M);}),q=p.map(function(s){return n[s].F||0;}),r=p.map(function(s){return n[s].M||0;});return {ages:p,chartData:[q,r],legend:[j.breakdown.gender.F,j.breakdown.gender.M],"export":m["export"]};},processGenderAgeData:function(l,m){var n,o,p,q,r,s;if(l instanceof h){return l;}else if(l instanceof i)return l;n=m?l:l.getLatest();n=n.scaleTo(1).groupBy(g.AGE);o={};Object.keys(n).forEach(function(t){var u=n[t].groupBy(g.GENDER);o[t]={};Object.keys(u).forEach(function(v){o[t][v]=u[v].getTotal();},this);}.bind(this),this);p=l.groupBy(g.AGE);q={};r=false;Object.keys(p).forEach(function(t){var u=p[t].groupBy(g.GENDER);q[t]={};Object.keys(u).forEach(function(v){var w,x;if(u[v].hasBreakdown(g.CLIENT)||u[v].hasBreakdown(g.OG_ACTION_TYPE)){r=true;q[t][v]={};if(u[v].hasBreakdown(g.CLIENT)){w=u[v].groupBy(g.CLIENT);Object.keys(w).forEach(function(y){q[t][v][y]=w[y].getData();});}else{x=u[v].groupBy(g.OG_ACTION_TYPE);Object.keys(x).forEach(function(y){var z=j.getBucketLabel(y,g.OG_ACTION_TYPE);q[t][v][z]=x[y].getData();});}}else q[t][v]=u[v].getData();});});s=[];Object.keys(q).sort().forEach(function(t){Object.keys(q[t]).sort().forEach(function(u){var v={};if(r){Object.keys(q[t][u]).sort().forEach(function(w){v.header=t+' ('+u+') '+'('+w+')';v.body=q[t][u][w];});}else{v.header=t+' ('+u+')';v.body=q[t][u];}s.push(v);});});return {chart:o,'export':s};}};e.exports=k;},null);
__d("FalcorSideBySideColumnsChart",["BonsaiStyle","SpectrumChart","InsightsLegend.react","InsightsLegendAreaKey.react","LeftRight.react","d3/scale/ordinal","SpectrumSideBySideColumns","React","SpectrumXAxis","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=n,s=r.PropTypes,t=n.createClass({displayName:"FalcorSideBySideColumnsChart",propTypes:{xAxisValues:s.array.isRequired,legendValues:s.array.isRequired,chartData:s.array.isRequired,totalCount:s.number.isRequired,selectors:s.object,exportData:s.array},render:function(){var u=this.props.chartData,v=this.props.xAxisValues,w=this.props.legendValues.slice(),x=this.props.totalCount;u=u.filter(function(aa,ba){var ca=aa.reduce((function(da,ea){return da+ea;}),0)===0;if(ca)w.splice(ba,1);return !ca;});var y=w.map(function(aa,ba){var ca=u[ba]?u[ba].reduce(function(da,ea){return da+ea;}):0;return Math.round(ca/x*100);}),z=y.reduce(function(aa,ba){return aa+ba;});if(z<100){w.push(q._("Desconocida"));y.push(100-z);}y=y.filter(function(aa,ba){if(aa===0){w.splice(ba,1);return false;}return true;});return (n.createElement(k,null,n.createElement(h,{theme:this._getTheme(),width:700,height:150,scaleX:l().domain(v)},n.createElement(m,{useCenteredColumns:true,data:u,label:"SPLIT",labelFormat:function(aa){if(aa===0)return null;var ba=Math.max(Math.round(aa/x*100),1);return (q._("{percentage value} \u0025",[q.param("percentage value",ba)]));}}),n.createElement(o,null)),n.createElement("div",null,this.props.selectors,n.createElement(i,{className:"_47tf",layout:i.layout.STACKED},w.map(function(aa,ba){return n.createElement("div",{key:ba,className:"_3-95"},n.createElement(j,{color:this._getTheme().columns.colors[ba],size:"medium"},q._("{legend value} ({percentage value}\u0025)",[q.param("legend value",aa),q.param("percentage value",y[ba])])));}.bind(this))))));},getExportData:function(){return this.props.exportData;},_getTheme:function(){return Object.assign({},g.OVERVIEW_CHART_THEME,{rangeBands:{outerPadding:.15,padding:.2}});}});e.exports=t;},null);
__d("FalcorCustomEventsDemoCard",["BonsaiApiBreakdown","BonsaiApiError","BonsaiApiPromise","BonsaiDemoDataProcessMixin","BonsaiSectionDataLoaderMixin","CustomEventSectionDataLoaderMixin","FalcorCard","FalcorHeaderSelector","FalcorLoadingCard","FalcorSideBySideColumnsChart","InsightsEventLogger","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=n.Item,u=r,v=u.PropTypes,w={events_title:s._("Datos demogr\u00e1ficos por n\u00famero de eventos"),female_demo_label:s._("Registrado por mujeres"),installs_title:s._("Instalaciones"),male_demo_label:s._("Registrado por hombres"),title:s._("Datos demogr\u00e1ficos"),usd_value_label:s._("Valor en USD"),users_title:s._("Datos demogr\u00e1ficos por n\u00famero de usuarios \u00fanicos"),value_label:s._("Valores")},x=[g.AGE,g.GENDER],y={events:'events',users:'users'},z=r.createClass({displayName:"FalcorCustomEventsDemoCard",mixins:[k,j,l],propTypes:{event:v.object.isRequired},getInitialState:function(){return {activeSection:y.events};},componentWillMount:function(){this._fetchDemographicMetrics();},componentDidMount:function(){q.logCardView(this.props.cardKey.toLowerCase(),{card_section:this.state.activeSection,event:this.props.event.name});},componentDidUpdate:function(aa,ba){if(this.props.event.name!=aa.event.name||this.state.activeSection!==ba.activeSection)q.logCardView(this.props.cardKey.toLowerCase(),{card_section:this.state.activeSection,event:this.props.event.name});},willApplyFilters:function(){return true;},_fetchDemographicMetrics:function(){this.resetMetrics();this._addDemoMetric('COUNT');this._addDemoMetric('USERS');this.fetchMetrics();},_addDemoMetric:function(aa){var ba={aggregateBy:aa,breakdowns:x.slice(0)};this.addCustomEventMetric(this.props,[aa],ba);},_getDemographicsData:function(aa){var ba=this.getCustomEventData([aa]);if(ba instanceof h&&ba.isInvalidQueryError())return null;return ba;},_renderEventSection:function(aa){var ba=this.processFalcorGenderAgeData(aa);return (r.createElement(p,{ref:y.events,xAxisValues:ba.ages,legendValues:ba.legend,chartData:ba.chartData,exportData:ba["export"],totalCount:1}));},_renderUserSection:function(aa){var ba=this.processFalcorGenderAgeData(aa);return (r.createElement(p,{ref:y.users,xAxisValues:ba.ages,legendValues:ba.legend,chartData:ba.chartData,exportData:ba["export"],totalCount:1}));},_onExportClick:function(){return this.refs[this.state.activeSection].getExportData();},render:function(){var aa=null,ba=this.props.event.name=='fb_mobile_first_app_launch',ca=null;if(!ba)ca=r.createElement(n,{headerKey:this.props.cardKey,onItemChange:this._onTabChange},r.createElement(t,{value:y.events,label:w.events_title}),r.createElement(t,{value:y.users,label:w.users_title}));var da=null;if(this.state.activeSection===y.events){var ea=this._getDemographicsData('COUNT');if(ea instanceof i)return r.createElement(o,null);aa=this._renderEventSection(ea);da={key:'CustomEventsEventsDemo',title:w.events_title};}else if(this.state.activeSection===y.users){var fa=this._getDemographicsData('USERS');if(fa instanceof i)return r.createElement(o,null);aa=this._renderUserSection(fa);da={key:'CustomEventsUsersDemo',title:w.users_title};}var ga=this.props.event.display_name.replace(' ','_').toLowerCase()+'_demographics_Gender_Age';return (r.createElement(m,{title:this.props.event.display_name,dropDown:ca,helpText:da,getExportData:this._onExportClick,exportFilename:ga},aa));},_onTabChange:function(aa){this.setState({activeSection:aa});},shouldAutoRefetch:function(){return true;}});e.exports=z;},null);
__d("BonsaiPercentageBar",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l=g.createClass({displayName:"BonsaiPercentageBar",propTypes:{borderColor:k.string.isRequired,data:k.array.isRequired},render:function(){var m=i("_f5z",this.props.className),n=0;this.props.data.forEach(function(r){n+=r[0];});var o=0,p=0,q=this.props.data.map(function(r){var s=r[0],t=r[1],u=Math.max(1,Math.round(s/n*100));if(o===this.props.data.length-1){u=100-p-1;}else p+=u;var v='solid 1px '+this.props.borderColor,w={backgroundColor:t,borderBottom:v,borderTop:v,width:u+"%"},x="_3py2";if(o===0){x=i(x,"_1pqk");w.borderLeft=v;}if(this.props.data.length===1||o===this.props.data.length-1){x=i(x,"_1pql");w.borderRight=v;}return g.createElement("div",{className:x,key:o++,style:w});}.bind(this),this);return (g.createElement("div",{className:m},q));}});e.exports=l;},null);
__d("FalcorPercentageBar",["BonsaiColors","BonsaiPercentageBar","Layout.react","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i.Column,m=i.FillColumn,n=j,o=n.PropTypes,p=j.createClass({displayName:"FalcorPercentageBar",propTypes:{label:o.string,data:o.array.isRequired},render:function(){var q=this.props.data.length>1?g.GRAY20:g.ANALYTICS_BLUE;return (j.createElement(i,{className:this.props.className},j.createElement(l,null,j.createElement("div",{className:"_2asd _3-93"},this.props.label)),j.createElement(m,null,j.createElement(h,{borderColor:q,data:this.props.data,className:"_3xvv"}))));}});e.exports=p;},null);
__d("FalcorCustomEventsPercentageBar",["BonsaiApiBreakdown","BonsaiApiDataAdapter","BonsaiApiError","BonsaiApiPromise","BonsaiColors","BonsaiErrorNotice","BonsaiSectionDataLoaderMixin","FalcorLoadingCard","FalcorPercentageBar","InsightsNumUtils","React","cx","fbt","mergeArrays"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();'use strict';var u=q,v=u.PropTypes,w='2',x=q.createClass({displayName:"FalcorCustomEventsPercentageBar",mixins:[m],propTypes:{event:v.object.isRequired,filters:v.object},componentWillReceiveProps:function(y){this._fetchCounts(y.event,y.filters||{});},componentWillMount:function(){this._fetchCounts(this.props.event,this.props.filters);},_fetchCounts:function(event,y){this.resetMetrics();var z={event_name:event.name,aggregateBy:'COUNT',breakdowns:t([g.IDENTITY_SOURCE],Object.keys(y))};this.addMetric([z.aggregateBy,z.event_name],'app_event',z);this.fetchMetrics();},render:function(){var y=this.getData(['COUNT',this.props.event.name]),z;if(y instanceof j){z=q.createElement(n,{showCard:false,onlySpinner:true});}else if(y instanceof i){z=(q.createElement(l,{className:"_3-8y",message:y.getMessage()}));}else if(y instanceof h){if(!y.getTotal())return (q.createElement(l,{className:"_3-8y",short:true}));var aa=this.props.filters,ba=y.getTotal(),ca=y.filterBy(g.IDENTITY_SOURCE,'!=',[w]).getTotal();if(Object.keys(aa).length){Object.keys(aa).forEach(function(ea){y=y.filterBy(ea,'=',[aa[ea]]);});var da=y.getTotal();z=this._getPercentageBarWithFilters(ba,da,ca);}else z=this._getPercentageBarNoFilters(ba,ca);}return z;},_getPercentageBarNoFilters:function(y,z){return (q.createElement(o,{label:this._getTotalEventsText(y),data:[[y,k.ANALYTICS_BLUE]]}));},_getPercentageBarWithFilters:function(y,z){var aa=[[z,k.ANALYTICS_BLUE],[y-z,k.BLUEGRAY10]];return (q.createElement(o,{label:this._getFilterMatchText(y,z),data:aa}));},_getFilterMatchText:function(y,z){return (s._("{percentage} of Available Audience",[s.param("percentage",this._getPercentage(z,y))]));},_getTotalEventsText:function(y){var z=p.prettyInt(y),aa;if(this.props.event.name=='fb_mobile_first_app_launch'){aa=s._("Instalaciones totales: {number}",[s.param("number",z)]);}else aa=s._("Total de eventos: {number}",[s.param("number",z)]);return aa;},_getPercentage:function(y,z){var aa=y/z*100;return (p.prettyFloat(parseFloat(aa.toFixed(2),10))+'%');}});e.exports=x;},null);
__d("FalcorCustomEventsFilterBar",["BonsaiApiBreakdown","BonsaiApiDataAdapter","BonsaiConfig","BonsaiConstants","BonsaiSectionDataLoaderMixin","BonsaiText","FalcorCustomEventsPercentageBar","FalcorCard","FalcorMenuSelector","Grid.react","InsightsEventLogger","InsightsLoadingIndicator.react","ObjectSort","React","XUIMenuStaticItem.react","cx","fbt","ReactXUIMenu"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();'use strict';var x=p.GridItem,y=b('ReactXUIMenu').Item,z=t,aa=z.PropTypes,ba=t.createClass({displayName:"FalcorCustomEventsFilterBar",mixins:[k],propTypes:{event:aa.object.isRequired,filters:aa.object,onFilterChange:aa.func.isRequired,onResetFilters:aa.func.isRequired},componentWillReceiveProps:function(ca){this.setState(this._getStateFromProps(ca));},getInitialState:function(){return this._getStateFromProps(this.props);},_getStateFromProps:function(ca){return {filters:ca.filters||{}};},_onFilterChange:function(ca,da){q.logEvent({_eventName:'events_filter_change',filter:ca,value:da.activeValue,event:this.props.event.name});this.props.onFilterChange(ca,da.activeValue);},_onCustomBreakdownChange:function(ca){this._fetchCountForCustomBreakdown(ca.activeValue);var da=this.state.selected_custom_breakdown?this.state.selected_custom_breakdown.activeValue:null;this.setState({selected_custom_breakdown:ca});if(da&&this.state.filters[da]&&this.state.filters[da]!=j.ALL)this.props.onFilterChange(da,j.ALL);},_resetFilters:function(){this.setState({selected_custom_breakdown:null});this.props.onResetFilters();},_fetchCountForCustomBreakdown:function(ca){this.resetMetrics();if(ca===j.ALL)return;var da={event_name:this.props.event.name,aggregateBy:'COUNT',breakdowns:[ca]};this.addMetric([da.aggregateBy,da.event_name],'app_event',da);this.fetchMetrics();},render:function(){var ca=this._getBreakdownSelectors();return (t.createElement(n,{className:"_2as5"},t.createElement(p,{className:"_2as6 _3-98",cols:ca.length+2,spacing:"_2pik"},ca,t.createElement(x,{key:"extrFilter"},t.createElement("div",{className:"_1fh9 _3-99 _3-93 _3-8x"}),t.createElement("div",{className:"_1fha"},this._getResetLink(),this._getExtraBreakdownSelector()))),t.createElement(m,t.__spread({},this.props,{event:this.props.event,filters:this.state.filters}))));},_getResetLink:function(){return (t.createElement("a",{className:"_k7a",onClick:this._resetFilters},w._("Borrar todas las casillas")));},_getBreakdownSelectors:function(){var ca=[],da="_2asd",ea=this.props.event.breakdowns;for(var fa=ea.length-1;fa>=0;fa--){var ga=[],ha=ea[fa],ia=ha.buckets.filter(function(na){return !!na.display_name;}).sort(s.getStringSortFunction('display_name')).reverse();ga.push(t.createElement(y,{className:"_2li5",key:j.ALL,value:j.ALL,label:w._("Todas")}));for(var ja=ia.length-1;ja>=0;ja--){var ka=ia[ja];ga.push(t.createElement(y,{className:"_2li5",key:ka.name,value:ka.name,label:ka.display_name}));}if(ga.length>1)ca.push(t.createElement(x,{key:ha.name},t.createElement("div",{className:da},ha.display_name),t.createElement(o,{className:"_2ase",activeValue:this.state.filters[ha.name],buttonClass:"_3-8x",onItemChange:this._onFilterChange.bind(this,ha.name)},ga)));}var la=this.state.selected_custom_breakdown;if(la){var ma=this.getRawData(['COUNT',this.props.event.name]);if(ma instanceof h){ia=this._getFilteredBuckets(ma,la.activeValue);ca.push(t.createElement(x,{key:la.activeValue},t.createElement("div",{className:da},la.activeLabel),this._getCustomBucketsSelector(la.activeValue,ia)));}else ca.push(t.createElement(x,{key:la.activeValue},t.createElement("div",{className:da},la.activeLabel),t.createElement(r,{className:"_2asf",size:"small"})));}if(ca.length){return ca;}else return null;},_getExtraBreakdownSelector:function(){var ca=[],da=this.state.selected_custom_breakdown;if(!da)ca.push(t.createElement(u,{className:"_2li5",key:"staticOption",value:"staticOption",label:w._("Agregar otro")}));if(this.props.event.builtin_event_fields&&this.props.event.builtin_event_fields.length)this.props.event.builtin_event_fields.forEach(function(ea){ca.push(t.createElement(y,{className:"_2li5",key:ea.name,value:ea.name,label:ea.display_name}));});if(this.props.event.custom_event_fields&&this.props.event.custom_event_fields.length)this.props.event.custom_event_fields.forEach(function(ea){ca.push(t.createElement(y,{className:"_2li5",key:ea.name,value:ea.name,label:ea.display_name}));});if(ca.length>1)return (t.createElement(o,{className:"_2ase",activeValue:da?da.activeValue:null,buttonClass:"_3-8x",onItemChange:this._onCustomBreakdownChange},ca));return null;},_getFilteredBuckets:function(ca,da){var ea=i.customEventDisplayMinimums,fa=ca.groupBy(da),ga=Object.keys(fa).map(function(ha){return {bucketName:ha,count:fa[ha].getTotal()};}).sort(function(ha,ia){return ia.count-ha.count;}).slice(0,ea.max_num_for_dropdown).map(function(ha){return ha.bucketName;}).sort();return ga;},_getCustomBucketsSelector:function(ca,da){var ea=[];ea.push(t.createElement(y,{className:"_2li5",key:j.ALL,value:j.ALL,label:w._("Todas")}));if(da){var fa={};da.forEach(function(ga){if(ca==g.COUNTRY||ca==g.LOCALE){fa[l.getBucketLabel(ga,ca)]=ga;}else{var ha=l.getEventAndBreakdownSpecificBucketTranslation(this.props.event,ga,ca);fa[ha]=ga;}}.bind(this));Object.keys(fa).sort().forEach(function(ga){var ha=fa[ga];ea.push(t.createElement(y,{className:"_2li5",key:ha,value:ha,label:ga,title:ga}));});}return (t.createElement(o,{className:"_2ase",activeValue:this.state.filters[ca],buttonClass:"_3-8x",onItemChange:this._onFilterChange.bind(this,ca)},ea));}});e.exports=ba;},null);
__d("BonsaiPercentileSentence",["Image.react","InsightsNumUtils","React","cx","fbt","xuiglyph"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=i,n=m.PropTypes,o=i.createClass({displayName:"BonsaiPercentileSentence",propTypes:{data:n.array.isRequired,event:n.object.isRequired,hintPercentilePosition:n.number.isRequired,totalUsers:n.number.isRequired,type:n.oneOf(['event','value'])},getUserSentence:function(){var p=100-this.props.hintPercentilePosition,q=parseInt((((100-this.props.hintPercentilePosition)/100)*this.props.totalUsers).toFixed(0),10);if(this.props.type=='value'){if(this.props.event.name=='fb_mobile_purchase'){return this.getUserSpentSentence(p,q);}else return this.getUserValueSentence(p,q);}else return this.getUserEventsSentence(p,q);},getUserSpentSentence:function(p,q){return (i.createElement("span",null,k._("El {user_percentage} principal de personas que gastaron dinero {linebreak1} ({user_count} personas) representan el {linebreak2}{percentage} del gasto total.",[k.param("user_percentage",i.createElement("b",null,p+'%')),k.param("linebreak1",i.createElement("br",null)),k.param("user_count",i.createElement("b",null,h.prettyInt(q))),k.param("linebreak2",i.createElement("br",null)),k.param("percentage",i.createElement("b",null,this.getPercentageValueOfPercentile()+'%'))])));},getUserValueSentence:function(p,q){return (i.createElement("span",null,k._("El {user_percentage} principal de los usuarios que se registraron en este evento {linebreak1} ({user_count} personas) son responsables del {linebreak2}{percentage} de su valor total.",[k.param("user_percentage",i.createElement("b",null,p+'%')),k.param("linebreak1",i.createElement("br",null)),k.param("user_count",i.createElement("b",null,h.prettyInt(q))),k.param("linebreak2",i.createElement("br",null)),k.param("percentage",i.createElement("b",null,this.getPercentageValueOfPercentile()+'%'))])));},getUserEventsSentence:function(p,q){return (i.createElement("span",null,k._("El primer {user_percentage} de tus usuarios que registraron este evento {linebreak1} ({user_count}) es responsable {linebreak2} del {percentage} de estos eventos.",[k.param("user_percentage",i.createElement("b",null,p+'% ')),k.param("linebreak1",i.createElement("br",null)),k.param("user_count",i.createElement("b",null,h.prettyInt(q))),k.param("linebreak2",i.createElement("br",null)),k.param("percentage",i.createElement("b",null,this.getPercentageValueOfPercentile()+'%'))])));},render:function(){return (i.createElement("div",{className:"_35b-"},i.createElement(g,{className:"_3-8_",src:l({name:'info-solid',shade:'light'})}),this.getUserSentence()));},getPercentageValueOfPercentile:function(){var p=0,q=0;for(var r=0;r<100;r++){p+=this.props.data[r];if(r>=this.props.hintPercentilePosition)q+=this.props.data[r];}return ((q/p)*100).toFixed(2);}});e.exports=o;},null);
__d("FalcorCustomEventsPercentilesCard",["BonsaiErrorNotice","BonsaiPercentileChart","BonsaiPercentileSentence","BonsaiSelectorPanel","BonsaiText","CustomEventPercentilesLoaderMixin","DeveloperInsightsLogger","FalcorCard","FalcorHeaderSelector","FalcorLoadingCard","FalcorMenuSelector","FalcorNotice","InsightsContext","InsightsEventLogger","React","CustomEventPercentilesLoaderMixinResponseState","URI","XUIButton.react","XUIGrayText.react","cx","fbt","ReactXUIMenu"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();var ba=o.Item,ca=b('ReactXUIMenu').Item,da=u,ea=da.PropTypes,fa={title:aa._("Distribuci\u00f3n"),buttonText:aa._("Crear p\u00fablico personalizado"),selectorTitle:aa._("PER\u00cdODO DE RESUMEN"),subtitle:aa._("Ver los percentiles de usuarios que representan el mayor valor o actividad para este evento")},ga=[1,7,28],ha={day_1:aa._("D\u00eda"),day_7:aa._("7 d\u00edas"),day_28:aa._("28 d\u00edas")},ia=75,ja={count:'count',value:'amount',usdValue:'usd_amount'},ka=u.createClass({displayName:"FalcorCustomEventsPercentilesCard",mixins:[l],propTypes:{event:ea.object.isRequired,interval:ea.oneOf(ga)},getInitialState:function(){return {activeTab:ja.count,hintPercentilePosition:ia,selectedInterval:this.props.interval||ga[2]};},componentWillMount:function(){this.fetchPercentileMetrics(this.props,this._getIntervals());},componentWillReceiveProps:function(la){this.fetchPercentileMetrics(la,this._getIntervals());this.setState(this.getInitialState());},componentDidMount:function(){t.logCardView(this.props.cardKey.toLowerCase(),{card_section:this.state.activeTab,card_interval:this.state.selectedInterval,event:this.props.event.name});},componentDidUpdate:function(la,ma){if(this.props.event.name!=la.event.name||this.state.activeTab!==ma.activeTab||this.state.selectedInterval!==ma.selectedInterval)t.logCardView(this.props.cardKey.toLowerCase(),{card_section:this.state.activeTab,card_interval:this.state.selectedInterval,event:this.props.event.name});},_title:function(){return fa.title;},_subtitle:function(){return fa.subtitle;},render:function(){var la=this.getTotalUsersData(this.props.event.name);if(this.isAnyDataLoading(la))return u.createElement(p,null);var ma=[],na=this.getCountPercentileData(this.props.event.name);if(this.isAnyDataLoading(na))return u.createElement(p,null);var oa={};for(var pa=0;pa<this._getIntervals().length;pa++){var qa=this._getIntervals()[pa],ra=na[qa];oa[qa]={};if(ra.getState()===v.SUCCESS){if(ra.getPayload()){oa[qa].chart=(u.createElement(h,{data:ra.getPayload(),event:this.props.event,hintPercentilePosition:this.state.hintPercentilePosition,interval:qa,key:'day_'+qa,measurement:"count",onHintPercentileChange:this.onHintPercentileChange,totalUsers:la[qa].getPayload()}));oa[qa].type='event';}else delete oa[qa];}else if(ra.getState()===v.ERROR)oa[qa].error=u.createElement(g,{className:"_3-8t _3-96",key:'day_'+qa,message:ra.getPayload()});}var sa=this.getValuePercentileData(this.props.event.name);if(this.isAnyDataLoading(sa))return u.createElement(p,null);var ta={},ua=ja.value,va=false;for(pa=0;pa<this._getIntervals().length;pa++){qa=this._getIntervals()[pa];ra=sa[qa];ta[qa]={};if(ra.getState()===v.SUCCESS){if(ra.getPayload().data){var wa=this.props.event.name==='fb_mobile_purchase'?'spend':'value';ta[qa].chart=(u.createElement(h,{currency:ra.getPayload().isUSD?'USD':null,data:ra.getPayload().data,event:this.props.event,hintPercentilePosition:this.state.hintPercentilePosition,interval:qa,key:'day_'+qa,measurement:wa,onHintPercentileChange:this.onHintPercentileChange,totalUsers:la[qa].getPayload()}));ta[qa].type='value';ua=ra.getPayload().isUSD?ja.usdValue:ua;}else delete oa[qa];}else if(ra.getState()===v.ERROR){oa[qa].error=u.createElement(g,{className:"_3-8t _3-96",key:'day_'+qa,message:ra.getPayload()});}else if(ra.getState()==v.NO_DATA)va=true;}var xa=null,ya=null;if(oa){ma.push(u.createElement(ba,{key:ja.count,value:ja.count,label:k.percentile_by_count}));if(this.state.activeTab===ja.count){xa=this._renderChart(oa);ya=k.percentile_by_count;}}if(ta&&Object.keys(ta).length){ma.push(u.createElement(ba,{key:ua,value:ua,label:k.percentile_by_value}));if(this.state.activeTab===ua){xa=this._renderChart(ta);ya=k.percentile_by_value;}}var za=u.createElement(o,{headerKey:this.props.cardKey,onItemChange:this.onTabChange},ma);if(ma.length){return (u.createElement("div",null,this._renderNotice(),u.createElement(n,{title:this._title(),dropDown:za,helpText:{key:'CustomEventsDistributionValuesNoFilterTip',title:ya}},xa)));}else return null;},_renderNotice:function(){var la=new w("/docs/ads-for-apps/mobile-app-custom-audiences").setSubdomain("developers").toString(),ma=aa._("Segmentar anuncios con p\u00fablicos personalizados"),na=u.createElement("p",null,aa._("Combinar p\u00fablicos personalizados con los anuncios de interacci\u00f3n con aplicaciones es una forma eficaz de anunciarte a tus usuarios m\u00e1s valiosos o activos."),u.createElement("a",{href:la,target:"_blank"},' ',aa._("M\u00e1s informaci\u00f3n")));return (u.createElement(r,{noticeType:r.NoticeTypes.INFORMATION,message:ma,subtext:na}));},_renderChart:function(la){var ma=la[this.state.selectedInterval];if(!ma||(!ma.chart&&!ma.error)){return (u.createElement(g,{className:"_3-8j",message:k.errors.no_data}));}else if(ma.error)return ma.error;return (u.createElement(j,{customBreakdowns:ha,divider:false,showClientSelector:false,selectorTitle:fa.selectorTitle},ma.chart,u.createElement("div",{className:"_4zn_"},this._getIntervalSelector(),u.createElement(i,{data:ma.chart.props.data,event:ma.chart.props.event,hintPercentilePosition:this.state.hintPercentilePosition,interval:ma.chart.props.interval,totalUsers:ma.chart.props.totalUsers,type:ma.type}),this._getMACAButton())));},_getMACAButton:function(){var la={aln:'maca',alc:JSON.stringify({rule:{application:s.getObjID().toString(),days:this.state.selectedInterval.toString(),eventName:this.props.event.name,measurement:this.state.activeTab,percentile:this.state.hintPercentilePosition.toString()}})},ma=s.getAssociatedLegacyAdAccountIds();if(ma.length)la.act=ma[0];var na=new w('/ads/manage/audiences.php').addQueryData(la).toString();return (u.createElement(x,{className:"_4zo0",href:{url:na},label:fa.buttonText,onClick:this.onClickCreate,use:"confirm"}));},_getIntervalSelector:function(){var la=this._getIntervals().map(function(ma){return (u.createElement(ca,{className:"_2li5",key:ma,value:String(ma),label:ha['day_'+ma]}));},this);return (u.createElement("div",null,u.createElement(y,{className:"_2pis",shade:"light",size:"small",display:"block",weight:"bold"},aa._("En los \u00faltimos")),u.createElement(q,{className:"_5gr9",buttonClass:"_3-8x _3-9a",activeValue:String(this.state.selectedInterval),onItemChange:this.onIntervalSelectorChange},la)));},onTabChange:function(la){var ma=this._getIntervals();this.setState({activeTab:la,hintPercentilePosition:ia,selectedInterval:ma[ma.length-1]});},onIntervalSelectorChange:function(la){this.setState({selectedInterval:parseInt(la.activeValue,10)});},onHintPercentileChange:function(la){this.setState({hintPercentilePosition:la});},_getIntervals:function(la){la=la?la:this.props;return la.interval?[la.interval]:ga;},onClickCreate:function(event){m.logAction('appEventsConvertToMACA');}});e.exports=ka;},null);
__d("FalcorCustomEventsTrendsCard",["BonsaiApiBreakdown","BonsaiApiDataAdapter","BonsaiApiError","BonsaiBreakdownChart","FalcorBreakdownChartSwitcher","FalcorCard","FalcorHeaderSelector","FalcorLoadingCard","BonsaiErrorNotice","BonsaiSectionDataLoaderMixin","BonsaiStyle","BonsaiText","BonsaiTimeSeriesChart","BonsaiUtils","CustomEventSectionDataLoaderMixin","InsightsContext","InsightsEventLogger","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){b.__markCompiled&&b.__markCompiled();var aa=m.Item,ba=x,ca=ba.PropTypes,da=1,ea=7,fa=28,ga={avg_events_per_user_label:z._("N\u00famero promedio de eventos por usuario"),count_label:z._("Eventos"),installs_label:z._("Instalaciones"),stickiness_label:z._("Usuarios diarios activos\/usuarios mensuales activos (\u0025)"),events_title:z._("Cantidad de eventos"),installs_title:z._("Cantidad de instalaciones"),cohorts_title:z._("Grupos"),time_spent_title:z._("Sesiones"),trends_title:z._("Tendencias del evento"),values_title:z._("Valores del evento"),uniques_titles:{1:z._("Usuarios diarios"),7:z._("Usuarios semanales"),28:z._("Usuarios mensuales")},unique_users_title:z._("Usuarios activos"),daily_users_title:z._("Usuarios activos por d\u00eda"),stickiness_title:z._("Continuidad (Usuarios diarios activos\/usuarios mensuales activos)"),events_per_user_title:z._("Eventos por usuario"),value_labels:{normal:{value_title:z._("Valor"),value_label:z._("Valor"),avg_per_event_title:z._("Valor por evento"),avg_per_event_label:z._("Valor promedio por evento"),avg_per_user_title:z._("Valor por usuario"),avg_per_user_label:z._("Valor promedio por usuario")},fb_mobile_deactivate_app:{value_title:z._("Tiempo transcurrido en la aplicaci\u00f3n"),value_label:z._("Tiempo total en la aplicaci\u00f3n"),avg_per_event_title:z._("Duraci\u00f3n promedio de la sesi\u00f3n"),avg_per_event_label:z._("Duraci\u00f3n promedio de la sesi\u00f3n"),avg_per_user_title:z._("Tiempo promedio dedicado por usuario"),avg_per_user_label:z._("Tiempo promedio dedicado por usuario")}}},ha=[g.CLIENT,g.AGE,g.GENDER,g.ACQUISITION_SOURCE,g.IDENTITY_SOURCE],ia=x.createClass({displayName:"FalcorCustomEventsTrendsCard",mixins:[p,u],willApplyFilters:function(){return true;},propTypes:{event:ca.object.isRequired,breakdowns:ca.array,cardKey:ca.string.isRequired},getDefaultProps:function(){return {breakdowns:ha};},getInitialState:function(){var ja=g.NONE,ka=this._getDefaultSection();if(v.getActiveCardName()==this.props.cardKey){ja=v.getActiveBreakdownName()?v.getActiveBreakdownName():ja;ka=v.getActiveTabName()?v.getActiveTabName():ka;}return {currentBreakdown:ja,uniqueDaysPulled:[da],activeSection:ka};},_getDefaultSection:function(){var ja='counts';if(this.props.cardKey!=='trends')ja=this._isTimeSpentCard()?'value_per_event':'value';return ja;},componentWillMount:function(){this._fetchAllMetrics(this.props,this.state.currentBreakdown);},componentWillReceiveProps:function(ja){var ka=this.state.currentBreakdown;if(ja.event&&this.props.event.name!==ja.event.name){ka=g.NONE;this.setState(this.getInitialState());}var la=Object.keys(ja.filters).some(function(ma){return (ha.indexOf(ma)===-1);});if(la)this.setState({activeSection:this._getDefaultSection()});this._fetchAllMetrics(ja,ka);},componentDidMount:function(){w.logCardView(this.props.cardKey.toLowerCase(),{card_section:this.state.activeSection,card_breakdown:this.state.currentBreakdown||"",event:this.props.event.name});},componentDidUpdate:function(ja,ka){if(this.state.activeSection!==ka.activeSection||this.state.currentBreakdown!==ka.currentBreakdown)w.logCardView(this.props.cardKey.toLowerCase(),{card_section:this.state.activeSection,card_breakdown:this.state.currentBreakdown||"",event:this.props.event.name});},shouldAutoRefetch:function(){return true;},_fetchAllMetrics:function(ja,ka){var la=Object.keys(ja.filters),ma=!la.some(function(qa){return (ha.indexOf(qa)===-1);}),na=(la.length>0),oa=false;if(ka!==g.NONE&&!(ka in ja.filters)){la.push(ka);oa=true;}this.resetMetrics();this._addCustomEventMetric('COUNT',ja,la);var pa=[];if(ma){this._addCustomEventMetric('USERS',ja,la,da);pa.push(da);if(!oa){this._addCustomEventMetric('USERS',ja,la,ea);pa.push(ea);if(!na){this._addCustomEventMetric('USERS',ja,la,fa);pa.push(fa);}}}this.setState({uniqueDaysPulled:pa});this._addCustomEventMetric('SUM',ja,la);this._addCustomEventMetric('USD_SUM',ja,la);this.fetchMetrics();},_getBreakdownData:function(){var ja=this.getCustomEventData(['COUNT']),ka=Object.keys(ga.uniques_titles).map(function(na){return this.getCustomEventData(['USERS',parseInt(na,10)]);}.bind(this),this),la=this.getCustomEventData(['SUM']),ma=this.getCustomEventData(['USD_SUM']);return {count:ja,users:ka,sum:la,usdsum:ma};},_addCustomEventMetric:function(ja,ka,la,ma){var na={aggregateBy:ja};if(la)na.breakdowns=la;var oa=[ja];if(ma){na.intervals_to_aggregate=ma;oa.push(ma);}this.addCustomEventMetric(ka,oa,na);},_makeChartConfig:function(ja,ka,la){if(!ja)return null;return {data:ja,title:ka,type:'lines',color:la};},_createMenuOption:function(ja,ka){return (x.createElement(aa,{key:ja,value:ja,label:ka}));},_onExportClick:function(){return this.refs[this.state.activeSection].getExportData();},_trendChartTabPopulator:function(ja,ka,la,ma,na){var oa=[];if(this.props.breakdowns.length>1)oa.push(x.createElement(s,{currentCard:this.props.cardKey,disableRangeSelection:ma,configs:ka,currency:la,float:na,key:g.NONE,seconds:this._isTimeSpentCard()}));this.props.breakdowns.forEach(function(qa){oa.push(x.createElement(j,{breakdown:qa,currentCard:this.props.cardKey,currency:la,data:ka[0].data,disableRangeSelection:ma,float:na,key:qa,shouldStack:false,sort:"bucket",seconds:this._isTimeSpentCard()}));},this);var pa=!(ja==='trend'||ja==='sticky');return (x.createElement(k,{ref:ja,currentCard:this.props.cardKey,defaultBreakdown:g.NONE,onBreakdownChange:this._onBreakdownChange,showClientSelector:false,showBreakdownSelector:pa},oa));},_onTabChange:function(ja){if(ja==='trend'||ja==='sticky'){v.setActiveCardName(this.props.cardKey);if(this.state.currentBreakdown!==g.NONE){v.setActiveBreakdownName(g.NONE);v.addCardState(this.props.cardKey,{breakdown:g.NONE});this._onBreakdownChange(g.NONE);}}this.setState({activeSection:ja});},_helpText:{counts:'CustomEventsCount',trend:'CustomEventsUsers',daily:'CustomEventsDaily',sticky:'CustomEventsSticky',events_per_user:'CustomEventsAverageEventsPerUser',value:'CustomEventsValue',value_per_event:'CustomEventsAverageValuePerEvent',value_per_user:'CustomEventsAverageValuePerUser'},render:function(){var ja=null,ka=null,la=[],ma=this.props.cardKey==='trends',na=this._getBreakdownData(),oa=this.props.event.name==='fb_mobile_first_app_launch',pa=this._makeChartConfig(na.count,oa?ga.installs_label:ga.count_label,q.CHART_THEME.areas.colors[0]);if(!this._isTimeSpentCard()&&ma){var qa=oa?ga.installs_title:ga.events_title;if(this.state.activeSection==='counts'){ja=this._trendChartTabPopulator('counts',[pa],null,false);ka=qa;}la.push(this._createMenuOption('counts',qa));}var ra=0,sa=this.state.uniqueDaysPulled.map(function(pb){return this._makeChartConfig(na.users[ra],ga.uniques_titles[pb],q.CHART_THEME.areas.colors[ra++]);},this);if(sa.length!==0&&!oa&&!this._isTimeSpentCard()&&ma){if(this.state.activeSection==='trend'){ja=this._trendChartTabPopulator('trend',sa,null,true);ka=ga.unique_users_title;}la.push(this._createMenuOption('trend',ga.unique_users_title));if(this.state.activeSection==='daily'){ja=this._trendChartTabPopulator('daily',[sa[0]],null,true);ka=ga.daily_users_title;}la.push(this._createMenuOption('daily',ga.daily_users_title));if(this.state.activeSection==='sticky'){var ta=sa[0].data;if(sa.length>2){ta=ta.divideBy(sa[2].data);ta.setValueFormatter(function(pb){return parseFloat(pb,10)*100;});}var ua=this._makeChartConfig(ta,ga.stickiness_label,q.CHART_THEME.areas.colors[0]);ja=this._trendChartTabPopulator('sticky',[ua],null,true);ka=ga.stickiness_title;}la.push(this._createMenuOption('sticky',ga.stickiness_title));}var va=t.getSumData(na.count,na.sum),wa=t.getSumData(na.count,na.usdsum),xa=ga.value_labels.normal,ya=ga.value_labels[this.props.event.name];if(ya)xa=ya;var za=xa.value_label,ab=xa.avg_per_user_label,bb=xa.avg_per_event_label,cb,db,eb,fb=this.props.filters;if(wa&&!(fb&&fb.fb_currency)){cb=wa;db='USD';}else{cb=va;db=fb&&fb.fb_currency?fb.fb_currency:null;}if(db){eb=r.getLocalizedCurrencyName(db);za=z._("Valor en {currency}",[z.param("currency",eb)]);ab=z._("Valor en {currency} por usuario",[z.param("currency",eb)]);bb=z._("Valor en {currency} por evento",[z.param("currency",eb)]);}var gb=this._makeChartConfig(cb,za,q.CHART_THEME.areas.colors[0]),hb=sa.some(function(pb){return !(pb.data instanceof h);});if(hb||!(pa.data instanceof h)||(gb&&!(gb.data instanceof h))){if(pa.data instanceof i||(gb&&gb.data instanceof i)){var ib=pa.data instanceof i?pa.data.getMessage():gb.data.getMessage();return (x.createElement(o,{className:"_3-8t",message:ib}));}return x.createElement(n,null);}var jb=null;if(sa.length>0)jb=this._makeChartConfig(pa.data.divideBy(sa[0].data),ga.avg_events_per_user_label,q.CHART_THEME.areas.colors[1]);if(!oa&&jb&&jb.data&&jb.data.getTotal()&&!this._isTimeSpentCard()&&ma){if(this.state.activeSection==='events_per_user'){ja=this._trendChartTabPopulator('events_per_user',[jb],null,true,true);ka=ga.events_per_user_title;}la.push(this._createMenuOption('events_per_user',ga.events_per_user_title));}if(gb&&!ma){if(this.state.activeSection==='value'){ja=this._trendChartTabPopulator('value',[gb],db,false);ka=xa.value_title;}if(!this._isTimeSpentCard())la.push(this._createMenuOption('value',xa.value_title));var kb=this._makeChartConfig(cb.divideBy(pa.data),xa.avg_per_event_label,q.CHART_THEME.areas.colors[1]);if(kb.data&&kb.data.getTotal()){if(this.state.activeSection==='value_per_event'){ja=this._trendChartTabPopulator('value_per_event',[kb],db,true,!db);ka=xa.avg_per_event_title;}la.push(this._createMenuOption('value_per_event',xa.avg_per_event_title));}var lb=null;if(sa.length>0)lb=this._makeChartConfig(cb.divideBy(sa[0].data),xa.avg_per_user_label,q.CHART_THEME.areas.colors[0]);if(lb&&lb.data&&lb.data.getTotal()){if(this.state.activeSection==='value_per_user'){ja=this._trendChartTabPopulator('value_per_user',[lb],db,true,!db);ka=xa.avg_per_user_title;}la.push(this._createMenuOption('value_per_user',xa.avg_per_user_title));}}var mb=null;if(this._isTimeSpentCard()){la.push(this._createMenuOption('value',xa.value_title));mb=ga.time_spent_title;}else if(ma){mb=this.props.event.display_name;}else mb=this.props.event.display_name;if(!ja)return null;var nb=x.createElement(m,{headerKey:this.props.cardKey,onItemChange:this._onTabChange},la),ob=this.props.event.name+'+'+this.state.activeSection+'+'+this.state.currentBreakdown;return (x.createElement(l,{title:mb,getExportData:this._onExportClick,exportFilename:ob,dropDown:nb,helpText:{key:this._helpText[this.state.activeSection],title:ka}},ja));},_onBreakdownChange:function(ja){this.setState({currentBreakdown:ja});this._fetchAllMetrics(this.props,ja);},_isTimeSpentCard:function(){if(!v.getShowNewTimeSpentUI())return false;return this.props.event.name==='fb_mobile_deactivate_app';}});e.exports=ia;},null);
__d("FalcorCustomEventsOverviewCard",["BonsaiApiDataAdapter","BonsaiApiError","BonsaiApiPromise","BonsaiColors","BonsaiConstants","BonsaiContextualHelp","BonsaiErrorNotice","BonsaiSectionDataLoaderMixin","BonsaiSections","BonsaiText","BonsaiTooltip","BonsaiUtils","FalcorCard","FalcorPaginatedDataTable","FalcorPercentageBar","InsightsContext","InsightsEventLogger","InsightsNumUtils","InsightsUtils","React","XUISpinner.react","copyProperties","cx","fbt","d3/time/day"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){b.__markCompiled&&b.__markCompiled();'use strict';var fa=z,ga=fa.PropTypes,ha={users:da._("N\u00famero de eventos \u00fanicos que completaron este evento durante el intervalo de fechas seleccionado")},ia=function(oa){return function(pa){if(!pa||pa.time_series instanceof i)return (z.createElement("div",null,z.createElement(aa,{background:"light",size:"small"})));if(pa.time_series instanceof h)return (z.createElement(m,{className:"_3-8t _3-96",message:pa.time_series.getMessage()}));if(pa.is_empty)return z.createElement("div",null,"-");if(pa.string){var qa=pa.value<0?'- '+pa.string:'+ '+pa.string;return (z.createElement("div",{className:pa.className},qa));}if(pa.currency)return x.prettyShortCurrency(pa.currency,pa.value);return x.prettyShortInt(pa.value);};},ja=function(oa){if(!oa)return z.createElement("div",null);return (z.createElement("a",{className:"_5igp",href:r.getSectionInsightsURI(o.CUSTOM_EVENTS,oa.name)},oa.value));},ka=function(oa,pa){return function(qa,ra){if(!ra||!ra[oa])return -1;if(!qa||!qa[oa])return 1;if(pa)return ra[oa].value.localeCompare(qa[oa].value);return (ra[oa].value||0)-(qa[oa].value||0);};},la=[{id:"name",label:da._("Nombre"),sortable:true,comparator:ka('name',true),cellRenderer:ja,width:150},{id:'count',label:p.count,sortable:true,comparator:ka('count'),cellRenderer:ia('count'),width:150},{id:'pop',label:da._("Per\u00edodo\/Per\u00edodo"),sortable:true,comparator:ka('pop'),cellRenderer:ia('pop'),width:150},{id:'today',label:da._("Recuento de hoy"),sortable:true,comparator:ka('today'),cellRenderer:ia('today'),width:150},{id:'users',label:z.createElement("span",null,da._("Usuarios \u00fanicos"),z.createElement(q,{tooltip:ha.users})),sortable:true,comparator:ka('users'),cellRenderer:ia('users'),width:150},{id:'value',label:p.value,sortable:true,comparator:ka('value'),cellRenderer:ia('value'),width:150}],ma={is_empty:true},na=z.createClass({displayName:"FalcorCustomEventsOverviewCard",mixins:[n],propTypes:{socialPluginEventsOnly:ga.bool.isRequired},componentWillMount:function(){this._fetchAllMetrics();},componentWillReceiveProps:function(oa){var pa=this.props.visibleDateRange.since!=oa.visibleDateRange.since||this.props.visibleDateRange.until!=oa.visibleDateRange.until;if(pa){var qa=ba({},this.state.apiData),ra=this._getEventsToDisplay();ra.forEach(function(event){delete qa.USERS[event.name];var sa={aggregateBy:'USERS',event_name:event.name,intervals_to_aggregate:oa.dateRangeLengths.visibleLength+1};this.addMetric(['USERS',event.name],'app_event',sa);}.bind(this));this.setState({apiData:qa});this.fetchMetrics(true);}},componentDidMount:function(){w.logCardView('events_overview',{});},_getEventsToDisplay:function(){var oa;if(this.props.socialPluginEventsOnly){oa=(function(pa){return pa.name.startsWith(k.SOCIAL_PLUGIN_EVENT_PREFIX);});}else oa=(function(pa){return !pa.name.startsWith(k.SOCIAL_PLUGIN_EVENT_PREFIX);});return v.getCustomEvents().filter(oa);},_getTodayCount:function(oa){var pa=y.getMostRecentPacificDayBegin(new Date()),qa=y.localTimeToPacificDate(new Date());return this.state.apiData.COUNT[oa].getTotal({since:pa,until:qa});},_getDelta:function(oa,pa){var qa=this.props.dateRangeLengths.visibleLength,ra=this.props.dateRangeLengths.remainingLength;if(qa>ra)return null;var sa=this.state.apiData.COUNT[oa].getTotal({since:ea.offset(this.props.visibleDateRange.since,-1*(qa+1)),until:ea.offset(this.props.visibleDateRange.since,-1)});return r.calculatePercentageChange(pa,sa);},_fetchAllMetrics:function(){this.resetMetrics();var oa=this._getEventsToDisplay();oa.forEach(function(event){['COUNT','SUM','USD_SUM','USERS'].forEach(function(pa){var qa={aggregateBy:pa,event_name:event.name};if(pa=='USERS')qa.intervals_to_aggregate=this.props.dateRangeLengths.visibleLength+1;this.addMetric([pa,event.name],'app_event',qa);}.bind(this));}.bind(this));this.fetchMetrics();},shouldComponentUpdate:function(oa,pa){if(!this.state.updateSequence||this.state.updateSequence!=pa.updateSequence||this.props.visibleDateRange.since!=oa.visibleDateRange.since||this.props.visibleDateRange.until!=oa.visibleDateRange.until)return true;return false;},_onSearchChange:function(oa){this.refs.table.onSearchChange(oa);},render:function(){var oa=this._getEventsToDisplay(),pa=[],qa=0;oa.forEach(function(event){if(v.getShowNewTimeSpentUI()&&event.name=='fb_mobile_deactivate_app')return;var gb=this.getData(['COUNT',event.name]),hb=this.getData(['SUM',event.name]),ib=this.getData(['USD_SUM',event.name]),jb=this.getData(['USERS',event.name]),kb={count_data:null,display_name:event.display_name,name:event.name,sum_data:null,usd_sum_data:null,users_data:null};kb.count_data=gb;kb.sum_data=r.getSumData(gb,hb);kb.usd_sum_data=r.getSumData(gb,ib);kb.users_data=jb;pa.push(kb);if(gb instanceof i)qa++;}.bind(this));var ra=[];for(var sa=0;sa<pa.length;sa++){var ta=null,ua=null,va=null;if(pa[sa].count_data instanceof g){ta={time_series:pa[sa].count_data,value:pa[sa].count_data.getTotal()};var wa=this._getDelta(pa[sa].name,ta.value);ua=wa?wa:ma;ua.time_series=pa[sa].count_data;va={time_series:pa[sa].count_data,value:this._getTodayCount(pa[sa].name)};}else if(pa[sa].count_data instanceof h){ta={time_series:pa[sa].count_data,value:0};ua=ma;va=ma;}var xa=null;if(pa[sa].name==='fb_mobile_first_app_launch'){xa=ma;}else if(pa[sa].users_data instanceof g){xa={time_series:pa[sa].users_data,value:pa[sa].users_data.getLatestTotal()};}else if(pa[sa].users_data instanceof h)xa={time_series:pa[sa].users_data,value:0};var ya=null,za=null,ab=null;if(pa[sa].usd_sum_data instanceof g||pa[sa].usd_sum_data instanceof i){za=pa[sa].usd_sum_data;ab='USD';}else if(pa[sa].sum_data instanceof g||pa[sa].sum_data instanceof i)za=pa[sa].sum_data;if(ta)if(pa[sa].count_data instanceof h){za=ta.time_series;}else za=r.getSumData(ta.time_series,za);if(za){ya={currency:ab,time_series:za,value:za instanceof g?za.getTotal():null};}else ya=ma;var bb={name:{name:pa[sa].name,value:pa[sa].display_name},count:ta,pop:ua,today:va,users:xa,value:ya,key:pa[sa].name};if(ta&&(ta.value||ta.time_series instanceof h))ra.push(bb);}var cb=null;if(ra.length)cb=z.createElement(t,{ref:"table",columns:la,searchFieldName:"key",rows:ra,searchString:this.state.searchString||'',pageSize:Infinity});var db=null;if(qa){var eb=[[pa.length-qa,j.ANALYTICS_BLUE],[qa,j.BLUEGRAY10]],fb=da._("{percentage} cargado",[da.param("percentage",x.prettyPercent((pa.length-qa)/pa.length))]);db=z.createElement(u,{className:"_3-96",label:fb,data:eb});}return (z.createElement(s,{onSearchChange:this._onSearchChange,showLine:false},db,cb,z.createElement(l,{helpKey:"CustomEventsOverviewTable"})));}});e.exports=na;},null);
__d("FalcorOverviewBarMixin",["BonsaiUtils","Grid.react","InsightsNumUtils","React","cx","joinClasses","d3/time/day"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=h.GridItem,o={_renderOverview:function(p,q,r,s,t){if(!p)return null;var u=p.getTotal();if(!u)return null;var v=p.getLatestTotal(),w=s?v:u;if(t){w=w>100?i.prettyShortCurrency(t,w):i.prettyCurrency(t,w);}else w=w>100?i.prettyShortInt(w):i.prettyFloat(Math.round(w*10)/10);return (j.createElement(n,{key:r},j.createElement("div",{className:"_5i7a"},r,this._renderDelta(p,q,s)),j.createElement("span",{className:"_134p"},w)));},_renderDelta:function(p,q,r){if(!this._checkPoPAvailability())return null;var s=null;if(r){s=g.calculatePercentageChange(p.getLatestTotal(),p.getOldestTotal());}else{var t=p.getTotal();s=this._getDelta(q,t);}var u=l(s.value<0?s.className:"_5i78","_134f"),v='/';return (j.createElement("span",null,j.createElement("span",{className:"_5lg9"},v),j.createElement("span",{className:u},s.value<0?'-'+s.string:'+'+s.string)));},_checkPoPAvailability:function(){var p=this.props.dateRangeLengths.visibleLength,q=this.props.dateRangeLengths.remainingLength;return p<=q;},_getDelta:function(p,q){var r=this.props.dateRangeLengths.visibleLength,s=p.getTotal({since:m.offset(this.props.visibleDateRange.since,-1*(r+1)),until:m.offset(this.props.visibleDateRange.since,-1)});return g.calculatePercentageChange(q,s);}};e.exports=o;},null);
__d("FalcorCustomEventsOverviewKeyEventsCard",["BonsaiApiBreakdown","BonsaiApiDataAdapter","BonsaiApiError","BonsaiErrorNotice","BonsaiSectionDataLoaderMixin","BonsaiUtils","CustomEventSectionDataLoaderMixin","FalcorCard","FalcorLoadingCard","FalcorOverviewBarMixin","Grid.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();'use strict';var u=r,v=u.PropTypes,w=1,x=7,y=28,z=[g.CLIENT,g.AGE,g.GENDER,g.ACQUISITION_SOURCE,g.IDENTITY_SOURCE],aa=r.createClass({displayName:"FalcorCustomEventsOverviewKeyEventsCard",mixins:[k,m,p],propTypes:{event:v.object.isRequired},getInitialState:function(){return {uniqueDaysPulled:[w]};},componentWillMount:function(){this._fetchAllMetrics(this.props);},componentWillReceiveProps:function(ba){this._fetchAllMetrics(ba);},shouldAutoRefetch:function(){return true;},willApplyFilters:function(){return true;},_fetchAllMetrics:function(ba){var ca=Object.keys(ba.filters),da=!ca.some(function(ga){return (z.indexOf(ga)===-1);}),ea=(ca.length>0);this.resetMetrics();this._addCustomEventMetric('COUNT',ba,ca);var fa=[];if(da){this._addCustomEventMetric('USERS',ba,ca,w);fa.push(w);this._addCustomEventMetric('USERS',ba,ca,x);fa.push(x);if(!ea){this._addCustomEventMetric('USERS',ba,ca,y);fa.push(y);}}this.setState({uniqueDaysPulled:fa});this._addCustomEventMetric('SUM',ba,ca);this._addCustomEventMetric('USD_SUM',ba,ca);this.fetchMetrics();},_addCustomEventMetric:function(ba,ca,da,ea){var fa={aggregateBy:ba};if(da)fa.breakdowns=da;var ga=[ba];if(ea){fa.intervals_to_aggregate=ea;ga.push(ea);}this.addCustomEventMetric(ca,ga,fa,true);},_getBreakdownData:function(ba){var ca=this.getCustomEventData(['COUNT'],ba),da=this.state.uniqueDaysPulled.map(function(ga){return this.getCustomEventData(['USERS',ga],ba);}.bind(this)),ea=this.getCustomEventData(['SUM'],ba),fa=this.getCustomEventData(['USD_SUM'],ba);return {count:ca,users:da,sum:ea,usdsum:fa};},_getValueData:function(ba){var ca=l.getSumData(ba.count,ba.sum),da=l.getSumData(ba.count,ba.usdsum),ea=this.props.filters;if(da&&!(ea&&ea.fb_currency))return {valueData:da,currencyCode:'USD'};return {valueData:ca,currencyCode:ea&&ea.fb_currency?ea.fb_currency:null};},_renderErrorOrLoading:function(ba,ca){var da=ba.users.some(function(fa){return !(fa instanceof h);});if(da||!(ba.count instanceof h)||(ca&&!(ca instanceof h))){if(ba.count instanceof i||ca instanceof i){var ea=ba.count instanceof i?ba.count.getMessage():ca.getMessage();return (r.createElement(j,{className:"_3-8t",message:ea}));}return r.createElement(o,null);}return null;},render:function(){var ba=[],ca=this._getBreakdownData(false),da=this._getBreakdownData(true),ea=this.props.event.name==='fb_mobile_first_app_launch',fa=this._getValueData(ca),ga=fa.currencyCode,ha=fa.valueData,ia=this._getValueData(da).valueData,ja=this._renderErrorOrLoading(ca,ha);if(ja)return ja;ba.push(this._renderOverview(ca.count,da.count,t._("EVENTOS TOTALES"),false));if(this.state.uniqueDaysPulled.length!==0&&!ea)ba.push(this._renderOverview(ca.count.divideBy(ca.users[0]),da.count.divideBy(da.users[0]),t._("EVENTOS POR USUARIO"),false));var ka={};ka[w]=t._("USUARIOS DIARIOS");ka[x]=t._("USUARIOS SEMANALES");ka[y]=t._("USUARIOS MENSUALES");var la=0;if(!ea)this.state.uniqueDaysPulled.forEach(function(ma){ba.push(this._renderOverview(ca.users[la],da.users[la],ka[ma],true));la++;}.bind(this));if(ha){ba.push(this._renderOverview(ha,ia,t._("VALOR TOTAL"),false,ga));ba.push(this._renderOverview(ha.divideBy(ca.users[0]),ia.divideBy(da.users[0]),t._("PROMEDIO POR USUARIO"),false,ga));ba.push(this._renderOverview(ha.divideBy(ca.count),ia.divideBy(da.count),t._("PROMEDIO POR EVENTO"),false,ga));}return (r.createElement(n,{className:"_134q"},r.createElement(q,{cols:5},ba)));}});e.exports=aa;},null);
__d("BonsaiCard",["InsightsCard.react","React","XUICard.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h.createClass({displayName:"BonsaiCard",render:function(){if(!this.props.title){return (h.createElement(i,h.__spread({},this.props,{className:k(this.props.className,"_qu-")}),this.props.children));}else return (h.createElement(g,h.__spread({},this.props,{className:k(this.props.className,"_5dop")}),this.props.children));}});e.exports=l;},null);
__d("BonsaiRecentCustomEventsTable",["AccessibleTableParts.react","BonsaiErrorNotice","BonsaiText","InsightsNumUtils","React","XUITable.react","cx","fbt","formatDate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=g.HeadRow,q=g.BodyRow,r=k,s=r.PropTypes,t=k.createClass({displayName:"BonsaiRecentCustomEventsTable",propTypes:{config:s.object.isRequired,events:s.array.isRequired},render:function(){var u="_54_7",v=this.props.events.map(function(event){var w=parseFloat(event.n,10);if(!event.n){w='';}else if(w%1){w=j.prettyFloat(parseFloat(w.toFixed(2)));}else w=j.prettyInt(w);var x=this.props.config.events[event.e],y=x?x.display_name:null;return (k.createElement(q,{key:event.id},k.createElement("td",null,o(event.t,'m/d/y H:i:s')),k.createElement("td",null,event.c),k.createElement("td",null,event.v=='u'?i.unknown:event.v),k.createElement("td",null,y),k.createElement("td",{className:u},w),k.createElement("td",null,this._renderParamsTable(event))));},this);if(!v||!v.length)return (k.createElement(h,{className:"_3-8t _3-96",message:n._("No hay eventos disponibles para los filtros seleccionados.")}));return (k.createElement(l,{key:"table",outerBorder:true},k.createElement("thead",null,k.createElement(p,null,k.createElement("th",null,n._("Tiempo registrado")),k.createElement("th",null,i.breakdowns.client),k.createElement("th",null,i.app_version),k.createElement("th",null,i.event),k.createElement("th",{className:u},i.value),k.createElement("th",null,i.parameters))),k.createElement("tbody",null,v)));},_renderParamsTable:function(u){if(!u)return null;var v=this.props.config.events[u.e];if(!v)return null;if(!u.s||Object.keys(u.s).length===0)return k.createElement("div",null);var w={};Object.keys(v.segments).forEach(function(y){w[v.segments[y].column]=v.segments[y].display_name;});var x=[];Object.keys(u.s).forEach(function(y){if(w[y])x.push(k.createElement(q,{key:y},k.createElement("td",null,w[y]),k.createElement("td",null,u.s[y])));});return (k.createElement(l,{outerBorder:true},k.createElement("tbody",null,x)));}});e.exports=t;},null);
__d("XBonsaiAppEventsUpdateLastNSettingsAsyncController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/insights\/app_events_last_n\/update\/",{app_id:{type:"Int",required:true},version_filter:{type:"String"},event_name_filter:{type:"String"},viewer_only_filter:{type:"Int"},attribution_id_filter:{type:"String"}});},null);
__d("MostRecentEventsLoaderMixin",["AsyncRequest","BonsaiApiError","BonsaiCard","BonsaiConfig","InsightsContext","BonsaiContextualHelp","BonsaiRecentCustomEventsTable","BonsaiErrorNotice","BonsaiText","BonsaiTooltip","Image.react","InputLabel.react","InsightsLoadingIndicator.react","LeftRight.react","React","XBonsaiAppEventsLastNAsyncController","XBonsaiAppEventsUpdateLastNSettingsAsyncController","XUIButton.react","XUICardSection.react","XUIRadioInput.react","XUISelector.react","XUITextInput.react","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){b.__markCompiled&&b.__markCompiled();var fa=aa.Option,ga=null,ha=null,ia='_default',ja='device_me',ka='device_id',la={getInitialState:function(){return {activeVersionFilter:ia,activeNameFilter:ia,activeDeviceFilter:ia,deviceId:"",appVersions:null,eventsConfig:null,data:null};},componentWillMount:function(){this._refreshData();},componentWillUpdate:function(ma,na){if(!this.state.data&&!na.data)this._refreshData();},_refreshData:function(){if(ga)return;var ma=v.getURIBuilder().setInt('app_id',k.getObjID()).getURI();ga=new g().setURI(ma).setMethod('POST').setReadOnly(true).setHandler(this._onResponse).setErrorHandler(this._onError).send();},_onError:function(ma){ga=null;this.setState({data:new h()});},_onResponse:function(ma){ga=null;this.setState({activeVersionFilter:ma.payload.config.v||ia,activeNameFilter:ma.payload.config.e||ia,activeDeviceFilter:ma.payload.config.u?ja:ma.payload.config.a?ka:ia,appVersions:ma.payload.config.appVersions,eventsConfig:ma.payload.config.events,data:ma.payload,deviceId:ma.payload.config.a&&this.state.deviceId===''?'Previously entered device':this.state.deviceId});},_updateFilters:function(ma,na){var oa=w.getURIBuilder().setInt('app_id',k.getObjID()).setString('version_filter',ma).setString('event_name_filter',na).setInt('viewer_only_filter',this.state.activeDeviceFilter===ja?1:0).setString('attribution_id_filter',this.state.activeDeviceFilter===ka?this.state.deviceId:null).getURI();ga=ha=new g().setURI(oa).setHandler(this._onUpdateResponse).setErrorHandler(this._onUpdateError).send();this.forceUpdate();},_onUpdateResponse:function(ma){ha=null;ga=null;setTimeout(this._refreshData,5000);},_onUpdateError:function(ma){ha=null;ga=null;this._refreshData();},_onVersionChange:function(ma){this.setState({activeVersionFilter:ma.value,data:null});this._updateFilters(ma.value,null);},_onNameChange:function(ma){this.setState({activeNameFilter:ma.value,data:null});this._updateFilters(null,ma.value);},_onDeviceChange:function(ma){this.setState({activeDeviceFilter:ma.target.value});},_onApplyDeviceFilter:function(ma){this.setState({data:null});this._updateFilters(null,null);},_onRefresh:function(){this.setState({data:null});this._refreshData();},render:function(){var ma=null;if(!this.state.data){ma=u.createElement(s,{key:"load"});}else if(this.state.data instanceof h||!this.state.data.events||!this.state.data.events.length){var na=null;if(!this.state.data.events||!this.state.data.events.length)na=da._("Todav\u00eda no hay eventos coincidentes.");ma=u.createElement(n,{className:"_3-8t _3-96",key:"error",message:na,short:!!na});}else ma=u.createElement(m,{key:"table",config:this.state.data.config,events:this.state.data.events});return this._renderOuterChrome([this._renderFiltersCard(),ma]);},_renderFiltersCard:function(){var ma=this.state.activeVersionFilter||ia,na=this.state.activeNameFilter||ia,oa=[u.createElement(fa,{value:ia,key:'version_default'},da._("Todas las versiones"))],pa=[u.createElement(fa,{value:ia,key:'name_default'},da._("Todos los eventos"))],qa=ma===ia;if(this.state.appVersions&&Object.keys(this.state.appVersions).length){var ra=Object.keys(this.state.appVersions).sort();ra.forEach(function(ua){if(ma===ua)qa=true;oa.push(u.createElement(fa,{value:ua,key:'version_'+ua},ua));});}if(!qa)oa.push(u.createElement(fa,{value:ma,key:'version_'+ma},ma));var sa=na===ia;if(this.state.eventsConfig&&Object.keys(this.state.eventsConfig).length){var ta=Object.keys(this.state.eventsConfig).sort();ta.forEach(function(ua){if(na===ua)sa=true;var event=this.state.eventsConfig[ua];pa.push(u.createElement(fa,{value:ua,key:'name_'+ua},event.display_name));},this);}if(!sa)pa.push(u.createElement(fa,{value:na,key:'name_'+na},na));return (u.createElement(i,{key:"filters"},u.createElement(y,{background:"light-wash",className:"pam"},u.createElement(t,null,u.createElement("span",{className:"fwb"},o.filters),u.createElement("span",null,u.createElement(x,{className:"mll",disabled:!!ga,image:u.createElement(q,{src:ea('/images/mobile/glyph/refresh-right_blue_s-1.5x.png')}),label:da._("Actualizar"),onClick:this._onRefresh,size:"medium",use:"default"})))),u.createElement(y,{className:"pam"},u.createElement(aa,{className:"mrs",disabled:!k.isUserDeveloper()||ha,onChange:this._onVersionChange,size:"medium",value:ma},oa),u.createElement(aa,{className:"mrl",disabled:!k.isUserDeveloper()||ha,onChange:this._onNameChange,size:"medium",value:na},pa)),this._renderDeviceFilter(),u.createElement(y,{className:"_36ve pam"},u.createElement(l,{helpKey:"CustomEventsRecentEventsHint"}))));},_renderDeviceFilter:function(){if(j.showRecentEventsFilterByDevice){var ma=da._("Es necesario que hayas iniciado sesi\u00f3n en la aplicaci\u00f3n para celulares de Facebook en tu dispositivo o simulador, o que hayas iniciado sesi\u00f3n con el inicio de sesi\u00f3n de Facebook en tu aplicaci\u00f3n."),na=da._("Para dispositivos iOS, debe ser el IDFA. Para dispositivos Android, debe ser el identificador de publicidad de los servicios de Google Play.");return (u.createElement(y,{className:"pal"},u.createElement(t,null,u.createElement("div",null,u.createElement(r,{style:{verticalAlign:'middle'}},u.createElement(z,{checked:this.state.activeDeviceFilter===ia,name:"device_filter",value:ia,onChange:this._onDeviceChange,disabled:!!ga}),u.createElement("label",null,da._("Todos los eventos"))),u.createElement(r,{style:{verticalAlign:'middle'}},u.createElement(z,{checked:this.state.activeDeviceFilter===ja,name:"device_filter",value:ja,onChange:this._onDeviceChange,disabled:!!ga}),u.createElement("label",null,da._("Solo mis eventos"),u.createElement(p,{tooltip:ma}))),u.createElement(r,{display:"inline",style:{verticalAlign:'middle',marginLeft:'0px'},className:"mrs"},u.createElement(z,{checked:this.state.activeDeviceFilter===ka,name:"device_filter",value:ka,onChange:this._onDeviceChange,disabled:!!ga}),u.createElement("label",null,da._("Eventos de este identificador de dispositivo:"),u.createElement(p,{tooltip:na}))),u.createElement(ba,{style:{verticalAlign:'middle',display:'inline'},value:this.state.deviceId,onChange:function(oa){return this.setState({deviceId:oa.target.value});}.bind(this),placeholder:'Ex. 50b1f7b1-326c-427b-a5d8-ddcdcfc12843',size:"36"})),u.createElement(x,{className:"mls",style:{verticalAlign:'middle'},onClick:this._onApplyDeviceFilter,label:da._("Aplicar"),disabled:!!ga}))));}}};e.exports=la;},null);
__d("FalcorMostRecentEventsCard",["FalcorCard","InsightsEventLogger","MostRecentEventsLoaderMixin","React"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=j.createClass({displayName:"FalcorMostRecentEventsCard",mixins:[i],componentDidMount:function(){h.logCardView('recent_events',{});},_renderOuterChrome:function(l){return (j.createElement(g,null,l));}});e.exports=k;},null);
__d("FalcorCustomEventsSectionController",["BonsaiAppEventTypesUtils","BonsaiSections","BonsaiSectionDisplayNames","FalcorSectionDateRangeMixin","FalcorSectionRendererMixin","CustomEventLinks","FalcorCustomEventsBreakdownCard","FalcorCustomEventsDemoCard","FalcorCustomEventsFilterBar","FalcorCustomEventsPercentilesCard","FalcorCustomEventsTrendsCard","FalcorCustomEventsOverviewCard","FalcorCustomEventsOverviewKeyEventsCard","FalcorEmptyFeatureCard","FalcorMostRecentEventsCard","InsightsContext","React","copyProperties","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){b.__markCompiled&&b.__markCompiled();var aa=w,ba=aa.PropTypes,ca='trends',da='distribution',ea='breakdowns',fa='list',ga='recent',ha='social_plugins',ia=[{key:ca,label:y._("Tendencias")},{key:da,label:y._("Percentile Distribution")},{key:ea,label:y._("Desgloses")}],ja=w.createClass({displayName:"FalcorCustomEventsSectionController",componentWillReceiveProps:function(ka){if(ka.event&&(!this.props.event||this.props.event.name!=ka.event.name)){this.setState({filters:{},activeSubsection:ca});}else if(!ka.event)this.setState({activeSubsection:fa});},getInitialState:function(){return {filters:{},onFilterChange:this.onFilterChange,onResetFilters:this.onResetFilters,activeSubsection:this.props.event?ca:fa};},mixins:[j,k],propTypes:{events:ba.array.isRequired},statics:{getKey:function(){return h.CUSTOM_EVENTS;},getTimeSpentEvent:function(){var ka=v.getCustomEvents().filter(function(la){return la.name=='fb_mobile_deactivate_app';});return ka.length==1?ka[0]:null;}},_getAppEventOverviewSubsections:function(){var ka=[{key:fa,label:y._("Eventos")}];if(g.hasAnySocialPluginEvents())ka.push({key:ha,label:y._("Social Plugin Events")});ka.push({key:ga,label:y._("M\u00e1s recientes")});return ka;},_renderEventDetailCards:function(ka,la){var ma=x({},la.filters),na=[],oa=null;if(v.getShowNewTimeSpentUI()&&ka.event.name=='fb_mobile_activate_app')oa=ja.getTimeSpentEvent();if(la.activeSubsection===ca){if(ka.event)na.push(w.createElement(o,w.__spread({},this.getDateProps(),{event:ka.event,filters:la.filters,key:"breakdown_bar",onFilterChange:la.onFilterChange,onResetFilters:la.onResetFilters})));na.push(w.createElement(s,w.__spread({},this.getDateProps(),{event:ka.event,filters:ma,key:"key_events_overview"})));na.push(w.createElement(q,w.__spread({},this.getDateProps(),{cardKey:"trends",event:ka.event,filters:ma,key:"trends"})),w.createElement(q,w.__spread({},this.getDateProps(),{cardKey:"values",event:ka.event,filters:ma,key:"values"})));if(oa)na.push(w.createElement(q,w.__spread({},this.getDateProps(),{cardKey:"timeSpent",event:oa,filters:ma,key:"timeSpent"})));na.push(w.createElement(n,w.__spread({},this.getDateProps(),{cardKey:"demo",event:ka.event,filters:ma,key:"demo"})));}else if(la.activeSubsection===ea){na.push(w.createElement(m,w.__spread({},this.getDateProps(),{cardKey:"breakdown_table",event:ka.event,timeSpentEvent:oa,filters:ma,key:"breakdown_table"})));}else{z(la.activeSubsection===da);na.push(w.createElement(p,w.__spread({},this.getDateProps(),{cardKey:"percentiles",event:ka.event,filters:ma,key:"percentiles"})));}return na;},_renderEventOverview:function(ka,la){if(la.activeSubsection===fa){return (w.createElement(r,w.__spread({},this.getDateProps(),{socialPluginEventsOnly:false,key:"events_overview"})));}else if(la.activeSubsection===ha){return (w.createElement(r,w.__spread({},this.getDateProps(),{socialPluginEventsOnly:true,key:"social_plugin_events_overview"})));}else return w.createElement(u,{key:"most_recent_events"});},getContent:function(ka,la){var ma=[];if(ka.event){ma=this._renderEventDetailCards(ka,la);}else if(la.activeSubsection===ha){ma.push(this._renderEventOverview(ka,la));}else{z(la.activeSubsection===fa||la.activeSubsection===ga);var na=g.nonSocialPluginEventCount();if(na===0){ma.push(w.createElement(t,{section:h.CUSTOM_EVENTS}));}else{if(na<3)ma.push(w.createElement(t,{section:h.CUSTOM_EVENTS,variant:"log_more_events"}));ma.push(this._renderEventOverview(ka,la));}}return ma;},_getStaticTitle:function(){return i.get(ja.getKey());},getTitle:function(){if(this.props.event){return this.props.event.display_name;}else return this._getStaticTitle();},getHeaderProps:function(){var ka=null,la=null;if(this.props.event){ka=l.get(this.props.event.name,false);var ma=ia;if(this.props.event.name==='fb_mobile_first_app_launch')ma=ma.filter(function(oa,pa){return oa.key!==da;});la={onChange:this.onSubsectionChange,tabs:ma,active:this.state.activeSubsection};}else la={onChange:this.onSubsectionChange,tabs:this._getAppEventOverviewSubsections(),active:this.state.activeSubsection};var na=this.state.activeSubsection===da?false:true;return {title:this.getTitle(),subtitle:this.props.event?i.getSingular(ja.getKey()):null,selectorLinks:ka,subsections:la,enableDateSelector:na};},onSubsectionChange:function(ka){this.setState({activeSubsection:ka});},onFilterChange:function(ka,la){var ma=x({},this.state.filters);if(la==='@ALL@'){delete ma[ka];}else ma[ka]=la;this.setState({filters:ma});},onResetFilters:function(){this.setState({filters:{}});}});e.exports=ja;},null);
__d("FalcorLogCardViewMixin",["InsightsEventLogger","React"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=h,j=i.PropTypes,k={propTypes:{cardKey:j.string.isRequired},componentDidMount:function(){g.logCardView(this.props.cardKey,this._getParamsToLog());},componentDidUpdate:function(l,m){if(this._shouldLogAfterComponentDidUpdate(l,m))g.logCardView(this.props.cardKey,this._getParamsToLog());}};e.exports=k;},null);
__d("FalcorDeveloperAPIBreakdownCard",["BonsaiApiBreakdown","BonsaiBreakdownChart","BonsaiLinesTimeSeriesChart","BonsaiSectionDataLoaderMixin","BonsaiText","FalcorLegendSelectorMixin","FalcorLogCardViewMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=n.createClass({displayName:"FalcorDeveloperAPIBreakdownCard",mixins:[j,l,m],getInitialState:function(){return this._getInitialCardState('api_error_rate');},componentWillMount:function(){this.addMetric('api_calls_total','api_calls');this.addMetric('api_errors_total','api_errors');this.addMetric('api_avg_request_time','api_avg_request_time');this.fetchMetrics();},_getHelptextMap:function(){return {api_error_rate:'ApiDetailsErrorRate',api_calls:'ApiDetailsCalls',api_errors:'ApiDetailsErrors',api_request_time_avg:'ApiAverageRequestTime'};},_getKeyToLabel:function(){return {api_error_rate:k.api_error_rate,api_calls:k.api_calls,api_errors:k.api_errors,api_request_time_avg:k.api_request_time_avg};},_getKeyToSection:function(){var q=this.getData("api_calls_total"),r=this.getData("api_errors_total"),s=Object.assign({},this._getLegendProps(),{breakdown:g.NONE});return {api_error_rate:this._buildTimeSeriesChartGroup(n.createElement(h,n.__spread({},s,{ref:"api_error_rate",data:r.divideBy(q),percentage:true,title:k.api_error_rate,categories:[this._getHelptextMap().api_error_rate]}))),api_calls:this._buildTimeSeriesChartGroup(n.createElement(h,n.__spread({},s,{ref:"api_calls",data:q,title:k.api_calls,categories:[this._getHelptextMap().api_calls]}))),api_errors:this._buildTimeSeriesChartGroup(n.createElement(h,n.__spread({},s,{ref:"api_errors",data:r,title:k.api_errors,categories:[this._getHelptextMap().api_errors]}))),api_request_time_avg:this._buildTimeSeriesChartGroup(n.createElement(i,n.__spread({},this._getLegendProps(),{ref:"api_request_time_avg",data:[this.getData("api_avg_request_time")],titles:[k.api_request_time_avg_label],disableRangeSelection:true,categories:[this._getHelptextMap().api_request_time_avg]})))};},_title:function(){return o._("Uso y rendimiento de la API de Facebook");},_getParamsToLog:function(){return {card_section:this.state.activeSection.toLowerCase()};},_shouldLogAfterComponentDidUpdate:function(q,r){return this.state.activeSection!==r.activeSection;}});e.exports=p;},null);
__d("BonsaiApiSampleDataLoaderMixin",["InsightsUtils"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={},i={addApiSampleMetric:function(j,k){var l={apiKey:k};this._getStoredMetrics(j).push(l);this._enqueueApiSampleMetric(j,l);},_enqueueApiSampleMetric:function(j,k){var l={since:g.utcTimeToPacificDay(j.visibleDateRange.since),until:g.utcTimeToPacificDay(j.visibleDateRange.until)};this.addMetric(k.apiKey,k.apiKey,l);},_refetchStoredMetrics:function(j){this.resetMetrics();this._getStoredMetrics(j).forEach(function(k){this._enqueueApiSampleMetric(j,k);}.bind(this),this);this.fetchMetrics();},componentWillReceiveProps:function(j){var k=j.visibleDateRange&&(this.props.visibleDateRange.since.getTime()!==j.visibleDateRange.since.getTime()||this.props.visibleDateRange.until.getTime()!==j.visibleDateRange.until.getTime());if(k)this._refetchStoredMetrics(j);},_getStoredMetrics:function(j){if(!h[j.apiKey])h[j.apiKey]=[];return h[j.apiKey];}};e.exports=i;},null);
__d("FalcorDeveloperAPIErrorsCard",["BonsaiApiSampleDataLoaderMixin","BonsaiApiDataAdapter","BonsaiApiPromise","BonsaiSectionDataLoaderMixin","FalcorCard","FalcorPaginatedDataTable","InsightsLoadingIndicator.react","PrettyNum","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=function(s,t){return function(u,v){if(!v||!v[s])return -1;if(!u||!u[s])return 1;if(t)return v[s].localeCompare(u[s]);return (v[s]||0)-(u[s]||0);};},r=o.createClass({displayName:"FalcorDeveloperAPIErrorsCard",mixins:[g,j],componentWillMount:function(){this.addApiSampleMetric(this.props,'api_errors_by_method');this.addApiSampleMetric(this.props,'api_calls_by_method');this.addApiSampleMetric(this.props,'api_error_rate_by_method');this.fetchMetrics();this.apiErrors=[];},_onSearchChange:function(s){this.refs.table.onSearchChange(s);},render:function(){this.apiErrors=[];var s=this.getData("api_errors_by_method"),t=this.getData("api_calls_by_method"),u=this.getData("api_error_rate_by_method");if(s instanceof h&&t instanceof h&&u instanceof h){var v=s.getData(),w=t.getData(),x=u.getData();Object.keys(v).forEach(function(z){this.apiErrors[z]=v[z].breakdowns;this.apiErrors[z].value=v[z].value;this.apiErrors[z].calls=w[z].value;this.apiErrors[z].rate=x[z].value;},this);}else if(s instanceof i||t instanceof i||u instanceof i)return o.createElement("div",{key:this.props.cardKey},o.createElement(m,null));var y=[{id:'api_method',label:'Method',sortable:true,comparator:q('api_method',true)},{id:'error_code',label:'Error Code',sortable:true,comparator:q('error_code'),isNumeric:true},{id:'error_msg',label:'Error Message',sortable:true,comparator:q('error_msg',true),isNumeric:false},{id:'value',label:'Failures',sortable:true,comparator:q('value'),isNumeric:true,cellRenderer:function(z){return (new n(z)).toPretty();}},{id:'calls',label:'Total Calls (estimated)',sortable:true,comparator:q('calls'),isNumeric:true,cellRenderer:function(z){return (new n(z)).toPretty();},width:170},{id:'rate',label:'Failure Rate',sortable:true,comparator:q('rate'),isNumeric:true,cellRenderer:function(z){return (new n(z,null,1)).toPrettyPercentage();}}];return (o.createElement(k,{onSearchChange:this._onSearchChange,showLine:false,title:this._title()},o.createElement(l,{ref:"table",columns:y,columnToSortBy:"value",rows:this.apiErrors,currentCard:this.props.cardKey,pageSize:Infinity,searchFieldName:"api_method"})));},_title:function(){return p._("Errores de la API de Facebook (ejemplos)");}});e.exports=r;},null);
__d("OverviewDeveloperBar",["BonsaiSections","BonsaiSectionDateRangeMixin","BonsaiOverviewBarMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j.createClass({displayName:"OverviewDeveloperBar",mixins:[h,i],getSection:function(){return g.DEVELOPERS;},getTitle:function(){return k._("API");},getMetrics:function(){return ['api_calls','api_errors'];},getDataAdapters:function(){var m=this.getData(1).divideBy(this.getData(0));return [m,this.getData(0),this.getData(1)];},getChartLocations:function(){return [{card:'dev_api_breakdown',tab:'api_error_rate'},{card:'dev_api_breakdown',tab:'api_calls'},{card:'dev_api_breakdown',tab:'api_errors'}];},getPercentages:function(){return [true,false,false];},getReverseDeltas:function(){return [true,true,true];},getLabels:function(){return [k._("Tasa de errores"),k._("Llamadas a la API"),k._("Errores")];}});e.exports=l;},null);
__d("FalcorDeveloperSectionController",["BonsaiSections","BonsaiSectionDisplayNames","FalcorSectionDateRangeMixin","FalcorSectionRendererMixin","FalcorDeveloperAPIBreakdownCard","FalcorDeveloperAPIErrorsCard","OverviewDeveloperBar","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=n.createClass({displayName:"FalcorDeveloperSectionController",mixins:[i,j],statics:{getKey:function(){return g.DEVELOPERS;}},getSummary:function(){return n.createElement(m,n.__spread({},this.getDateProps()));},getTitle:function(){return h.get(o.getKey());},getContent:function(){return [n.createElement(k,n.__spread({},this.getDateProps(),{key:"dev_api_breakdown",cardKey:"dev_api_breakdown"})),n.createElement(l,n.__spread({},this.getDateProps(),{key:"dev_api_errors",cardKey:"dev_api_errors"}))];}});e.exports=o;},null);
__d("ExtendedOverviewGroupsBar",["BonsaiSections","BonsaiSectionDateRangeMixin","BonsaiOverviewBarMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j.createClass({displayName:"ExtendedOverviewGroupsBar",mixins:[h,i],getSection:function(){return g.GROUPS;},getTitle:function(){return k._("Comportamiento de la publicaci\u00f3n del grupo");},getMetrics:function(){return ['gamer_group_posts','gamer_group_post_likes','gamer_group_post_comments'];},getChartLocations:function(){return [{card:'referrals_opens',tab:'app_total_referrals'}];},getLabels:function(){return [k._("Publicaciones del grupo"),k._("Me gusta de la publicaci\u00f3n"),k._("Comentarios de la publicaci\u00f3n")];}});e.exports=l;},null);
__d("OverviewGroupsBar",["BonsaiSections","BonsaiSectionDateRangeMixin","BonsaiOverviewBarMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j.createClass({displayName:"OverviewGroupsBar",mixins:[h,i],getSection:function(){return g.GROUPS;},getTitle:function(){return k._("Grupos de juego");},getMetrics:function(){return ['gamer_group_visits','gamer_group_joins','gamer_group_leaves'];},getChartLocations:function(){return [{card:'referrals_opens',tab:'app_total_referrals'}];},getLabels:function(){return [k._("Visitas del grupo"),k._("Registros de miembros en grupos"),k._("Abandonos de miembros en grupos")];}});e.exports=l;},null);
__d("FalcorGroupsSectionController",["BonsaiSections","BonsaiSectionDisplayNames","ExtendedOverviewGroupsBar","FalcorSectionDateRangeMixin","FalcorSectionRendererMixin","OverviewGroupsBar","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=m.createClass({displayName:"FalcorGroupsSectionController",mixins:[j,k],statics:{getKey:function(){return g.GROUPS;}},getSummary:function(){return (m.createElement(l,m.__spread({},this.getDateProps())));},getTitle:function(){return h.get(n.getKey());},getContent:function(){return [m.createElement(i,m.__spread({},this.getDateProps()))];}});e.exports=n;},null);
__d("InsightsFunnelData",["AppEventsCombinedBreakdowns","AppEventsReservedBreakdownValues","BonsaiAppEventTypesUtils","FalcorBreakdownsTextUtils","fbt","immutable","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n={breakdown_value_other:k._("Otros")};function o(q,r,s){s=s||[];this.$InsightsFunnelData0=l.Seq(s);this.$InsightsFunnelData1=l.Seq(s.map(function(event){return i.getAppEventDisplayName(event);}));this.$InsightsFunnelData2=l.Seq(JSON.parse(q));this.$InsightsFunnelData3=l.Map(o.consolidateUnknownBreakdownValues(JSON.parse(r)));this.$InsightsFunnelData4=Infinity;this.$InsightsFunnelData5=[];this.$InsightsFunnelData6=new p();}o.prototype.getBreakdownTypes=function(){return this.$InsightsFunnelData3.keySeq().toArray().filter(function(q){return !g[q];});};o.prototype.getCounts=function(q){return this.$InsightsFunnelData7(q,false);};o.prototype.getCountsHidingHiddenBreakdowns=function(q){return this.$InsightsFunnelData7(q,true);};o.prototype.getEventDisplayNames=function(){return this.$InsightsFunnelData1.toArray();};o.prototype.getEvents=function(){return this.$InsightsFunnelData0.toArray();};o.prototype.getPercentages=function(q){var r=this.$InsightsFunnelData2.toArray(),s=r[0][q],t;if(s===0){t=r.map(function(u){return 0;});}else t=r.map(function(u){return u[q]/s;});return t;};o.prototype.getBreakdownPercentages=function(q){m(this.$InsightsFunnelData8);var r=this.getCounts(q);return r.map(function(s){var t=s[0];if(t===0){return s.map(function(u){return 0;});}else return s.map(function(u){return u/t;});});};o.prototype.getSelectedBreakdownCounts=function(q){this.$InsightsFunnelData9(q);return this.$InsightsFunnelData6.getCounts(this.$InsightsFunnelData8,q);};o.prototype.getSelectedBreakdownValues=function(q){this.$InsightsFunnelData9(q);return this.$InsightsFunnelData6.getValues(this.$InsightsFunnelData8,q);};o.prototype.getSummedCounts=function(q){return this.$InsightsFunnelDataa(q,false);};o.prototype.getSummedCountsHidingHiddenBreakdowns=function(q){return this.$InsightsFunnelDataa(q,true);};o.prototype.$InsightsFunnelDataa=function(q,r){var s=this.$InsightsFunnelData7(q,r),t=[];for(var u=0;u<this.$InsightsFunnelData0.size;u++){var v=0;s.forEach(function(w){v+=w[u];});t.push(v);}return t;};o.prototype.setBreakdownType=function(q){if(this.$InsightsFunnelData8===q)return this;this.$InsightsFunnelData8=q;this.setHiddenBreakdownValues([]);return this;};o.prototype.setMaxBreakdowns=function(q){if(this.$InsightsFunnelData4===q)return this;this.$InsightsFunnelData4=q;this.$InsightsFunnelData6.clearCache();return this;};o.prototype.setHiddenBreakdownValues=function(q){this.$InsightsFunnelData5=q;return this;};o.prototype.$InsightsFunnelData9=function(q){if(this.$InsightsFunnelData6.isCached(this.$InsightsFunnelData8,q))return;var r=this.$InsightsFunnelData3.get(this.$InsightsFunnelData8),s=this.$InsightsFunnelDatab(r,q),t;if(s.length>this.$InsightsFunnelData4){var u=null;s.slice(this.$InsightsFunnelData4-1).forEach(function(w){u=o.$InsightsFunnelDatac(r[w],u);});t={};s.slice(0,this.$InsightsFunnelData4-1).forEach(function(w){t[w]=r[w];});var v=n.breakdown_value_other;t[v]=u;s=this.$InsightsFunnelDatab(t,q);}else t=r;s=s.filter(function(w){var x=t[w].filter(function(y){return y[q]>0;});if(x.length===0){delete t[w];return false;}else return true;});this.$InsightsFunnelData6.cache(this.$InsightsFunnelData8,q,s,t);};o.prototype.$InsightsFunnelData7=function(q,r){if(!this.$InsightsFunnelData8){var s=this.$InsightsFunnelData2.toArray();return [s.map(function(w){return w[q];})];}else{var t=this.getSelectedBreakdownValues(q),u=this.getSelectedBreakdownCounts(q),v=[];t.forEach(function(w){var x=r&&this.$InsightsFunnelData5.indexOf(w)>=0;v.push(u[w].map(function(y){return x?0:y;}));}.bind(this));return v;}};o.prototype.$InsightsFunnelDatab=function(q,r){return this.$InsightsFunnelDatad(q,Object.keys(q),r,0);};o.prototype.$InsightsFunnelDatad=function(q,r,s,t){var u=r.slice(0),v=this.getEvents();if(t>=v.length)return u;u.sort(function(x,y){var z=q[x][t],aa=q[y][t],ba=z?z[s]:0,ca=aa?aa[s]:0;return ca-ba;});var w=u.findIndex(function(x){var y=q[x][t],z=y?y[s]:0;return z===0;});if(w<0)return u;return u.slice(0,w).concat(this.$InsightsFunnelDatad(q,u.slice(w),s,t+1));};o.consolidateUnknownBreakdownValues=function(q){var r={};Object.keys(q).forEach(function(s){r[s]={};Object.keys(q[s]).forEach(function(t){var u=j.isKnownBreakdownValue(s,t),v=q[s][t].slice(0),w=h.UNKNOWN;if(u&&t!==w){r[s][t]=v;}else r[s][w]=o.$InsightsFunnelDatac(v,r[s][w]);});});return r;};o.$InsightsFunnelDatac=function(q,r){if(!r)return q;m(q.length===r.length);var s=[];q.forEach(function(t,u){var v=r[u];s[u]={};Object.keys(t).forEach(function(w){s[u][w]=t[w]+v[w];});});return s;};function p(){this.$BreakdownDataCache0={};}p.prototype.cache=function(q,r,s,t){if(!this.$BreakdownDataCache0[q])this.$BreakdownDataCache0[q]={};var u={};Object.keys(t).forEach(function(v){u[v]=t[v].map(function(w){return w[r];});});this.$BreakdownDataCache0[q][r]={counts:l.Map(u),values:l.Seq(s)};};p.prototype.clearCache=function(){this.$BreakdownDataCache0={};};p.prototype.getValues=function(q,r){m(this.isCached(q,r));return this.$BreakdownDataCache0[q][r].values.toArray();};p.prototype.getCounts=function(q,r){m(this.isCached(q,r));return this.$BreakdownDataCache0[q][r].counts.toObject();};p.prototype.isCached=function(q,r){return !!this.$BreakdownDataCache0[q]&&!!this.$BreakdownDataCache0[q][r];};e.exports=o;},null);
__d("FalcorFunnelsTableMixin",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={getColumns:function(h){var i=[{id:'rowHeader',label:''}],j=h.getEvents(),k=h.getEventDisplayNames();for(var l=0;l<j.length;l++)i.push({id:j[l]+l,label:k[l]});return i;},getSortableColumns:function(h){var i=this.getColumns(h);i.forEach(function(j,k){if(k===0)return;j.sortable=true;j.comparator=this._compareRows(j.id);}.bind(this));return i;},_compareRows:function(h){return (function(i,j){return i[h].props.exportValue-j[h].props.exportValue;});}};e.exports=g;},null);
__d("InsightsFunnelBreakdownTable",["AppEventsFunnelAggregationMethod","FalcorCard","FalcorFunnelsTableMixin","FalcorDataTooltip","FalcorDataTooltipMixin","FalcorPaginatedDataTable","FalcorBreakdownsTextUtils","FalcorSamplingVariance","FBDate","InsightsNumUtils","React","fbt","Timezone"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=q,t=s.PropTypes,u=b('Timezone'),v=u.PST8PDT,w=100,x=q.createClass({displayName:"InsightsFunnelBreakdownTable",mixins:[i],propTypes:{breakdownType:t.string.isRequired,funnelData:t.object.isRequired,samplingRate:t.number.isRequired,funnel:t.object.isRequired,startTime:t.number.isRequired,endTime:t.number.isRequired},render:function(){this.props.funnelData.setMaxBreakdowns(Infinity);var z=this._getRows();return (q.createElement(h,{showLine:false,title:r._("Desgloses"),getExportData:this._getExportData},q.createElement(l,{ref:"table",columns:this.getSortableColumns(this.props.funnelData),currentCard:"DELETEME",loaded:true,pageSize:w,rows:z,getExportValueFromCell:this._getExportValueFromCell})));},_getRows:function(){var z=this.props.funnelData.getCounts(g.UNIQUES),aa=this.props.funnelData.getBreakdownPercentages(g.UNIQUES),ba=this.props.samplingRate,ca=this.props.funnelData.getSelectedBreakdownValues(g.UNIQUES),da=this.props.funnelData.getEvents(),ea=this.props.funnelData.getEventDisplayNames();return ca.map(function(fa,ga){var ha={rowHeader:m.getBreakdownValueDisplayString(this.props.breakdownType,fa)};z[ga].forEach(function(ia,ja){var ka=r._("{count number} usuarios",[r.param("count number",p.prettyInt(ia))]);ha[da[ja]+ja]=q.createElement(y,{cellRef:ga+' '+ja,getTooltip:j.getFunnelDataTooltip.bind(null,ea[ja],ka,n.getVarianceTooltipSentence(ia,ba)),exportValue:ia.toString(),sortValue:ia},q.createElement("div",null,p.prettyShortInt(ia)),q.createElement("div",null,p.prettyPercent(aa[ga][ja],0)));});return ha;}.bind(this));},_getExportData:function(){return {data:this.refs.table.getExportData(),fileName:this._getExportFileName()};},_getExportFileName:function(){return [this.props.funnel.name,this.props.breakdownType,(new o(this.props.startTime*1000,v)).format('Y-m-d'),(new o(this.props.endTime*1000,v)).format('Y-m-d')].join('_');},_getExportValueFromCell:function(z){if(typeof z==='string')return z;return '"'+z.props.exportValue+'"';}}),y=q.createClass({displayName:"InsightsFunnelBreakdownTableCell",mixins:[k],propTypes:{cellRef:t.string.isRequired,getTooltip:t.func.isRequired,exportValue:t.string.isRequired,sortValue:t.number.isRequired},render:function(){return (q.createElement("div",{onMouseEnter:this.onShowTooltip.bind(this,this.props.cellRef,this.props.getTooltip,null),onMouseLeave:this.onHideTooltip,ref:this.props.cellRef,style:{display:'inline-block'}},this.props.children));}});e.exports=x;},null);
__d("InsightsFunnelChart",["AppEventsFunnelAggregationMethod","SpectrumBaseNumberScale","SpectrumChart","SpectrumStackedColumns","d3/scale/ordinal","React","SpectrumTooltipMenu","SpectrumXAxis","SpectrumYAxis","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=l,r=q.PropTypes,s=l.createClass({displayName:"InsightsFunnelChart",propTypes:{funnelData:r.object.isRequired,breakdownValues:r.array.isRequired,theme:r.object.isRequired},render:function(){var t=this.props.funnelData.getEventDisplayNames().map(function(v,w){return p._("{stage index} - {stage event name}",[p.param("stage index",w+1),p.param("stage event name",v)]);}),u=this.props.funnelData.getCountsHidingHiddenBreakdowns(g.UNIQUES);return (l.createElement(i,{scaleX:k().domain(t),scaleY:h(1),width:750,height:320,theme:this.props.theme},l.createElement(j,{data:u,titles:this.props.breakdownValues}),l.createElement(n,null),l.createElement(o,null),l.createElement(m,{showPercentTotal:this.props.breakdownValues.length>1})));}});e.exports=s;},null);
__d("InsightsFunnelCountsTable",["AppEventsFunnelAggregationMethod","FalcorCard","FalcorFunnelsTableMixin","FalcorDataTooltip","FalcorDataTooltipMixin","FalcorPaginatedDataTable","FalcorSamplingVariance","FBDate","InsightsNumUtils","React","fbt","Timezone"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=p,s=r.PropTypes,t=b('Timezone'),u=t.PST8PDT,v={event_count_row_header:q._("Eventos"),percent_row_header:q._("Conversion Rates"),user_count_row_header:q._("Personas"),value_row_header:q._("Values")},w=p.createClass({displayName:"InsightsFunnelCountsTable",mixins:[k,i],propTypes:{funnelData:s.object.isRequired,samplingRate:s.number.isRequired,funnel:s.object.isRequired,startTime:s.number.isRequired,endTime:s.number.isRequired},render:function(){return (p.createElement(h,{showLine:false,title:q._("Desgloses"),getExportData:this._getExportData},p.createElement(l,{ref:"table",columns:this.getColumns(this.props.funnelData),rows:this._getRows(),getExportValueFromCell:this._getExportValueFromCell})));},_getCell:function(x,y,z,aa){return (p.createElement("span",{exportValue:y,ref:z,onMouseOver:this.onShowTooltip.bind(this,z,j.getFunnelDataTooltip.bind(null,aa.title,aa.count,aa.variance),null),onMouseOut:this.onHideTooltipWithDelay},x));},_getRows:function(){var x=this.props.funnelData.getEvents(),y=this.props.funnelData.getEventDisplayNames(),z=this.props.samplingRate,aa=m.getSamplingTooltipSentence(z),ba=this.props.funnelData.getSummedCounts(g.COUNT),ca=this.props.funnelData.getPercentages(g.UNIQUES),da=this.props.funnelData.getSummedCounts(g.UNIQUES),ea=this.props.funnelData.getSummedCounts(g.VALUE_SUM),fa=this.props.funnelData.getSummedCounts(g.USD_SUM),ga={rowHeader:v.percent_row_header},ha={rowHeader:v.user_count_row_header},ia={rowHeader:v.event_count_row_header},ja={rowHeader:v.value_row_header};ca.forEach(function(ka,la){var ma=ba[la],na=da[la],oa=fa[la]>0?o.prettyShortCurrency('USD',fa[la]):o.prettyShortInt(ea[la]),pa=fa[la]>0?o.prettyCurrency('USD',fa[la]):o.prettyInt(ea[la]),qa=m.getVarianceTooltipSentence(na,z);ga[x[la]+la]=this._getCell(o.prettyPercent(ka,0),ka,'percent'+la,{title:y[la],count:q._("{conversion rate} of First Stage",[q.param("conversion rate",o.prettyPercent(ka,2))]),variance:aa});ha[x[la]+la]=this._getCell(o.prettyShortInt(na).toString(),na,'user'+la,{title:y[la],count:q._("{count number} usuarios",[q.param("count number",o.prettyInt(na))]),variance:qa});ia[x[la]+la]=this._getCell(o.prettyShortInt(ma).toString(),ma,'event'+la,{title:y[la],count:q._("{count number} eventos",[q.param("count number",o.prettyInt(ma))]),variance:aa});ja[x[la]+la]=this._getCell(oa.toString(),pa,'value'+la,{title:y[la],count:q._("{count number} Event Value",[q.param("count number",pa)]),variance:aa});}.bind(this));return [ga,ha,ia,ja];},_getExportData:function(){return {data:this.refs.table.getExportData(),fileName:this._getExportFileName()};},_getExportFileName:function(){return [this.props.funnel.name,(new n(this.props.startTime*1000,u)).format('Y-m-d'),(new n(this.props.endTime*1000,u)).format('Y-m-d')].join('_');},_getExportValueFromCell:function(x){if(typeof x==='string')return x;return '"'+x.props.exportValue+'"';}});e.exports=w;},null);
__d("InsightsFunnelDataView",["AppEventsFunnelAggregationMethod","BonsaiStyle","FalcorBreakdownsTextUtils","FalcorCard","FlexibleBlock.react","InsightsEventLogger","InsightsFunnelBreakdownTable","InsightsFunnelChart","InsightsFunnelCountsTable","InsightsLegendCheckboxKey.react","InsightsLegendScrollableVert.react","React","XUISelector.react","XUISelectorButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=s.Option,x=r,y=x.PropTypes,z=6,aa={AGE:1,GENDER:2,COUNTRY:3,LOCALE:4,APP_VERSION:5,CLIENT:6,DEVICE_OS:7,DEVICE_MODEL:8,IDENTITY_SOURCE:9,ACQUISITION_SOURCE:10,ACQUISITION_SOURCE_L1:11,ACQUISITION_SOURCE_L2:12,ACQUISITION_SOURCE_L3:13},ba=r.createClass({displayName:"InsightsFunnelDataView",propTypes:{funnelData:y.object.isRequired,samplingRate:y.number.isRequired,partition:y.string.isRequired,readDuration:y.number.isRequired,overallDuration:y.number.isRequired,asyncTaskId:y.string.isRequired,funnelID:y.string.isRequired,funnel:y.object.isRequired,startTime:y.number.isRequired,endTime:y.number.isRequired},getInitialState:function(){return {selectedBreakdownType:null,hiddenBreakdownValues:[]};},componentDidMount:function(){l.logCardView('funnel_data',{feature_id:this.props.funnelID,card_breakdown:null});},componentDidUpdate:function(ca,da){if(da.selectedBreakdownType!==this.state.selectedBreakdownType)l.logCardView('funnel_data',{feature_id:this.props.funnelID,card_breakdown:this.state.selectedBreakdownType?this.state.selectedBreakdownType.toLowerCase():null});},render:function(){this.props.funnelData.setBreakdownType(this.state.selectedBreakdownType).setMaxBreakdowns(z).setHiddenBreakdownValues(this.state.hiddenBreakdownValues);var ca=this.props.funnelData.getSummedCountsHidingHiddenBreakdowns(g.UNIQUES),da=ca[0],ea;if(da===0){ea=0;}else ea=Math.round(100*ca.pop()/da);var fa;if(this.state.selectedBreakdownType){fa=this.props.funnelData.getSelectedBreakdownValues(g.UNIQUES);fa=fa.map(function(ga){return i.getBreakdownValueDisplayString(this.state.selectedBreakdownType,ga);}.bind(this));}else fa=[];return (r.createElement("div",null,r.createElement(j,{title:v._("{completion rate without \u0025 sign}\u0025 Completion Rate",[v.param("completion rate without % sign",ea)])},r.createElement(k,{flex:"right"},r.createElement("div",{className:"_3swl"},r.createElement(n,{funnelData:this.props.funnelData,breakdownValues:fa,theme:this._getTheme()})),r.createElement("div",{className:"_2pi8"},this._renderBreakdownSelector(),this._renderLegend()))),this._renderFunnelTable(),this._renderFootnote()));},_renderFootnote:function(){return (r.createElement("div",{className:"_n4- _3-8z"},v._("This page considers data up to and including {partition string}.",[v.param("partition string",this.props.partition)])));},_renderBreakdownSelector:function(){var ca=this.props.funnelData.getBreakdownTypes();ca.sort(function(da,ea){if(aa[da]){if(aa[ea]){return aa[da]-aa[ea];}else return -1;}else if(aa[ea]){return 1;}else return da.localeCompare(ea);});return (r.createElement("div",null,r.createElement("div",{className:"_13i9"},v._("MOSTRAR POR")),r.createElement(s,{className:"_3-8o",onChange:this._onChangeBreakdownType,defaultValue:"none"},r.createElement(t,{className:"_5g1q _13ia",haschevron:true}),r.createElement(w,{value:"none"},v._("Ninguno")),ca.map(function(da){var ea=i.getBreakdownTypeDisplayString(da);return (r.createElement(w,{key:da,value:da},ea));}))));},_renderLegend:function(){if(!this.state.selectedBreakdownType)return;var ca=this.props.funnelData.getSelectedBreakdownValues(g.UNIQUES);ca.reverse();return (r.createElement(q,{className:"_47tf",height:300,width:200},ca.map(function(da,ea){var fa=i.getBreakdownValueDisplayString(this.state.selectedBreakdownType,da),ga=this._getTheme().columns.colors[ca.length-ea-1],ha=this.state.hiddenBreakdownValues.indexOf(da)==-1,ia='legend_'+da;return (r.createElement("div",{key:ia},r.createElement(p,{color:ga,checked:ha,isInline:true,size:"medium",onChange:this._onLegendCheckboxChange.bind(this,da)},fa)));}.bind(this))));},_onLegendCheckboxChange:function(ca,da){var ea=this.state.hiddenBreakdownValues.slice(0);if(da){ea=ea.filter(function(ha){return ha!==ca;});}else{var fa=this.props.funnelData.getSelectedBreakdownValues(g.UNIQUES),ga=Math.min(z-1,fa.length-1);if(ea.indexOf(ca)===-1&&ea.length<ga)ea.push(ca);}this.setState({hiddenBreakdownValues:ea});},_renderFunnelTable:function(){return this.state.selectedBreakdownType?r.createElement(m,{breakdownType:this.state.selectedBreakdownType,funnelData:this.props.funnelData,samplingRate:this.props.samplingRate,funnel:this.props.funnel,startTime:this.props.startTime,endTime:this.props.endTime}):r.createElement(o,{funnelData:this.props.funnelData,samplingRate:this.props.samplingRate,funnel:this.props.funnel,startTime:this.props.startTime,endTime:this.props.endTime});},_onChangeBreakdownType:function(ca){this.setState({selectedBreakdownType:ca.value==='none'?null:ca.value,hiddenBreakdownValues:[]});},_getTheme:function(){var ca=h.CHART_THEME;ca.rangeBands={outerPadding:.15,padding:.15};return ca;}});e.exports=ba;},null);
__d("InsightsFunnelDataCardController",["BonsaiUtils","FalcorAsyncTaskLoaderMixin","FalcorCard","FalcorSegmentSelector","InsightsContext","InsightsEventLogger","InsightsFunnelData","InsightsFunnelDataView","InsightsGraphAPIConstants","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=p,r=q.PropTypes,s=p.createClass({displayName:"InsightsFunnelDataCardController",mixins:[h],propTypes:{funnelID:r.string.isRequired,startTime:r.number.isRequired,endTime:r.number.isRequired,funnel:r.object,updateHeaderProps:r.func.isRequired,segmentID:r.string},getInitialState:function(){var t=this.props.segmentID?[this.props.segmentID]:[];return {funnelData:null,responseMetadata:null,segmentIDs:t};},componentWillMount:function(){this._loadFunnelData(this.props);this.props.updateHeaderProps(this._getHeaderConfig());},componentWillReceiveProps:function(t){var u=t.funnelID!==this.props.funnelID,v=t.startTime!==this.props.startTime||t.endTime!==this.props.endTime;if(u||v)this._loadFunnelData(t);},_getHeaderConfig:function(){return {control:p.createElement(j,{onChange:this._onApplySegment,segmentID:this.state.segmentIDs[0]})};},render:function(){var t;if(this.state.funnelData){var u=this.state.responseMetadata;t=p.createElement(n,{funnelData:this.state.funnelData,samplingRate:u.sampling_rate,partition:u.partition,readDuration:u.read_duration,overallDuration:u.overall_duration,asyncTaskId:u.async_task_id,funnelID:this.props.funnelID,funnel:this.props.funnel,startTime:this.props.startTime,endTime:this.props.endTime});}else t=p.createElement(i,null,this.renderProgressOrTimeoutIndicator());return t;},_onApplySegment:function(t){var u=t?[t.id]:[];this.setState({segmentIDs:u});this._loadFunnelData(this.props);l.logEvent({_eventName:'funnels_apply_feature',feature_id:u[0]?u[0]:null,apply_to_section:k.getActiveSectionName().toLowerCase(),apply_to_feature_id:this.props.funnelID});},_loadFunnelData:function(t){this.setState({funnelData:null,responseMetadata:null});var u={fields:'data',start_date:t.startTime,end_date:t.endTime,segment_ids:this.state.segmentIDs};this.loadAsyncTaskData(o.FUNNEL_NODE,t.funnelID,u,function(v){this.props.updateHeaderProps(this._getHeaderConfig());this.setState({funnelData:new m(v.event_counts,v.breakdown_counts,v.stages),responseMetadata:{sampling_rate:v.sampling_rate,partition:g.formatLaserReceivedDate(v.partition),read_duration:v.read_duration,overall_duration:v.overall_duration,async_task_id:v.async_task_id}});}.bind(this));}});e.exports=s;},null);
__d("InsightsFunnelInputForm",["BonsaiAppEventTypesUtils","BonsaiSections","FalcorAppEventRuleDataBuilder","FalcorAppEventRuleDataUtils","FalcorCard","FalcorFeatureValidationMixin","FalcorNotice","FunnelStore","Image.react","InsightsContext","InsightsEventLogger","InsightsFunnelConstants","Layout.react","LeftRight.react","React","XUIButton.react","XUITextInput.react","cx","fbt","update","xuiglyph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();'use strict';var ba=s.Column,ca=s.FillColumn,da=u,ea=da.PropTypes,fa={text_input_title_funnel_name:y._("Nombre del embudo de ventas"),funnel_creation_explanation:y._("Select which App Events represent the steps in your conversion funnel.")},ga=u.createClass({displayName:"InsightsFunnelInputForm",mixins:[l],propTypes:{appID:ea.string.isRequired,funnel:ea.object.isRequired},_getNoNameError:function(){var ha=this.props.funnel;if(!ha.name.trim())return this._renderErrorOnSave(y._("It looks like you forgot to enter a name for your funnel."),y._("Please enter a name and try saving again."));return null;},_getNoStagesError:function(){var ha=this.props.funnel,ia=ha.funnel_stages_configs.length;if(ia===0)return this._renderErrorOnSave(y._("Los embudos de ventas requieren por lo menos de una etapa para ser definidos."),y._("Please create a stage and try saving again."));return null;},_getMaxStagesWarning:function(){var ha=y._("You've reached the max number of stages for a funnel."),ia=y._("You wont be able to add any more."),ja=this.props.funnel.funnel_stages_configs.length;return ja>=r.MAX_NUM_STAGES?u.createElement(m,{className:"_3-8q",message:ha,noticeType:m.NoticeTypes.INFORMATION,subtext:ia}):null;},_getInvalidStagesError:function(){var ha=this._getInvalidStageIndices(this.props.funnel.funnel_stages_configs);if(ha.length)return this._renderErrorOnSave(y._("It looks like one of your funnel stages is incomplete."),y._("Please fix or remove any invalid stages and try saving again."));return null;},render:function(){if(g.getAppEvents().length===0)return u.createElement("div",null,"No Events Logged");var ha=this.props.funnel,ia=ha.funnel_stages_configs.length;return (u.createElement("div",{className:"_1778"},this._getNoNameError(),u.createElement(k,null,u.createElement("div",null,fa.text_input_title_funnel_name),u.createElement(w,{className:"_33jp",height:"tall",onChange:this._onNameChange,value:ha.name})),this._getNoStagesError(),this._getInvalidStagesError(),this._renderStageForms(),this._getMaxStagesWarning(),u.createElement(v,{className:"_3x99",disabled:ia>=r.MAX_NUM_STAGES,label:"Add Another Step",onClick:this._onAddStage.bind(this,ia),size:"xlarge"})));},_getInvalidStageIndices:function(ha){return ha.map(function(ia,ja){return j.validateAppEventRuleData(ia,h.FUNNELS)?ja:null;}).filter(function(ia){return ia!==null;});},_onNameChange:function(event){var ha=z(this.props.funnel,{name:{$set:event.target.value}});n.setEntityConfiguration(ha);},_onDescriptionChange:function(ha){var ia=z(this.props.funnel,{description:{$set:ha}});n.setEntityConfiguration(ia);},_onAddStage:function(ha){var ia=this.props.funnel;if(ia.funnel_stages_configs.length>=r.MAX_NUM_STAGES)return;var ja={name:'',event_rule:null},ka=ia.showValidationError;if(!ia.funnel_stages_configs.length)ka=false;n.updateEntityConfiguration({funnel_stages_configs:{$splice:[[ha+1,0,ja]]},uiKeys:{$splice:[[ha+1,0,ia.nextKey()]]},showValidationError:{$set:ka}});q.logEvent({_eventName:'funnels_builder_add_rule',feature_id:p.getActiveInsightsFunnelId()?p.getActiveInsightsFunnelId():null});},_onChangeStage:function(ha,ia){var ja=this.props.funnel,ka=ja.funnel_stages_configs[ha];if(ka.event_rule===null||ka.event_rule.event_name!=ia.event_rule.event_name)q.logEvent({_eventName:'funnels_builder_change_rule',feature_id:p.getActiveInsightsFunnelId()?p.getActiveInsightsFunnelId():null,index:ha,rule_type:'app_event_stage',rule_value:ia.event_rule.event_name});var la=z(ja,{funnel_stages_configs:{$splice:[[ha,1,ia]]}});n.setEntityConfiguration(la);},_onDeleteStage:function(ha){var ia=this.props.funnel,ja=ia.funnel_stages_configs[ha];q.logEvent({_eventName:'funnels_builder_remove_rule',feature_id:p.getActiveInsightsFunnelId()?p.getActiveInsightsFunnelId():null,index:ha,rule_type:'app_event_stage',rule_value:ja.event_rule?ja.event_rule.event_name:null});var ka=z(ia,{funnel_stages_configs:{$splice:[[ha,1]]},uiKeys:{$splice:[[ha,1]]}});n.setEntityConfiguration(ka);},_onMoveStage:function(ha,ia){var ja=this.props.funnel,ka=ja.funnel_stages_configs[ha],la=ha+ia;q.logEvent({_eventName:'funnels_builder_move_rule',feature_id:p.getActiveInsightsFunnelId()?p.getActiveInsightsFunnelId():null,index:ha,new_index:la,rule_type:'app_event_stage',rule_value:ka.event_rule?ka.event_rule.event_name:null});if(la<0||la>=ja.funnel_stages_configs.length)return;var ma=z(ja,{funnel_stages_configs:{$splice:[[ha,1],[la,0,ja.funnel_stages_configs[ha]]]},uiKeys:{$splice:[[ha,1],[la,0,ja.uiKeys[ha]]]}});n.setEntityConfiguration(ma);},_onMoveStageDown:function(ha){this._onMoveStage(ha,1);},_onMoveStageUp:function(ha){this._onMoveStage(ha,-1);},_renderStageForms:function(){var ha=this.props.funnel.funnel_stages_configs,ia=this.props.funnel.uiKeys,ja=this._getInvalidStageIndices(ha);return ha.map(function(ka,la){var ma=this.props.funnel.showValidationError&&ja.indexOf(la)>=0,na=u.createElement(t,{className:"_1cxn _3-98 _3-9b"},u.createElement("div",{className:"_1cxo"},u.createElement("a",{className:"_1cxp",onClick:this._onMoveStageUp.bind(this,la)},u.createElement(o,{src:aa('triangle-up')})),u.createElement("a",{onClick:this._onMoveStageDown.bind(this,la)},u.createElement(o,{src:aa('triangle-down')}))),u.createElement("div",{className:"_3-8w"},u.createElement("a",{onClick:this._onDeleteStage.bind(this,la)},u.createElement(o,{src:aa('cross')}))));return (u.createElement("div",{key:ia[la]},u.createElement("div",{className:"_3toq"},u.createElement("div",{className:"_3tor _3-91"},la+1),u.createElement("span",{className:"_3tos"},y._("Step"))),u.createElement(k,{className:((ma?"_46be":'')),showLine:false},u.createElement(s,null,u.createElement(ca,null,u.createElement(i,{appID:this.props.appID,eventRuleData:ka,onChange:this._onChangeStage.bind(this,la),onDelete:this._onDeleteStage.bind(this,la),requireNegationSelector:false,requireRuleName:false})),u.createElement(ba,null,na)))));}.bind(this));}});e.exports=ga;},null);
__d("InsightsFunnelEditCardController",["InsightsFunnelInputForm","React"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=h,j=i.PropTypes,k=h.createClass({displayName:"InsightsFunnelEditCardController",propTypes:{appID:j.string.isRequired,funnel:j.object},render:function(){if(!this.props.funnel)return h.createElement("div",null,"Loading Funnel");return (h.createElement(g,{appID:this.props.appID,funnel:this.props.funnel}));}});e.exports=k;},null);
__d("InsightsFunnelListCardController",["BonsaiSections","FalcorFeatureTableCard","InsightsEventLogger","InsightsGraphAPIConstants","React"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=k,m=l.PropTypes,n=k.createClass({displayName:"InsightsFunnelListCardController",propTypes:{appID:m.string.isRequired,funnelList:m.array},componentDidMount:function(){i.logCardView('funnels_list',{});},render:function(){return (k.createElement(h,{appID:this.props.appID,data:this.props.funnelList,section:g.FUNNELS,edge:j.FUNNEL_EDGE}));}});e.exports=n;},null);
__d("FalcorInsightsFunnelSectionController",["BonsaiSections","FalcorAnalyticsFeatureSectionController","InsightsContext","InsightsFunnelDataCardController","InsightsFunnelEditCardController","InsightsFunnelListCardController","FalcorCommonViews","FunnelStore","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=o.createClass({displayName:"FalcorInsightsFunnelSectionController",statics:{getKey:function(){return g.FUNNELS;}},propTypes:Object.assign({},h.containerPropTypes),getInitialState:function(){return {additionalHeaderProps:null};},componentWillReceiveProps:function(q){if(this.props.view!==q.view)this.setState({additionalHeaderProps:null});},render:function(){return (o.createElement(h,o.__spread({},this.props,{onRenderView:this._onRenderView,section:g.FUNNELS,additionalHeaderProps:this.state.additionalHeaderProps,entityStore:n,getDescription:this._getDescription})));},_onRenderView:function(q,r,s,t,u,v,w){switch(q){case m.LIST:return (o.createElement(l,{appID:i.getObjID(),cardKey:"funnelList",funnelList:r,key:"funnelList"}));case m.DETAILS:return (o.createElement(j,{cardKey:"funnelData",funnelID:s,key:"funnelData",funnel:t,startTime:u,endTime:v,updateHeaderProps:this._onUpdateHeaderProps,segmentID:w}));case m.CREATE:case m.EDIT:return (o.createElement(k,{appID:i.getObjID(),cardKey:"funnelEdit",funnelID:s,key:"funnelEdit",funnel:t}));}return null;},_onUpdateHeaderProps:function(q){this.setState({additionalHeaderProps:q});}});e.exports=p;},null);
__d("MobileMeasurementActions.react",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={AUTHENTICATE:'authenticate',ERROR:'error',VIEW_CREATE_ITEM:'view_create_item',VIEW_DETAILS:'view_details',VIEW_EDIT_ITEM:'view_edit_item',VIEW_CREATE_REPORT:'view_create_report'};e.exports=g;},null);
__d("MobileMeasurementAppDispatcher.react",["Dispatcher","MobileMeasurementActions.react","URI","copyProperties"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=j(new g(),{executeActionFromURI:function(l){var m=(new i(l)).getPath().split('/'),n=null;for(var o=0;o<m.length;o++){var p=m[o];if(parseInt(p,10)){n=p;break;}}if(n){this.viewDetails(n);}else if(m.indexOf('reports')!==-1){this.viewCreateReport();}else if(m.indexOf('debug')!==-1){this.viewDebug();}else this.viewDefaultDetails();},executeActionFromInitialURI:function(){this.executeActionFromURI(this._initialURI);},viewDetails:function(l){this._lastAction=h.VIEW_DETAILS;this.dispatch({actions:[{actionType:h.VIEW_DETAILS,id:l}]});},viewDefaultDetails:function(){this._lastAction=h.VIEW_DETAILS;this.dispatch({actions:[{actionType:h.VIEW_DETAILS}]});},viewEditItem:function(l){this._lastAction=h.VIEW_EDIT_ITEM;this.dispatch({actions:[{actionType:h.VIEW_EDIT_ITEM,id:l}]});},viewCreateItem:function(l){this._lastAction=h.VIEW_CREATE_ITEM;this.dispatch({actions:[{actionType:h.VIEW_CREATE_ITEM,parentID:l}]});},viewCreateReport:function(){this._lastAction=h.VIEW_CREATE_REPORT;this.dispatch({actions:[{actionType:h.VIEW_CREATE_REPORT}]});},authenticate:function(){this._lastAction=h.AUTHENTICATE;this.dispatch({actions:[{actionType:h.AUTHENTICATE}]});},error:function(l){this._lastAction=h.ERROR;this.dispatch({actions:[{actionType:h.ERROR,message:l}]});},getLastAction:function(){return this._lastAction;},storeInitialURI:function(l){this._initialURI=l;}});e.exports=k;},null);
__d("XMobileMeasurementExportTrackingURLsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/insights\/mm\/export_tracking_urls\/",{object_id:{type:"Int",required:true}});},null);
__d("MobileMeasurementDAO.react",["AsyncRequest","GraphMobileMeasurementEdge","InsightsGraphAPI","InsightsGraphAPIConstants","MobileMeasurementAppDispatcher.react","MobileMeasurementObjectType","XMobileMeasurementExportTrackingURLsController","XMobileMeasurementGetAdNetworksAsyncController","XMobileMeasurementGetAppEventNamesAsyncController","XMobileMeasurementGetAppLatestSDKVersionsAsyncController","XMobileMeasurementGetAppStoreURLsAsyncController","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s='mm_reports',t={getObjectByID:function(u,v){i.objectGet(j.MOBILE_MEASUREMENT_NODE,u).done(function(w){v(w);});},getChildren:function(u,v){i.objectEdgeGet(j.MOBILE_MEASUREMENT_NODE,u.id,this._getChildGraphEdgeName(u),{fields:['id, name, time_created']}).done(function(w){v(w.data);});},getYesterdayInstalls:function(u,v){i.cachedObjectGet(j.MOBILE_MEASUREMENT_NODE,u,{fields:['yesterday_installs']}).done(function(w){v(w.yesterday_installs);});},getFacebookAppStoreURLs:function(u,v){var w=q.getURIBuilder().getURI().toString();(new g(w)).setData({app_id:u}).setMethod('POST').setHandler(function(x){if(this._validateAsyncEndpointResponse(x))v(x.payload.data);}.bind(this)).send();},getFacebookAppLatestSDKVersions:function(u,v){var w=p.getURIBuilder().getURI().toString();(new g(w)).setData({app_id:u}).setMethod('POST').setHandler(function(x){if(this._validateAsyncEndpointResponse(x))v(x.payload.data);}.bind(this)).send();},getAppEventNames:function(u,v){var w=o.getURIBuilder().getURI().toString();(new g(w)).setData({app_id:u}).setMethod('POST').setHandler(function(x){if(this._validateAsyncEndpointResponse(x))v(x.payload.data);}.bind(this)).send();},getAdNetworks:function(u,v){var w=n.getURIBuilder().getURI().toString();(new g(w)).setData({app_id:v}).setMethod('POST').setHandler(function(x){if(this._validateAsyncEndpointResponse(x))u(x.payload.data);}.bind(this)).send();},exportTrackingURLs:function(u){var v=m.getURIBuilder().setInt('object_id',u).getURI();window.open(v,'tracking_urls_downloaded_frm');},createObject:function(u,v,w,x){var y=x?x:this._getChildGraphEdgeName(u);i.objectEdgePost(j.MOBILE_MEASUREMENT_NODE,u.id,y,v).done(function(z){w(z.id);});},createReport:function(u,v,w){var x={id:u};return this.createObject(x,v,w,s);},updateObject:function(u,v,w){i.objectPost(j.MOBILE_MEASUREMENT_NODE,u.id,v).done(function(x){w();});},deleteObject:function(u,v){i.objectRemove(u.id).done(function(w){v();});},_validateAsyncEndpointResponse:function(u){if(u.payload.error){k.error(u.payload.error);return false;}return true;},_getChildGraphEdgeName:function(u){switch(u.object_type){case l.APP:return (h[l.APP][l.APP_AD_NETWORK]);case l.APP_AD_NETWORK:return (h[l.APP_AD_NETWORK][l.CAMPAIGN]);case l.CAMPAIGN:return (h[l.CAMPAIGN][l.AD_SET]);case l.AD_SET:return (h[l.AD_SET][l.AD]);}r(false);}};e.exports=t;},null);
__d("MobileMeasurementFormInput.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g.createClass({displayName:"MobileMeasurementFormInput",render:function(){var k=this.props,l=k.className,m=(function(o,p){var q={},r=Object.prototype.hasOwnProperty;if(o==null)throw new TypeError();for(var s in o)if(r.call(o,s)&&!r.call(p,s))q[s]=o[s];return q;})(k,{className:1}),n=i("mbl",l);return (g.createElement("div",g.__spread({},m,{className:n}),g.createElement("div",{className:"_2qn7"},this.props.children[0]),this.props.children[1]));}});e.exports=j;},null);
__d("MobileMeasurementAdNetworkInputMixin.react",["immutable","MobileMeasurementClickthroughMacros","MobileMeasurementDAO.react","MobileMeasurementFormInput.react","React","XUISelector.react","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=l.Option,o={renderAdNetworks:function(){if(this.props.item)return null;var p=!this.state.selectedAdNetwork?k.createElement(n,null,m._("Seleccionar...")):null;return (k.createElement(j,null,m._("Ad Network"),k.createElement(l,{onChange:this._onAdNetworkChange},p,this.state.adNetworks.map(function(q){return (k.createElement(n,{key:q.id,value:q.id},q.name));}))));},getAdNetworks:function(p){if(!this.state.adNetworks.length)i.getAdNetworks(function(q){this.setState({adNetworks:q});}.bind(this),p);},getAdNetworkFromState:function(){return {ad_network_id:this.state.selectedAdNetwork};},_onAdNetworkChange:function(event){i.getObjectByID(String(event.value),function(p){this.setState({selectedAdNetwork:p.id,selectedAdNetworkProps:p.app_specific_props||[],selectedAdNetworkSupportsDynamicParams:p.supports_dynamic_params,selectedAdNetworkFields:g.Map(),defaultFields:g.Map()});}.bind(this));},getMacros:function(){var p={},q=h[this.state.selectedAdNetwork];if(q){p=q.generic;switch(this.state.selectedPlatform){case 'android':p=Object.assign({},p,q.android);break;case 'iphone':case 'ipad':p=Object.assign({},p,q.ios);break;}}return p;}};e.exports=o;},null);
__d("TextAreaWithLineLimit.react",["AbstractTextArea.react","React","ReactComponentWithPureRenderMixin","TextAreaControl","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=h,n=m.PropTypes,o=h.createClass({displayName:"TextAreaWithLineLimit",mixins:[i],propTypes:{onLostFocus:n.func,maxLines:n.number,maxCharacterPerLine:n.number,onChange:n.func.isRequired},getInitialState:function(){return {internalValue:""};},getDefaultProps:function(){return {maxLines:-1,maxCharacterPerLine:-1};},componentDidMount:function(){var p=this.refs.textArea.getTextFieldDOM();this._control=new j(p);this._control.setAutogrow(true);this._control.onupdate();this.setState({internalValue:p.value});},componentDidUpdate:function(){this._control.onupdate();},componentWillUnmount:function(){this._control=null;},_onTextChange:function(event){var p=event.target.value;if(!this._isTextWithinLimit(p)){event.target.value=this.state.internalValue;}else{this.setState({internalValue:p});this.props.onChange(p);}},_isTextWithinLimit:function(p){var q=p.split(/\r\n|\r|\n/);if(this.props.maxLines>0&&q.length>this.props.maxLines)return false;if(this.props.maxCharacterPerLine>0)for(var r=0;r<q.length;r++)if(q[r].length>this.props.maxCharacterPerLine)return false;return true;},render:function(){var p=l(this.props.className,(("_xz")));return (h.createElement(g,h.__spread({},this.props,{className:p,onChange:this._onTextChange,onBlur:this.props.onLostFocus,ref:"textArea"})));}});e.exports=o;},null);
__d("FalcorMobileMeasurementCreateClickTagsSectionController",["BonsaiConfig","FalcorCard","FalcorSectionRendererMixin","Grid.react","immutable","InsightsContext","MobileMeasurementAdNetworkInputMixin.react","MobileMeasurementClickthroughParam","MobileMeasurementConstants","MobileMeasurementDAO.react","MobileMeasurementText","React","TextAreaWithLineLimit.react","URI","XUISelector.react","XUITextInput.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();'use strict';var y=j.GridItem,z=u.Option,aa=r,ba=aa.PropTypes,ca=['AD_NETWORK_CAMPAIGN_ID','AD_NETWORK_CAMPAIGN_NAME','AD_NETWORK_ADSET_ID','AD_NETWORK_ADSET_NAME','AD_NETWORK_AD_ID','AD_NETWORK_AD_NAME'],da={android:'a',iphone:'i',ipad:'d'},ea=r.createClass({displayName:"FalcorMobileMeasurementCreateClickTagsSectionController",mixins:[i,m],propTypes:{additionalHeaderProps:ba.object},getInitialState:function(){return {adNetworks:[],customFields:k.Repeat(k.Map({key:'',value:''}),o.NUM_SUPPORTED_CUSTOM_PARAMS).toList(),defaultFields:k.Map(),selectedAdNetwork:null,selectedAdNetworkProps:[],selectedAdNetworkFields:k.Map(),adNetworkProps:{},selectedPlatform:null,urls:k.Map()};},componentWillMount:function(){this.getAdNetworks();p.getFacebookAppStoreURLs(l.getObjID(),function(fa){return this.setState({urls:k.fromJS(fa)});}.bind(this));},getHeaderProps:function(){return this.props.additionalHeaderProps;},_onPlatformChange:function(event){this.setState({selectedPlatform:event.value});},_renderAdNetworkSelector:function(){var fa=r.createElement(z,{className:"hidden_elem"},x._("Select Ad Network...")),ga=this.state.adNetworks.filter(function(ha){return !g.adNetworksToFilter[ha.id];}).sort().map(function(ha){return (r.createElement(z,{key:ha.id,value:ha.id},ha.name));});return (r.createElement(u,{key:"adNetworkSelector",onChange:this._onAdNetworkChange},fa,ga));},_renderPlatformSelector:function(){var fa=r.createElement(z,{className:"hidden_elem"},x._("Select Platform...")),ga=this.state.urls.map(function(ha,ia){return r.createElement(z,{key:ia,value:ia},q.platform[ia]||ia);});return (r.createElement(u,{key:"platformSelector",onChange:this._onPlatformChange},fa,ga));},_isFirstStepCompleted:function(){var fa=this.state.selectedAdNetworkProps&&this.state.selectedAdNetworkProps.every(function(ga){return this.state.selectedAdNetworkFields.get(ga.key);}.bind(this));if(this.state.selectedAdNetwork&&this.state.selectedPlatform&&fa)return true;return false;},_renderAdNetworkParams:function(){if(!this._isFirstStepCompleted())return null;var fa=x._("Opcional"),ga=ca.map(function(ia){var ja=n[ia];return (r.createElement(j,{key:ia,className:"_3-96",cols:2},r.createElement(y,{key:ia+'_key'},r.createElement("div",{className:"_4s2e _3ei_"},ia)),r.createElement(y,{key:ia+'_value'},r.createElement(v,{className:"_4s2f",value:this.state.defaultFields.get(ja)||'',onChange:function(event){return this._onDefaultFieldsChange(ia,event);}.bind(this),placeholder:fa,height:"tall"}))));}.bind(this)),ha=this.state.customFields.map(function(ia,ja){var ka=this.state.customFields.getIn([ja,'key'])?null:fa;return (r.createElement(j,{key:'custom_param_'+ja,className:"_3-96",cols:2},r.createElement(y,{key:'custom_param_key_'+ja},r.createElement(v,{className:"_4s2e",placeholder:'Custom Property',onChange:function(event){return this._onCustomFieldKeyChange(ja,event);}.bind(this),value:this.state.customFields.getIn([ja,'key']),height:"tall"})),r.createElement(y,{key:'custom_param_key_value_'+ja},r.createElement(v,{className:"_4s2f",onChange:function(event){return this._onCustomFieldValueChange(ja,event);}.bind(this),placeholder:ka,value:this.state.customFields.getIn([ja,'value']),height:"tall"}))));}.bind(this));return (r.createElement("div",{className:"_4s2d"},ga,ha));},_onDefaultFieldsChange:function(fa,event){this.setState({defaultFields:this.state.defaultFields.set(n[fa],event.target.value)});},_onSelectedAdNetworkFieldChange:function(fa,event){this.setState({selectedAdNetworkFields:this.state.selectedAdNetworkFields.set(fa,event.target.value)});},_onCustomFieldKeyChange:function(fa,event){var ga=event.target.value;this.setState({customFields:this.state.customFields.setIn([fa,'key'],ga)});},_onCustomFieldValueChange:function(fa,event){var ga=event.target.value;this.setState({customFields:this.state.customFields.setIn([fa,'value'],ga)});},getContent:function(){var fa=this.state.urls.get(this.state.selectedPlatform),ga=fa?x._("URL de destino"):null,ha=fa?r.createElement("div",{className:"_2c0z _3ei_"},fa):null,ia=[];this.state.selectedAdNetworkProps.forEach(function(ja){ia.push(r.createElement(y,{key:ja.key},r.createElement("div",{className:"_4s2g"},ja.display)));ia.push(r.createElement(y,{key:ja.display},r.createElement(v,{className:"_4s2f",value:this.state.selectedAdNetworkFields.get(ja.key),onChange:function(event){return this._onSelectedAdNetworkFieldChange(ja.key,event);}.bind(this),height:"tall"})));}.bind(this));return [r.createElement("div",{key:"FalcorMobileMeasurementClickTagsSectionContent"},r.createElement(h,{title:x._("Informaci\u00f3n b\u00e1sica"),showLine:false,stepNumber:1},r.createElement(j,{cols:2,spacing:"pas"},r.createElement(y,{className:"_4s2g",key:"AdNetworkLabel"},x._("AD NETWORK")),r.createElement(y,{key:"AdNetworkSelector"},this._renderAdNetworkSelector()),ia,r.createElement(y,{className:"_4s2g",key:"PlatformLabel"},x._("Plataforma")),r.createElement(y,{key:"PlatformSelector"},this._renderPlatformSelector()),r.createElement(y,{className:"_4s2g",key:"DestinationURLLabel"},ga),r.createElement(y,{key:"DestinationURLInput"},ha))),r.createElement(j,{cols:2,alignv:"top",spacing:"pam"},r.createElement(y,{className:"_4s2h",key:"CustomizeClickTagStep"},r.createElement(h,{title:x._("Customize Your Click Tag"),showLine:false,stepNumber:2},this._renderAdNetworkParams())),r.createElement(y,{className:"_4s2i",key:"CopyURLStep"},r.createElement(h,{title:x._("Copy Your URL"),showLine:false,stepNumber:3},this._renderClickTagURL()))))];},_renderClickTagURL:function(){if(!this._isFirstStepCompleted())return null;return (r.createElement(s,{className:"_3x3d",value:this._getClickTagURL(),onChange:function(){}}));},_getClickTagURL:function(){if(!this._isFirstStepCompleted())return '';var fa=new t(o.TRACKING_URL),ga={};ga[n.APP_ID]=l.getObjID();ga[n.AD_NETWORK_ID]=this.state.selectedAdNetwork;if(this.state.selectedPlatform)ga[n.OS_TYPE]=da[this.state.selectedPlatform];fa.addQueryData(ga);fa.addQueryData(this.state.defaultFields.filter(function(ja){return ja;}).toJS());fa.addQueryData(this.state.selectedAdNetworkFields.filter(function(ja){return ja;}).toJS());this.state.customFields.forEach(function(ja,ka){var la={},ma=n['CUSTOM_KEY_'+(ka+1)],na=n['CUSTOM_VALUE_'+(ka+1)];if(ja.get('key')&&ja.get('value')){la[ma]=ja.get('key');la[na]=ja.get('value');}fa.addQueryData(la);});var ha=fa.toString(),ia=this.getMacros();ia=Object.keys(ia).map(function(ja){return ja+'='+ia[ja];}).join('&');if(ia.length){ia=Object.keys(fa.getQueryData()).length?'&'+ia:'?'+ia;ha+=ia;}return ha;}});e.exports=ea;},null);
__d("FalcorTextArea.react",["AbstractTextArea.react","DOMQuery","React","TextAreaControl"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"FalcorTextArea",propTypes:Object.assign({},g.containerPropTypes),componentDidMount:function(){var l=h.find(i.findDOMNode(this),'textarea');this._control=new j(l);this._control.setAutogrow(true);this._control.onupdate();},componentDidUpdate:function(l,m){if(l.value!==this.props.value)this._control.onupdate();},render:function(){return (i.createElement(g,i.__spread({},this.props)));}});e.exports=k;},null);
__d("MobileMeasurementModel",["MobileMeasurementReportType","fbt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={isValid:function(){return true;},getDescription:function(){return this.description;},getWireFormat:function(){return {name:this.name,description:this.description,type:this.type,start_ts:this.start_ts/1000,end_ts:this.end_ts/1000,networks:this.networks,aggregate_by:this.aggregate_by,event_names:this.event_names};}};function j(k){var l;if(!k){l=Object.assign({},i,{id:null,name:h._("New Report"),description:null,type:g.AGGREGATED,start_ts:null,end_ts:null,networks:[],aggregate_by:[],event_names:[]});}else{l=Object.assign({},i,{id:k.id,name:k.name,description:k.description,time_last_updated:k.last_update_timestamp});k.generation_parameters.forEach(function(m){l[m.key]=m.value;});}return l;}e.exports=j;},null);
__d("MobileMeasurementStore",["MobileMeasurementModel","InsightsEntityStore","InsightsGraphAPIConstants"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=null;function k(){if(!j)j=new h(i.MOBILE_MEASUREMENT_EDGE,i.MOBILE_MEASUREMENT_NODE,g);return j;}e.exports=k();},null);
__d("FalcorMMReportsCreateCard",["BonsaiAppEventTypesUtils","FalcorTextArea.react","FalcorCard","FalcorParameterRuleBuilderSearchSource","FalcorParameterRuleBuilderTypeaheadView","MobileMeasurementConstants","MobileMeasurementDAO.react","MobileMeasurementStore","MobileMeasurementText","InsightsContext","InsightsUtils","React","XUIDatePicker.react","XUITextInput.react","XUITokenizer.react","XUITokenizerToken.react","cx","d3/time/day","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();'use strict';var z=r,aa=z.PropTypes,ba={ViewRenderer:k,TokenRenderer:v,maxEntries:Infinity,useLayer:true},ca=r.createClass({displayName:"FalcorMMReportsCreateCard",propTypes:{report:aa.object.isRequired,reportID:aa.string},getInitialState:function(){return {adNetworks:[],searchSources:{networks:new j([]),aggregate_by:new j([]),event_names:new j([])}};},componentWillMount:function(){m.getAdNetworks(function(ga){var ha=ga.map(function(ia){return {uniqueID:String(ia.id),title:ia.name};});this.state.searchSources.networks.setValues(ha);}.bind(this));var da=l.AGGREGATE_BY_PARAMS,ea=Object.keys(da).map(function(ga){var ha=da[ga];return {uniqueID:ha,title:o.aggregate_by_params[ha]};});this.state.searchSources.aggregate_by.setValues(ea);var fa=g.getAppEvents().map(function(event){return {uniqueID:event.event_name,title:event.display_name};});this.state.searchSources.event_names.setValues(fa);},render:function(){var da=null,ea=null;if(p.getShowMMReportFields()){da=this._renderTokenizer('networks',y._("Redes"));ea=this._renderTokenizer('event_names',y._("REPORT ON"));}return (r.createElement(i,null,this._renderName(),this._renderDescription(),this._renderDatePicker(),da,this._renderTokenizer('aggregate_by',y._("AGGREGATE BY")),ea));},_renderName:function(){return (r.createElement("div",null,r.createElement("div",{className:"_4s2g"},y._("Nombre del informe")),r.createElement(t,{className:"_4gpq",height:"tall",onChange:function(da){this._updateInfo('name',da.target.value);}.bind(this),value:this.props.report.name})));},_renderDescription:function(){return (r.createElement("div",null,r.createElement("div",{className:"_4s2g"},y._("DESCRIPCI\u00d3N")),r.createElement(h,{className:"_4gpr",onChange:function(da){this._updateInfo('description',da.target.value);}.bind(this),value:this.props.report.description})));},_renderDatePicker:function(){var da=this.props.report.end_ts;if(da)da=q.pacificSecondsToUTCDate(da/1000).getTime();var ea=this.props.report.start_ts?x.utc.offset(this.props.report.start_ts,-1).getTime()/1000:null,fa=x.utc.offset(new Date(),-1).getTime()/1000;return (r.createElement("div",null,r.createElement("div",{className:"_4s2g"},y._("REPORT DATES")),r.createElement(s,{className:"_5r-f",latestTime:fa,shouldSetDefaultDate:false,placeholder:"Start Date",onCalendarSelectDateChange:function(ga){this._updateInfo('start_ts',q.utcTimeToPacificDay(ga).getTime());}.bind(this),initialTime:this.props.report.start_ts}),r.createElement("span",{className:"_5r-g _2pi8"},"to"),r.createElement(s,{className:"_5r-f",earliestTime:ea,latestTime:fa,shouldSetDefaultDate:false,placeholder:"End Date",onCalendarSelectDateChange:function(ga){var ha=x.utc.offset(ga,1),ia=q.utcDateToPacificSeconds(ha)-1;this._updateInfo('end_ts',ia*1000);}.bind(this),initialTime:da})));},_renderTokenizer:function(da,ea){return (r.createElement("div",{className:"_3-8x"},r.createElement("div",{className:"_4s2g"},ea),r.createElement(u,{className:"_4wpc _29wx",entries:this.state.searchSources[da].getSearchEntries(this.props.report[da]),onRemoveEntryAttempt:function(fa){this._onRemoveToken(da,fa);}.bind(this),onAddEntryAttempt:function(fa){this._onAddToken(da,fa);}.bind(this),presenter:ba,searchSource:this.state.searchSources[da],showEntriesOnFocus:true})));},_onAddToken:function(da,ea){var fa={};fa[da]={$push:[ea.getUniqueID()]};n.updateEntityConfiguration(fa);},_onRemoveToken:function(da,ea){var fa=this.props.report[da].indexOf(ea.getUniqueID());if(fa<0)return;var ga={};ga[da]={$splice:[[fa,1]]};n.updateEntityConfiguration(ga);},_updateInfo:function(da,ea){var fa={};fa[da]={$set:ea};n.updateEntityConfiguration(fa);}});e.exports=ca;},null);
__d("FalcorMMReportsGenerateCard",["FalcorAsyncTaskLoaderMixin","FalcorLoadingCard","InsightsGraphAPIConstants","Link.react","React"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=k,m=l.PropTypes,n=k.createClass({displayName:"FalcorMMReportsGenerateCard",mixins:[g],propTypes:{report:m.object.isRequired,reportID:m.string.isRequired},componentWillMount:function(){var o={fields:'data'};this.loadAsyncTaskData(i.MOBILE_MEASUREMENT_NODE,this.props.reportID,o,this._onDataLoaded);},getInitialState:function(){return {isLoaded:false,loadedReport:{}};},render:function(){if(!this.state.isLoaded)return k.createElement(h,null);if(this.state.loadedReport.download_url){return (k.createElement(j,{href:this.state.loadedReport.download_url},"DOWNLOAD"));}else if(this.state.loadedReport.failed_timestamp)return (k.createElement("div",null,"FAILED"));},_onDataLoaded:function(o){this.setState({isLoaded:true,loadedReport:o});}});e.exports=n;},null);
__d("FalcorMMReportsListCard",["FalcorAsyncTaskLoaderMixin","FalcorCard","FalcorPaginatedDataTable","Image.react","immutable","InsightsEventLogger","InsightsGraphAPIConstants","InsightsLoadingIndicator.react","React","URI","cx","fbt","formatDate","ix","xuiglyph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();'use strict';var v=o,w=v.PropTypes,x=[{id:'name',label:r._("Nombre"),cellRenderer:function(z){return z.name;}},{id:'report_range',label:r._("Report Range"),cellRenderer:function(z){var aa=new Date(z.start*1000),ba=new Date(z.end*1000);return s(aa,'m/d/Y')+' - '+s(ba,'m/d/Y');}},{id:'closing_date',label:r._("Closing Date"),cellRenderer:function(z){return null;}},{id:'last_modified',label:r._("\u00daltima modificaci\u00f3n"),cellRenderer:function(z){z=new Date(z*1000);return s(z,'m/d/Y');}},{id:'download_delete',cellRenderer:function(z){var aa=z.allowDownload?function(){z.onDownload(z.id);}:null,ba=z.isLoading?o.createElement(j,{src:t('images/careers/download.png'),onClick:aa}):o.createElement(n,{className:"_4t15",size:"small"});return (o.createElement("div",null,ba,o.createElement(j,{className:"_3-9d",src:u({name:'cross',size:'medium',shade:'light'})})));}}],y=o.createClass({displayName:"FalcorMMReportsListCard",mixins:[g],propTypes:{appID:w.string.isRequired,reportList:w.array},getInitialState:function(){return {loadingIDs:k.List.of()};},componentDidMount:function(){l.logCardView('mm_report_list',{});},render:function(){if(!this.props.reportList)return null;return (o.createElement(h,null,o.createElement(i,{columns:x,rows:this._getDataRows()})));},_onDataLoaded:function(z,aa){var ba=this.state.loadingIDs.indexOf(aa);if(ba>-1)this.setState({loadingIDs:this.state.loadingIDs["delete"](ba)});(new p(z.download_url)).go();},_onDownloadClick:function(z){var aa={fields:'data'};this.loadAsyncTaskData(m.MOBILE_MEASUREMENT_NODE,z,aa,this._onDataLoaded);this.setState({loadingIDs:this.state.loadingIDs.push(z)});},_getDataRows:function(){var z=this.props.reportList.map(function(aa){var ba=this.state.loadingIDs.indexOf(aa.id);return {name:{name:aa.name},report_range:{start:aa.start_ts,end:aa.end_ts},closing_date:null,last_modified:aa.last_update_timestamp,download_delete:{id:aa.id,isLoading:ba<0,onDownload:this._onDownloadClick,allowDownload:this.state.loadingIDs.isEmpty()}};}.bind(this));return z;}});e.exports=y;},null);
__d("FalcorMMReportsSectionController",["BonsaiSections","FalcorAnalyticsFeatureSectionController","InsightsContext","FalcorMMReportsCreateCard","FalcorMMReportsGenerateCard","FalcorMMReportsListCard","FalcorCommonViews","MobileMeasurementStore","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=o.createClass({displayName:"FalcorMMReportsSectionController",propTypes:Object.assign({},h.containerPropTypes),render:function(){return (o.createElement(h,o.__spread({},this.props,{onRenderView:this._onRenderView,section:g.MOBILE_MEASUREMENT,entityStore:n})));},_onRenderView:function(q,r,s,t,u,v,w){switch(q){case m.LIST:return (o.createElement(l,{appID:i.getObjID(),cardKey:"mmReportList",key:"mmReportList",reportList:r}));case m.CREATE:return (o.createElement(j,{appID:i.getObjID(),cardKey:"mmReport",key:"mmReport",report:t,reportID:s}));case m.DETAILS:return (o.createElement(k,{cardKey:"mmReport",key:"mmReport",report:t,reportID:s}));}return null;}});e.exports=p;},null);
__d("FalcorMobileMeasurementSectionController",["BonsaiSections","FalcorMobileMeasurementCreateClickTagsSectionController","FalcorMMReportsSectionController","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l='click',m='report',n=[{key:l,label:k._("YOUR CLICK TAGS")},{key:m,label:k._("ATTRIBUTION REPORTS")}],o=j.createClass({displayName:"FalcorMobileMeasurementSectionController",statics:{getKey:function(){return g.MOBILE_MEASUREMENT;}},getInitialState:function(){return {activeSubsection:l};},render:function(){if(this.state.activeSubsection===l)return (j.createElement(h,j.__spread({},this.props,{additionalHeaderProps:this.getHeaderProps()})));return (j.createElement(i,j.__spread({},this.props,{additionalHeaderProps:this.getHeaderProps()})));},getTitle:function(){return k._("Anuncios para aplicaciones");},getHeaderProps:function(){return {title:this.getTitle(),subsections:{tabs:n,onChange:this.onSubsectionChange,active:this.state.activeSubsection}};},onSubsectionChange:function(p){this.setState({activeSubsection:p});}});e.exports=o;},null);
__d("FalcorMobileMeasurementUnavailableSectionController",["BonsaiSections","BonsaiSectionDisplayNames","FalcorEmptyFeatureCard","FalcorSectionRendererMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=k.createClass({displayName:"FalcorMobileMeasurementUnavailableSectionController",mixins:[j],statics:{getKey:function(){return g.MOBILE_MEASUREMENT;}},getTitle:function(){return h.get(l.getKey());},getContent:function(){return [k.createElement(i,{section:g.MOBILE_MEASUREMENT})];}});e.exports=l;},null);
__d("FalcorMonetizeAdsNetworkCard",["BonsaiApiBreakdown","BonsaiApiDataAdapter","BonsaiApiError","BonsaiApiPromise","BonsaiBreakdownChart","BonsaiConstants","BonsaiDownloadMixin","BonsaiErrorNotice","BonsaiSectionDataLoaderMixin","BonsaiStyle","BonsaiText","FalcorLegendSelectorMixin","FalcorLogCardViewMixin","FalcorPaginatedDataTable","InsightsNumUtils","InsightsPager.react","InsightsLoadingIndicator.react","InsightsInfoTip.react","React","ReactXUIMenu","PopoverMenu.react","XUIPopoverButton.react","PrettyNum","cx","fbt","formatDate","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){b.__markCompiled&&b.__markCompiled();'use strict';var ha=b('ReactXUIMenu').Item,ia=y.createClass({displayName:"FalcorMonetizeAdsNetworkCard",mixins:[o,m,r,s],_methods:{COUNT:'count',SUM:'payout'},_events:{revenue:'fb_ad_network_revenue',clicks:'fb_ad_network_click',impressions:'fb_ad_network_imp',requests:'fb_ad_network_request'},getInitialState:function(){return Object.assign({},this._getInitialCardState('requests'),{placement:l.ALL});},_fetchData:function(ja,ka,la){Object.keys(this._methods).forEach(function(ma){Object.keys(this._events).forEach(function(event){var na=this._events[event],oa=[ja,this._methods[ma],na],pa='app_event',qa={breakdowns:ja,event_name:na,aggregateBy:ma};if(la){this.addRangeMetric(oa,pa,qa,la);}else this.addMetric(oa,pa,qa);},this);},this);this.fetchMetrics(ka);},_fetchCountryData:function(ja){var ka=this._getCountryBreakdown(ja);this._fetchData(ka,true,ja);},_getCountryBreakdown:function(ja){return (ja.since.getTime()<Date.parse('2014-08-01'))?[g.COUNTRY]:[g.PLACEMENT,g.COUNTRY];},componentWillReceiveProps:function(ja){if(this.state.activeSection==='detailCountry')this._fetchCountryData(ja.visibleDateRange);},componentWillMount:function(){this._fetchData([g.PLACEMENT]);this._fetchCountryData(this.props.visibleDateRange);},_payoutTab:function(){var ja=this.getData([g.PLACEMENT,'payout',this._events.revenue]);return this._buildTimeSeriesChartGroup(y.createElement(k,y.__spread({},this._getLegendProps(),{ref:"payout",breakdown:g.PLACEMENT,data:ja,key:g.PLACEMENT,currency:"USD",categories:[this._getHelptextMap().payout]})));},_metricTabs:function(){var ja={};['requests','impressions','clicks'].forEach(function(ka){var la=this.getData([g.PLACEMENT,'count',this._events[ka]]);ja[ka]=this._buildTimeSeriesChartGroup(y.createElement(k,y.__spread({},this._getLegendProps(),{ref:ka,breakdown:g.PLACEMENT,data:la,key:g.PLACEMENT,categories:[this._getHelptextMap()[ka]]})));}.bind(this));return ja;},_getExtraCardProps:function(){if(this.state.activeSection==='detailDate')return {showLine:false,buttons:this._placementFilter()};if(this.state.activeSection==='detailCountry'){var ja=this._getCountryBreakdown(this.props.visibleDateRange);return {showLine:false,buttons:this._placementFilter(ja.toString()===[g.COUNTRY].toString())};}return null;},getFileName:function(){var ja=this._title().replace(/ +/g,'')+'_'+q.getBucketLabel(this.state.placement,g.PLACEMENT).replace(/ +/g,'').toUpperCase();if(this.state.activeSection==='detailDate')return ja;if(this.state.activeSection==='detailCountry'){ja=ja+'_COUNTRY';return ja;}return null;},getExportData:function(){if(this.state.activeSection==='detailDate')return this._placementDetail()["export"];if(this.state.activeSection==='detailCountry'){var ja=this._getCountryBreakdown(this.props.visibleDateRange);return this._geoDetail(ja)["export"];}return null;},_tableTab:function(){var ja=this._placementDetail(),ka=this._getCountryBreakdown(this.props.visibleDateRange),la=this._geoDetail(ka);return {detailDate:ja.table,detailCountry:la.table};},_getHelptextMap:function(){return {payout:'AdNetworkEstRevenue',requests:'AdNetworkRequests',impressions:'AdNetworkImpressions',clicks:'AdNetworkClicks',detailDate:'AdNetworkPerformanceDetails',detailCountry:'AdNetworkPerformanceDetails'};},_getKeyToLabel:function(){return {requests:q.requests,impressions:q.impressions,clicks:q.clicks,payout:q.payout,detailDate:q.detail_date,detailCountry:q.detail_country};},_getKeyToSection:function(){return Object.assign({},this._metricTabs(),this._tableTab(),{payout:this._payoutTab()});},_title:function(){return ea._("Rendimiento de la red de p\u00fablico");},_placementFilter:function(ja){var ka=ea._("Todas las ubicaciones de anuncios"),la=ka,ma=this.getData([g.PLACEMENT,'count',this._events.requests]);if(!(ma instanceof h))return null;var na=ma.getBreakdowns()[g.PLACEMENT];if(!ja&&this.state.placement&&this.state.placement!==l.ALL){la=q.getBucketLabel(this.state.placement,g.PLACEMENT);na.unshift(l.ALL);}var oa=function(ra,sa){this.setState({placement:sa.item.getValue()});},pa=null;if(na)pa=na.map(function(ra){var sa=q.getBucketLabel(ra,g.PLACEMENT);if(ra!==l.ALL){sa=sa+' ('+ra+')';}else sa=ka;return (y.createElement(ha,{className:"_2li5",value:ra,key:ra},sa));});var qa=y.createElement(z,{className:"_2li4",onItemClick:oa.bind(this)},pa);return (y.createElement("div",null,y.createElement(aa,{className:"_1il3",disabled:ja,menu:qa,align:"right"},y.createElement(ba,{className:"_5g1q _5gr9",label:la}))));},_getBreakdownDataset:function(ja){var ka=this.getData([ja,'payout',this._events.revenue]),la=this.getData([ja,'count',this._events.clicks]),ma=this.getData([ja,'count',this._events.impressions]),na=this.getData([ja,'count',this._events.requests]),oa=this.getData([ja,this._methods.SUM,this._events.requests]);return [ka,la,ma,na,oa];},_placementDetail:function(){var ja=this._getBreakdownDataset(g.PLACEMENT);if(ja.some(function(wa){return wa instanceof j;}))return {table:y.createElement(w,null)};if(ja.some(function(wa){return wa instanceof i;})){var ka=ja.filter(function(wa){return wa instanceof i;});return ({table:y.createElement(n,{className:"_3-8t _3-96",message:ka[0].getMessage()})});}if(this.state.placement&&this.state.placement!==l.ALL)ja=ja.map(function(wa){return wa.groupBy(g.PLACEMENT)[this.state.placement];}.bind(this));var la=ja[3].getTimes(),ma=ja.map(function(wa){var xa={};if(wa instanceof h){var ya=wa.getTimeSeries();ya.forEach(function(za){xa[za[0].getTime()]=za[1];});}return xa;});la.sort(function(wa,xa){return xa-wa;});var na=la.map(function(wa){var xa=wa.getTime(),ya=ma.map(function(za){return za[xa];});ya.unshift(wa.getTime().toString());ya.unshift(fa(wa,'D M d, Y',{utc:true}));return ya;}),oa=null;if(na.length>0){oa=[{header:q.clicks,body:[]},{header:q.impressions,body:[]},{header:q.requests,body:[]},{header:q.filled,body:[]},{header:q.est_revenue,body:[]}];var pa;for(pa=0;pa<na.length;pa++){var qa=new Date(parseInt(na[pa][1],10)),ra=na[pa][3]?u.prettyInt(na[pa][3]):0,sa=na[pa][4]?u.prettyInt(na[pa][4]):0,ta=na[pa][5]?u.prettyInt(na[pa][5]):0,ua=na[pa][6]?u.prettyInt(na[pa][6]):0,va=na[pa][2]?u.prettyCurrency('USD',na[pa][2]):0;oa[0].body.push({time:qa,value:ra});oa[1].body.push({time:qa,value:sa});oa[2].body.push({time:qa,value:ta});oa[3].body.push({time:qa,value:ua});oa[4].body.push({time:qa,value:va});}}return {table:this._detailTable(na,q.date,'key'),"export":oa};},_geoDetail:function(ja){var ka=this._getBreakdownDataset(ja);if(ka.some(function(cb){return cb instanceof j;}))return {table:y.createElement(w,null)};if(ka.some(function(cb){return cb instanceof i;})){var la=ka.filter(function(cb){return cb instanceof i;});return ({table:y.createElement(n,{className:"_3-8t _3-96",message:la[0].getMessage()})});}var ma=function(cb,db){var eb=(cb!=='u')?q.getBucketLabel(cb,g.COUNTRY):ea._("Resto del mundo");db.unshift(eb);db.unshift(eb);return db;},na=ka.map(function(cb){return cb.groupBy(g.COUNTRY);}),oa=Object.keys(na[3]),pa=[];if(ja.toString()===[g.PLACEMENT,g.COUNTRY].toString()){var qa=null;if(this.state.placement&&this.state.placement!==l.ALL)qa=this.state.placement;var ra=[];oa.forEach(function(cb){var db=na[3][cb].groupBy(g.PLACEMENT);Object.keys(db).forEach(function(eb){if((!qa||eb===qa))if(ra.indexOf(eb)===-1)ra.push(eb);},this);}.bind(this),this);if(ra.length>0)pa=oa.map(function(cb){var db=na.map(function(eb){if(eb[cb]){var fb=eb[cb].groupBy(g.PLACEMENT);return ra.map(function(gb){return fb[gb]?fb[gb].getTotal():0;}).reduce(function(gb,hb){return gb+hb;},0);}});return ma(cb,db);});}else pa=oa.map(function(cb){var db=na.map(function(eb){return eb[cb]?eb[cb].getTotal():(void 0);});return ma(cb,db);});pa=pa.filter(function(cb){return cb[5]!==0;});pa.sort(function(cb,db){return db[5]-cb[5];});var sa=null;if(pa.length>0){var ta=[];ta.push([q.country,q.clicks,q.impressions,q.requests,q.filled,q.est_revenue]);var ua;for(ua=0;ua<pa.length;ua++){var va=pa[ua],wa=va[3]?u.prettyInt(va[3]):0,xa=va[4]?u.prettyInt(va[4]):0,ya=va[5]?u.prettyInt(va[5]):0,za=va[6]?u.prettyInt(va[6]):0,ab=va[2]?u.prettyCurrency('USD',va[2]):0;ta.push([va[0],wa,xa,ya,za,ab]);}var bb=[this.props.visibleDateRange.since,this.props.visibleDateRange.until];sa={data:this._createCSVString(ta),times:bb};}return {table:this._detailTable(pa,q.country,'rqsts'),"export":sa};},_detailTable:function(ja,ka,la){var ma='\u002A',na=ja.map(function(ua){var va=ua[0],wa=ua[1],xa=ua[2],ya=ua[3],za=ua[4],ab=ua[5],bb=ua[6],cb={key:va,key_val:wa,rqsts:u.prettyInt(ab),rqsts_val:ab?ab:0,filled_rqsts:bb?u.prettyInt(bb):ma,filled_rqsts_val:bb?bb:0,imps:za?u.prettyInt(za):ma,imps_val:za?za:0,clks:ya?u.prettyInt(ya):ma,clks_val:ya?ya:0,fill_rate:ab&&bb?(new ca(bb/ab,10,2)).toPrettyPercentage():ma,fill_rate_val:bb&&ab?bb/ab:0,ctr:za&&ya?(new ca(ya/za,10,2)).toPrettyPercentage():ma,ctr_val:za&&ya?ya/za:0};if(xa===0||isNaN(xa)){cb=ga(cb,{rpm:ma,rpm_val:0,rpc:ma,rpc_val:0,pay:ma,pay_val:0});}else cb=ga(cb,{rpm:za?'$'+(new ca(1000*xa/za)).toPretty():ma,rpm_val:za?xa/za:0,rpc:ya?'$'+(new ca(xa/ya)).toPretty():ma,rpc_val:ya?xa/ya:0,pay:u.prettyCurrency('USD',xa),pay_val:xa});return cb;}),oa=ea._("Ingresos por clic"),pa=ea._("Ingresos por 1000 impresiones"),qa=ea._("Porcentaje de clics"),ra=ea._("Solicitudes que recibieron un anuncio"),sa=[{id:'key',label:ka,sortable:true,comparator:function(ua,va){return va.key_val.localeCompare(ua.key_val);}},{id:'rqsts',label:q.requests,sortable:true,comparator:function(ua,va){return va.rqsts_val-ua.rqsts_val;}},{id:'filled_rqsts',sortable:true,comparator:function(ua,va){return va.filled_rqsts_val-ua.filled_rqsts_val;},label:(y.createElement(x,{tip:ra},q.filled))},{id:'imps',label:q.impressions,sortable:true,comparator:function(ua,va){return va.imps_val-ua.imps_val;}},{id:'clks',label:q.clicks,sortable:true,comparator:function(ua,va){return va.clks_val-ua.clks_val;}},{id:'fill_rate',label:ea._("Tasa de relleno"),sortable:true,comparator:function(ua,va){return va.fill_rate_val-ua.fill_rate_val;}},{id:'ctr',sortable:true,comparator:function(ua,va){return va.ctr_val-ua.ctr_val;},label:(y.createElement(x,{tip:qa},ea._("CTR")))},{id:'rpm',sortable:true,comparator:function(ua,va){return va.rpm_val-ua.rpm_val;},label:(y.createElement(x,{tip:pa},q.rpm))},{id:'rpc',sortable:true,comparator:function(ua,va){return va.rpc_val-ua.rpc_val;},label:(y.createElement(x,{tip:oa},q.rpc))},{id:'pay',sortable:true,comparator:function(ua,va){return va.pay_val-ua.pay_val;},label:q.est_revenue}],ta=null;if(!this.state.showAll)ta=y.createElement(v,{key:"pager",onClick:function(){this.setState({showAll:true});}.bind(this)});return (y.createElement("div",{width:"100%"},y.createElement(t,{columns:sa,columnToSortBy:la,rows:na,pagination:false,pageSize:this.state.showAll?Infinity:p.TABLE_TOP_ROWS_ONE_WEEK}),ta));},_getParamsToLog:function(){return {card_section:this.state.activeSection.toLowerCase()};},_shouldLogAfterComponentDidUpdate:function(ja,ka){return this.state.activeSection!==ka.activeSection;}});e.exports=ia;},null);
__d("FalcorMonetizePaymentCard",["BonsaiLinesTimeSeriesChart","BonsaiSectionDataLoaderMixin","BonsaiText","FalcorLegendSelectorMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=k.createClass({displayName:"FalcorMonetizePaymentCard",mixins:[h,j],metrics:[['spend','payments_daily_spend'],['chargebacks','payments_daily_chargebacks'],['refunds','payments_daily_refunds']],getInitialState:function(){return this._getInitialCardState('spend');},componentWillMount:function(){this.metrics.forEach(function(n){this.addMetric(n[0],n[1]);},this);this.fetchMetrics();},_getHelptextMap:function(){return {spend:'MonetizePaymentsPerformance',chargebacks:'MonetizePaymentsPerformance',refunds:'MonetizePaymentsPerformance'};},_getKeyToSection:function(){var n={};this.metrics.forEach(function(o){var p=o[0];n[p]=this._buildTimeSeriesChartGroup(k.createElement(g,k.__spread({},this._getLegendProps(),{ref:p,data:[this.getData(p)],titles:[i[p]],categories:[this._getHelptextMap()[p]]})));},this);return n;},_getKeyToLabel:function(){return {spend:i.spend,chargebacks:i.chargebacks,refunds:i.refunds};},_title:function(){return l._("Detalles del rendimiento de los pagos de la p\u00e1gina principal de la aplicaci\u00f3n");}});e.exports=m;},null);
__d("OverviewMoneyBar",["InsightsContext","BonsaiOverviewBarMixin","BonsaiSections","BonsaiSectionDateRangeMixin","BonsaiText","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=l.createClass({displayName:"OverviewMoneyBar",mixins:[j,h],getSection:function(){return i.MONETIZE;},getTitle:function(){var o=g.getHasAdsNetwork(),p=g.getHasPayments();if(o&&p){return m._("Pagos de la p\u00e1gina principal de la aplicaci\u00f3n y red de p\u00fablico");}else if(o){return m._("Red de p\u00fablico");}else return m._("Pagos de la p\u00e1gina principal de la aplicaci\u00f3n");},getMetrics:function(){var o=g.getHasAdsNetwork(),p=g.getHasPayments();if(o&&!p){return [{aggregateBy:'SUM',event_name:'fb_ad_network_revenue'},{aggregateBy:'COUNT',event_name:'fb_ad_network_imp'},{aggregateBy:'COUNT',event_name:'fb_ad_network_click'}];}else if(!o&&p){return ['payments_daily_spend','payments_daily_chargebacks','payments_daily_refunds'];}else return [{aggregateBy:'SUM',event_name:'fb_ad_network_revenue'},{aggregateBy:'COUNT',event_name:'fb_ad_network_imp'},'payments_daily_spend'];},getDataAdapters:function(){var o=g.getHasAdsNetwork(),p=g.getHasPayments(),q=this.getMetrics();if(o&&!p){return [this.getData(this.appEventMetricKey(q[0])),this.getData(this.appEventMetricKey(q[1])),this.getData(this.appEventMetricKey(q[2]))];}else if(!o&&p){return [this.getData(0),this.getData(1),this.getData(2)];}else return [this.getData(this.appEventMetricKey(q[0])),this.getData(this.appEventMetricKey(q[1])),this.getData(2)];},getChartLocations:function(){var o=g.getHasAdsNetwork(),p=g.getHasPayments();if(o&&!p){return [{card:'ads_network',tab:'payout'},{card:'ads_network',tab:'impressions'},{card:'ads_network',tab:'clicks'}];}else if(!o&&p){return [{card:'payment',tab:'spend'},{card:'payment',tab:'chargebacks'},{card:'payment',tab:'refunds'}];}else return [{card:'ads_network',tab:'payout'},{card:'ads_network',tab:'impressions'},{card:'payment',tab:'spend'}];},getFormats:function(){var o=g.getHasAdsNetwork(),p=g.getHasPayments();if(o&&!p){return ['$%s','%s','%s'];}else if(!o&&p){return ['$%s','$%s','$%s'];}else return ['$%s','%s','$%s'];},getLabels:function(){var o=g.getHasAdsNetwork(),p=g.getHasPayments();if(o&&!p){return [m._("Ingresos de la red de p\u00fablico"),m._("Impresiones de la red de p\u00fablico"),m._("Clics de la red de p\u00fablico")];}else if(!o&&p){return [k.spend,k.chargebacks,k.refunds];}else return [m._("Ingresos de la red de p\u00fablico"),m._("Impresiones de la red de p\u00fablico"),k.spend];},getReverseDeltas:function(){var o=g.getHasAdsNetwork(),p=g.getHasPayments();if(o&&!p){return [false,false,false];}else if(!o&&p){return [false,true,true];}else return [false,false,false];}});e.exports=n;},null);
__d("FalcorMonetizeSectionController",["BonsaiSections","BonsaiSectionDisplayNames","FalcorSectionDateRangeMixin","FalcorSectionRendererMixin","InsightsContext","FalcorMonetizeAdsNetworkCard","FalcorMonetizePaymentCard","OverviewMoneyBar","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=o.createClass({displayName:"FalcorMonetizeSectionController",mixins:[i,j],statics:{getKey:function(){return g.MONETIZE;}},getSummary:function(){return o.createElement(n,o.__spread({},this.getDateProps()));},getTitle:function(){return h.get(p.getKey());},getContent:function(){var q=[];if(k.getHasAdsNetwork())q.push(o.createElement(l,o.__spread({},this.getDateProps(),{cardKey:"ads_network",key:"ads_network"})));if(k.getHasPayments())q.push(o.createElement(m,o.__spread({},this.getDateProps(),{cardKey:"payment",key:"payment"})));return q;}});e.exports=p;},null);
__d("FalcorOverviewGraphMixin",["BonsaiApiDataAdapter","BonsaiApiError","BonsaiApiPromise","BonsaiErrorNotice","BonsaiSectionDataLoaderMixin","BonsaiSections","InsightsEventLogger","InsightsLoadingIndicator.react","React","URI","XUICard.react","copyProperties","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();'use strict';var u=o,v=u.PropTypes,w={mixins:[k],propTypes:{fullDateRange:v.object.isRequired,visibleDateRange:v.object.isRequired,metrics:v.array.isRequired,title:v.string,widgetKey:v.string.isRequired,chartLocations:v.object,isReverseDelta:v.bool,processData:v.func,formatValue:v.func,section:v.string,hasHeader:v.bool,hasLegend:v.bool},getDefaultProps:function(){return {chartLocations:{},isReverseDelta:false,section:l.CUSTOM_EVENTS,hasHeader:true,hasLegend:false};},_appEventMetricKey:function(x){var y=[x.aggregateBy,x.event_name];if(x.intervals_to_aggregate)y.push(x.intervals_to_aggregate);return y;},componentWillMount:function(){this._fetchAllMetrics();},componentWillReceiveProps:function(x){var y=this.props.visibleDateRange;if(y.since!=x.visibleDateRange.since||y.until!=x.visibleDateRange.until)this._fetchAllMetrics();},_fetchAllMetrics:function(){var x=this.props.metrics;Object.keys(x).forEach(function(y){var z=x[y];if(typeof z!="object"){this.addMetric(y,z);}else this.addMetric(this._appEventMetricKey(z),'app_event',z);}.bind(this));this.fetchMetrics();},_fetchFullRangeData:function(){if(this.getDataAdapters)return this.getDataAdapters();var x=this.props.metrics;return Object.keys(x).map(function(y){var z=x[y],aa=(typeof z!="object")?y:this._appEventMetricKey(z);return this.getRawData(aa);}.bind(this));},_fetchVisibleRangeData:function(){if(this.getDataAdapters)return this.getDataAdapters();var x=this.props.metrics;return Object.keys(x).map(function(y){var z=x[y],aa=(typeof z!="object")?y:this._appEventMetricKey(z);return this.getData(aa);}.bind(this));},_fetchData:function(){return {fullData:this._fetchFullRangeData(),graphData:this._fetchVisibleRangeData()};},_getMetricUris:function(){return new p(window.location.href).addQueryData(r(this.props.chartLocations,{section:this.props.section}));},render:function(){var x=this._fetchData();if(this.props.processData)x=this.props.processData(x);var y=null,z=false;x.graphData.forEach(function(da){if((da instanceof g)&&(da.getRawData().length>1)&&(da.getTotal()!==0))z=true;});if(z){y=this.renderChart(x.graphData,x.fullData);}else if(x.graphData[0] instanceof h){y=o.createElement(j,{className:"_3-8t _3-96",message:x.graphData[0].getMessage()});}else if(x.graphData[0] instanceof i){y=o.createElement(n,{size:"small"});}else return null;var aa=this.props.hasLegend?o.createElement("div",{className:"_1hok"},' / '):null,ba=this.props.hasLegend?this.renderLegend(x.graphData):null,ca=this.props.hasHeader?o.createElement("div",{className:"_1hol _2pip"},o.createElement("div",{className:"_3n_v"},this.props.title),aa,ba):null;return (o.createElement("div",{className:t(this.props.className,"_4z75")},o.createElement(q,{className:"_1ssp",onClick:this._onClick},o.createElement("a",{href:this._getMetricUris()},ca,y))));},_onClick:function(){m.logEvent({_eventName:'overview_widget_click',widget:this.props.widgetKey});}};e.exports=w;},null);
__d("FalcorOverviewBreakdownWidget",["BonsaiApiBreakdown","BonsaiStyle","BonsaiText","SpectrumChart","FalcorOverviewGraphMixin","d3/scale/ordinal","SpectrumPercentageScale","React","SpectrumSideBySideColumns","SpectrumTooltipMenu","SpectrumXAxis","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=n,u=t.PropTypes,v={WIDTH:250,HEIGHT:138},w=n.createClass({displayName:"FalcorOverviewBreakdownWidget",mixins:[k],propTypes:{title:u.string,breakdown:u.string.isRequired,maxBreakdowns:u.number.isRequired},getDefaultProps:function(){return {title:''};},_getTheme:function(){return Object.assign({},h.OVERVIEW_CHART_THEME,{rangeBands:{outerPadding:0,padding:.4}});},renderChart:function(x){var y=x[0].getTotal(),z=x[0].groupBy(this.props.breakdown),aa=Object.keys(z).map(function(da){var ea=z[da],fa=da;if(this.props.breakdown!==g.COUNTRY||da==='u')fa=i.getBucketLabel(da,this.props.breakdown);var ga=ea.getTotal();return {label:fa,percent:ga/y};}.bind(this),this).sort(function(da,ea){return ea.percent-da.percent;}).slice(0,this.props.maxBreakdowns),ba=[],ca=[];aa.forEach(function(da){ba.push(da.label);ca.push(da.percent);});return (n.createElement("div",{className:"_2pip"},n.createElement(j,{theme:this._getTheme(),width:v.WIDTH,height:v.HEIGHT,scaleX:l().domain(ba),scaleY:m()},n.createElement(o,{titles:[this.props.title],data:[ca]}),n.createElement(q,{disableLines:true}),n.createElement(p,{actionContent:s._("Haz clic para ver m\u00e1s detalles")}))));}});e.exports=w;},null);
__d("FalcorOverviewDemoWidget",["BonsaiDemoDataProcessMixin","BonsaiStyle","BonsaiText","SpectrumChart","FalcorOverviewGraphMixin","InsightsLegend.react","InsightsLegendAreaKey.react","d3/scale/ordinal","React","SpectrumSideBySideColumns","SpectrumXAxis","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s={WIDTH:250,HEIGHT:138},t=o.createClass({displayName:"FalcorOverviewDemoWidget",mixins:[k,g],propTypes:{},_getTheme:function(){return Object.assign({},h.OVERVIEW_CHART_THEME,{rangeBands:{outerPadding:0,padding:.31}});},renderLegend:function(u){var v=[i.breakdown.gender.F,i.breakdown.gender.M];return (o.createElement(l,{layout:l.layout.FLOATED},v.map(function(w,x){return o.createElement(m,{color:this._getTheme().columns.colors[x],key:'legend_'+x.toString()},o.createElement("span",{className:"_5qvg"},w));}.bind(this))));},renderChart:function(u){var v=this.processFalcorGenderAgeData(u[0]),w=n().domain(v.ages);return (o.createElement("div",{className:"_2pip"},o.createElement(j,{theme:this._getTheme(),width:s.WIDTH,height:s.HEIGHT,scaleX:w},o.createElement(p,{useCenteredColumns:true,data:v.chartData}),o.createElement(q,{disableLines:true}))));}});e.exports=t;},null);
__d("FalcorOverviewSparklineWidget",["BonsaiApiDataAdapter","BonsaiColors","BonsaiSparkLinesChart","FalcorOverviewGraphMixin","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=k,n=m.PropTypes,o=k.createClass({displayName:"FalcorOverviewSparklineWidget",mixins:[j],propTypes:Object.assign({},i.propTypes,{legendValues:n.arrayOf(n.string)}),getDefaultProps:function(){return {width:250,height:134};},renderChart:function(p){var q=[];for(var r=0;r<p.length;r++)if(p[r] instanceof g){q[r]={data:p[r],color:h.OVERVIEW_LINE_COLORS[r]};if(this.props.legendValues)q[r].legendValue=this.props.legendValues[r];}return (k.createElement(i,k.__spread({},this.props,{className:"_2piq",configs:q,showXAxis:true,showYAxis:true,showTooltips:true})));}});e.exports=o;},null);
__d("FalcorOverviewSummaryWidget",["BonsaiApiDataAdapter","BonsaiAppEventTypesUtils","FalcorOverviewBarMixin","FalcorOverviewGraphMixin","Grid.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=l.createClass({displayName:"FalcorOverviewSummaryWidget",mixins:[i,j],_renderItem:function(p,q){var r=p.getApiParams().params.event_name,s=p.getApiParams().params.aggregateBy,t,u=false;if(s==='USERS'&&r==='fb_mobile_activate_app'){t=n._("Usuarios activos");u=true;}else t=h.getAppEventDisplayName(r);return this._renderOverview(p,q,t,u);},renderChart:function(p,q){var r=[];p.forEach(function(s,t){if(s instanceof g){var u=this._renderItem(s,q[t]);if(u!==null)r.push(u);}}.bind(this));return (l.createElement("div",{className:"_5cjo"},l.createElement(k,{cols:r.length},r)));}});e.exports=o;},null);
__d("FalcorOverviewSectionController",["BonsaiApiBreakdown","BonsaiApiDataAdapter","BonsaiSectionDisplayNames","BonsaiSections","BonsaiUtils","InsightsContext","InsightsNumUtils","InsightsTimeUtils","FalcorEmptyFeatureCard","FalcorOverviewBreakdownWidget","FalcorOverviewDemoWidget","FalcorOverviewSparklineWidget","FalcorOverviewSummaryWidget","FalcorSectionDateRangeMixin","FalcorSectionRendererMixin","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();'use strict';var y=v.createClass({displayName:"FalcorOverviewSectionController",mixins:[t,u],statics:{getKey:function(){return j.OVERVIEW;}},getContent:function(){return (v.createElement("div",{className:"_3ry5"},this._getOverviewWidgets()));},getTitle:function(){return i.get(y.getKey());},_getOverviewWidgets:function(){var z=null;if(!l.hasCustomEvents()){z=v.createElement(o,{section:j.OVERVIEW});}else{var aa=l.getLastLoggedEventTime(),ba=new Date(aa*1000);if(ba<this.props.visibleDateRange.since)z=v.createElement(o,{section:j.OVERVIEW,variant:'events_too_old'});}if(!z){var ca=l.hasMobilePurchaseEvent()?this._renderPurchasesWidget():this._renderStickinessWidget();z=[this._renderUsersWidget(),this._renderSummaryWidget(),this._renderAppTimeWidget(),this._renderInstallWidget(),ca,this._renderDemoWidget(),this._renderCountryWidget(),this._renderPlatformWidget()];}var da=[this._renderReferralsWidget(),this._renderStoriesWidget(),this._renderFacebookLoginWidget()];return [v.createElement("div",{key:"overviewWidgets"},z,da)];},_divideData:function(z){if(z.graphData[0] instanceof h&&z.fullData[0] instanceof h)return {graphData:[z.graphData[0].divideBy(z.graphData[1])],fullData:[z.fullData[0].divideBy(z.fullData[1])]};return {graphData:[z.graphData[0]],fullData:[z.fullData[0]]};},_renderUsersWidget:function(){var z=[{aggregateBy:'USERS',event_name:'fb_mobile_activate_app',intervals_to_aggregate:28},{aggregateBy:'USERS',event_name:'fb_mobile_activate_app',intervals_to_aggregate:7},{aggregateBy:'USERS',event_name:'fb_mobile_activate_app',intervals_to_aggregate:1}],aa=[x._("Por mes"),x._("Por semana"),x._("Diariamente")];return (v.createElement(r,v.__spread({},this.getDateProps(),{className:"_1e-h",key:"_UsersWidget",widgetKey:"users",metrics:z,chartLocations:{event_name:'fb_mobile_activate_app',card:'trends',tab:'trend'},title:x._("Usuarios activos"),legendValues:aa,showAxisLines:true,width:800,height:230})));},_renderStickinessWidget:function(){var z=[{aggregateBy:'USERS',event_name:'fb_mobile_activate_app',intervals_to_aggregate:1},{aggregateBy:'USERS',event_name:'fb_mobile_activate_app',intervals_to_aggregate:28}];return (v.createElement(r,v.__spread({},this.getDateProps(),{key:"_StickinessWidget",widgetKey:"sticky",metrics:z,chartLocations:{event_name:'fb_mobile_activate_app',card:'trends',tab:'sticky'},title:x._("STICKINESS"),processData:this._divideData,formatValue:function(aa){return m.prettyPercent(aa,1);},float:true})));},_renderInstallWidget:function(){return (v.createElement(r,v.__spread({},this.getDateProps(),{key:"_InstallWidget",widgetKey:"install",metrics:[{aggregateBy:'COUNT',event_name:'fb_mobile_first_app_launch'}],chartLocations:{event_name:'fb_mobile_first_app_launch',card:'trends'},title:x._("INSTALLS"),formatValue:m.prettyShortInt.bind(m)})));},_renderPurchasesWidget:function(){return (v.createElement(r,v.__spread({},this.getDateProps(),{key:"_PurchasesWidget",widgetKey:"purchases",metrics:[{aggregateBy:'USD_SUM',event_name:'fb_mobile_purchase'}],chartLocations:{event_name:'fb_mobile_purchase'},title:x._("PURCHASES"),formatValue:function(z){return m.prettyShortCurrency('USD',z);},valueType:"USD"})));},_renderAppTimeWidget:function(){var z=[{aggregateBy:'COUNT',event_name:'fb_mobile_deactivate_app'},{aggregateBy:'SUM',event_name:'fb_mobile_deactivate_app'}],aa=function(ba){var ca=k.getSumData(ba.graphData[0],ba.graphData[1]),da=k.getSumData(ba.fullData[0],ba.fullData[1]);return this._divideData({graphData:[ca,ba.graphData[0]],fullData:[da,ba.fullData[0]]});}.bind(this);return (v.createElement(r,v.__spread({},this.getDateProps(),{key:"_AppTimeWidget",widgetKey:"app_time",metrics:z,chartLocations:{event_name:'fb_mobile_activate_app',card:'timeSpent'},title:x._("AVERAGE SESSION DURATION"),processData:aa,formatValue:n.secondsToDisplay,valueType:"seconds"})));},_renderSummaryWidget:function(){var z=[{aggregateBy:'COUNT',event_name:'fb_mobile_first_app_launch'},{aggregateBy:'USERS',event_name:'fb_mobile_activate_app',intervals_to_aggregate:this._getRangeLengths().visibleLength+1},{aggregateBy:'COUNT',event_name:'fb_mobile_activate_app'},{aggregateBy:'COUNT',event_name:'fb_mobile_purchase'},{aggregateBy:'COUNT',event_name:'fb_mobile_complete_registration'}];return (v.createElement(s,v.__spread({},this.getDateProps(),{className:"_nku",key:"_SummaryWidget",widgetKey:"summary",metrics:z,hasHeader:false})));},_renderDemoWidget:function(){return (v.createElement(q,v.__spread({},this.getDateProps(),{key:"_DemoWidget",widgetKey:"demo",metrics:[{aggregateBy:'USERS',event_name:'fb_mobile_activate_app',breakdowns:[g.AGE,g.GENDER],since:this.props.visibleDateRange.since,until:this.props.visibleDateRange.until}],chartLocations:{event_name:'fb_mobile_activate_app',card:'demo'},title:x._("Edad y sexo"),hasLegend:true})));},_renderCountryWidget:function(){return (v.createElement(p,v.__spread({},this.getDateProps(),{key:"_CountryWidget",widgetKey:"country",metrics:[{aggregateBy:'COUNT',event_name:'fb_mobile_activate_app',breakdowns:[g.COUNTRY],since:this.props.visibleDateRange.since,until:this.props.visibleDateRange.until}],chartLocations:{event_name:'fb_mobile_activate_app',card:'breakdown_table'},title:x._("COUNTRY"),breakdown:g.COUNTRY,maxBreakdowns:6})));},_renderPlatformWidget:function(){return (v.createElement(p,v.__spread({},this.getDateProps(),{key:"_PlatformWidget",widgetKey:"platform",metrics:[{aggregateBy:'USERS',event_name:'fb_mobile_activate_app',breakdowns:[g.CLIENT],since:this.props.visibleDateRange.since,until:this.props.visibleDateRange.until}],chartLocations:{event_name:'fb_mobile_activate_app',card:'trends',breakdown:'client'},title:x._("PLATFORM"),breakdown:g.CLIENT,maxBreakdowns:4})));},_renderReferralsWidget:function(){return (v.createElement(r,v.__spread({},this.getDateProps(),{key:"_ReferralsWidget",widgetKey:"referrals",metrics:['total_referrals'],section:j.REFERRALS,chartLocations:{card:'referrals_opens',tab:'app_total_referrals'},title:x._("REFERRALS FROM FACEBOOK")})));},_renderStoriesWidget:function(){return (v.createElement(r,v.__spread({},this.getDateProps(),{key:"_StoriesWidget",widgetKey:"stories",metrics:['story_publishes'],section:j.STORIES,chartLocations:{card:'stories_funnel',tab:'publishes'},title:x._("STORIES PUBLISHED TO FACEBOOK")})));},_renderFacebookLoginWidget:function(){return (v.createElement(r,v.__spread({},this.getDateProps(),{key:"_FacebookLoginWidget",widgetKey:"stories",metrics:['initial_permission_grants'],section:j.LOGIN,chartLocations:{card:'users',tab:'new'},title:x._("NEW FACEBOOK LOGINS")})));}});e.exports=y;},null);
__d("FalcorCustomEventsSettingsText",["React","fbt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={title:h._("App Events Settings"),implicitPurchaseEvents:{header:h._("Automatically Log App Events for In-App Purchases on iOS (Recommended)"),description:h._("Logging App Events for In-App Purchases will allow you to see your in-app purchase events in your Insights dashboard and in ads reporting. This feature requires SDK version 3.22 or newer."),notice:h._("{Bold}To avoid double logging, you should not explicitly log in-app purchases via the Facebook SDK if this feature is turned on.",[h.param("Bold",g.createElement("b",null,"Notice: "))])},mobileMeasurement:{header:h._("Enable Ad Attribution"),description:h._("This enables cross-ad-network measurement for your app.")},discardButton:h._("Descartar"),saveChangesButton:h._("Guardar cambios"),link:h._("App Event Settings"),failedToGetSettings:h._("We're sorry. There's an issue retrieving the app events settings. Please try again later."),failedToUpdateSettings:h._("We're sorry. We're having problems updating the app events settings. Please try again later.")};e.exports=i;},null);
__d("XBonsaiAppEventConfigSettingsAsyncController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/insights\/app_event_config_settings\/",{app_id:{type:"Int",required:true}});},null);
__d("FalcorSettingsCard",["AsyncRequest","DevappSwitchButton.react","FalcorCard","FalcorCustomEventsSettingsText","Grid.react","InsightsContext","InsightsLoadingIndicator.react","DevsiteIOSSettingImplicitPurchaseWarningDialog","React","XBonsaiAppEventConfigSettingsAsyncController","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=k.GridItem,s=o.createClass({displayName:"FalcorSettingsCard",componentWillMount:function(){this._loadData();},getInitialState:function(){return {doesLogImplicitPurchaseEvents:false,isIosImplicitPurchaseAllowed:false,mobileMeasurementEnabled:false,loaded:false};},render:function(){var t;if(!this.state.loaded){t=o.createElement(m,null);}else{var u=null,v=null;if(l.getShowMobileMeasurement()){u=o.createElement(r,null,o.createElement(h,{checked:this.state.mobileMeasurementEnabled,disabled:l.isReadOnly(),onChange:this._onToggleMobileMeasurementEnabled,size:"small"}));v=o.createElement(r,null,o.createElement("div",{className:"_3nil"},j.mobileMeasurement.header),o.createElement("div",{className:"_3nim"},j.mobileMeasurement.description));}t=o.createElement(k,{cols:2,alignv:"middle",spacing:"_2pi8 _2pi5"},o.createElement(r,null,o.createElement(h,{checked:this.state.doesLogImplicitPurchaseEvents,disabled:l.isReadOnly(),onChange:this._onToggleDoesLogImplicitPurchaseEvents,size:"small"})),o.createElement(r,null,o.createElement("div",{className:"_3nil"},j.implicitPurchaseEvents.header),o.createElement("div",{className:"_3nim"},j.implicitPurchaseEvents.description),o.createElement("div",{className:"_3nim"},j.implicitPurchaseEvents.notice)),u,v);}return (o.createElement(i,null,t));},_getAsyncURI:function(){return (p.getURIBuilder().setInt('app_id',l.getObjID()).getURI());},_loadData:function(){new g(this._getAsyncURI()).setMethod('POST').setReadOnly(true).setHandler(this._onLoadResponse).send();},_onLoadResponse:function(t){if(this.isMounted())this.setState({doesLogImplicitPurchaseEvents:t.payload.doesLogImplicitPurchaseEvents,mobileMeasurementEnabled:t.payload.mobileMeasurementEnabled,isIosImplicitPurchaseAllowed:t.payload.isIosImplicitPurchaseAllowed,loaded:true});},_onPostResponse:function(t){if(t.payload.mmAppID)l.setMMAppID(t.payload.mmAppID);},_onToggleDoesLogImplicitPurchaseEvents:function(){if(!this.state.doesLogImplicitPurchaseEvents)if(this.state.isIosImplicitPurchaseAllowed){n.showSupportedSDKWarning();}else n.showUnsupportedSDKWarning();var t={log_implicit_purchase_events:Number(!this.state.doesLogImplicitPurchaseEvents)};this.setState({doesLogImplicitPurchaseEvents:!this.state.doesLogImplicitPurchaseEvents});this._writeNewSetting(t);},_onToggleMobileMeasurementEnabled:function(){l.setIsMobileMeasurementEnabled(!this.state.mobileMeasurementEnabled);var t={enable_mobile_measurement:Number(!this.state.mobileMeasurementEnabled)};this.setState({mobileMeasurementEnabled:!this.state.mobileMeasurementEnabled});this._writeNewSetting(t);},_writeNewSetting:function(t){t.write_data=true;new g(this._getAsyncURI()).setMethod('POST').setData(t).setHandler(this._onPostResponse).send();}});e.exports=s;},null);
__d("BonsaiAppEventSelector",["BonsaiAppEventTypesUtils","BonsaiConstants","React","ReactChildren","XUISelector.react","XUISelectorButton.react","XUIText.react","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=k.Option,p=i,q=p.PropTypes,r=i.createClass({displayName:"BonsaiAppEventSelector",propTypes:Object.assign({},k.propTypes,{enableCreateNewAppEvent:q.bool,extraAppEvents:q.arrayOf(q.shape({event_name:q.string,display_name:q.string}))}),getDefaultProps:function(){return {extraAppEvents:[]};},getInitialState:function(){return {appEventsUnique:{}};},componentWillMount:function(){var s=g.getAppEvents().concat(this.props.extraAppEvents),t={};s.map(function(event){t[event.event_name]=event;});this.setState({appEventsUnique:t});},render:function(){var s=[];if(this.props.value===h.EVENT_SELECTOR_DEFAULT_VALUE){s.push(i.createElement(o,{key:"prompt",value:this.props.value},n._("Select an App Event")));}else if(this.state.appEventsUnique[this.props.value]==null)s.push(i.createElement(o,{key:this.props.value,value:this.props.value},this.props.value));s.push(Object.keys(this.state.appEventsUnique).map(function(v){return i.createElement(o,{key:this.state.appEventsUnique[v].event_name,value:this.state.appEventsUnique[v].event_name},this.state.appEventsUnique[v].display_name);}.bind(this)));var t=[];j.forEach(this.props.children,function(v){if(v)t.push(v);});var u=null;if(t[0]&&t[0].type===l)u=t[0];if(this.props.enableCreateNewAppEvent)s.push(i.createElement(o,{key:h.EVENT_SELECTOR_NEW_VALUE,value:h.EVENT_SELECTOR_NEW_VALUE},i.createElement(m,{weight:"bold"},n._("Create New App Event..."))));return (i.createElement(k,i.__spread({},this.props),u,s));}});e.exports=r;},null);
__d("PixelMappingCard",["AdsPixelConstants","BonsaiAppEventSelector","BonsaiConstants","CSS","FalcorCard","FalcorPaginatedDataTable","InsightsContext","InsightsGraphAPI","InsightsGraphAPIConstants","InsightsLoadingIndicator.react","LoadingIndicator.react","PixelAppEventDefaultMapping","React","SimpleXUIDialog","XUICheckboxInput.react","XUITextInput.react","$","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();var z=function(ba,ca){return function(da,ea){if(!da||!da[ba]){if(!ea||!ea[ba])return 0;return 1;}if(!ea||!ea[ba])return -1;if(ca)return da[ba].localeCompare(ea[ba]);return (ea[ba]||0)-(da[ba]||0);};},aa=s.createClass({displayName:"PixelMappingCard",componentWillMount:function(){n.appEdgeGet('conversion_pixels').done(function(ba){var ca=ba.data;for(var da=0;da<ca.length;da++){if(ca[da].app_event){var ea=JSON.parse(ca[da].app_event);ca[da].app_event=ea.event_name;if(ca[da].app_event)ca[da].map=true;ca[da].isNotEditable=ea.is_not_editable;}else ca[da].map=false;ca[da].mapData={map:ca[da].map,pixelID:ca[da].id,index:da};ca[da].appEventData={appEvent:ca[da].app_event,pixelID:ca[da].id,index:da};ca[da].savingData={saving:false,index:da};}this.setState({pixels:ca,loaded:true});}.bind(this));},getInitialState:function(){return {pixels:[],loaded:false};},render:function(){var ba=[{id:'name',label:y._("Nombre del p\u00edxel"),sortable:true,comparator:z('name',true)},{id:'tag',label:y._("Pixel Category"),sortable:true,comparator:z('tag',true),cellRenderer:this._categoryCellRenderer},{id:'id',label:y._("Identificador de p\u00edxel"),sortable:true,comparator:z('id')},{id:'creator',label:y._("Cuenta publicitaria"),sortable:true,comparator:z('creator',true)},{id:'mapData',label:y._("Mapa"),sortable:true,comparator:z('map'),cellRenderer:this._mapDataCellRenderer},{id:'appEventData',label:y._("Evento de aplicaci\u00f3n"),sortable:false,comparator:z('app_event',true),cellRenderer:this._appEventDataCellRenderer,width:200},{id:'savingData',sortable:false,cellRenderer:this._savingCellRenderer}],ca;if(!this.state.loaded){ca=s.createElement(p,null);}else ca=s.createElement(l,{ref:"table",columns:ba,columnToSortBy:"name",rows:this.state.pixels,searchFieldName:"name"});return (s.createElement(k,{onSearchChange:this._onSearchChange,showLine:false,helpText:{key:'PixelMappingHelpText',title:this._title()},title:this._title()},ca));},_onSearchChange:function(ba){this.refs.table.onSearchChange(ba);},_updateEventValue:function(ba,ca){if(ca!==this.state.pixels[ba].app_event){var da=this.state.pixels;if(ca===''){da[ba].app_event=i.EVENT_SELECTOR_DEFAULT_VALUE;}else da[ba].app_event=ca;this.setState({pixels:da});if(ca!==i.EVENT_SELECTOR_DEFAULT_VALUE){da[ba].savingData.saving=true;this.setState({pixels:da});n.objectPost(o.OFFSITE_PIXEL_NODE,da[ba].id,{app_id_for_app_event_firing:m.getObjID(),app_event:ca}).done(function(){da[ba].savingData.saving=false;this.setState({pixels:da});}.bind(this));}}},_appEventDataCellRenderer:function(ba){var ca=function(fa){var ga=m.getPredefinedEventsForPixels();Object.keys(ga).forEach(function(ia){if(ga[ia].display_name===fa)fa=ga[ia].event_name;});var ha=this.state.pixels;ha[ba.index].new_app_event=fa;this.setState({pixels:ha});}.bind(this),da=function(fa){if(fa&&this.state.pixels[ba.index].new_app_event){this._updateEventValue(ba.index,this.state.pixels[ba.index].new_app_event);}else this._updateEventValue(ba.index,this.state.pixels[ba.index].app_event);}.bind(this),ea=function(){var fa=s.createElement("div",null,s.createElement(v,{onChange:function(ga){ca(ga.target.value);}}));t.showConfirm(fa,y._("Create New App Event"),da);};return (s.createElement(h,{enableCreateNewAppEvent:true,extraAppEvents:m.getPredefinedEventsForPixels(),id:ba.index+'_appEvent',className:this.state.pixels[ba.index].app_event?null:'hidden_elem',onChange:function(event){if(event.value===i.EVENT_SELECTOR_NEW_VALUE){ea();}else this._updateEventValue(ba.index,event.value);}.bind(this),value:this.state.pixels[ba.index].app_event,disabled:this.state.pixels[ba.index].isNotEditable}));},_savingCellRenderer:function(ba){return (s.createElement(q,{size:"small",color:"white",className:(("_3-9a")+(!this.state.pixels[ba.index].savingData.saving?' '+"invisible_elem":''))}));},_categoryCellRenderer:function(ba){return (s.createElement("span",null,g.categoryLabels[ba]));},_mapPixelCategoryToAppEvent:function(ba){return r[ba]||i.EVENT_SELECTOR_DEFAULT_VALUE;},_mapDataCellRenderer:function(ba){var ca=function(){this._updateEventValue(ba.index,'');}.bind(this);return (s.createElement(u,{onClick:function(event){if(event.target.checked){j.show(w(ba.index+'_appEvent'));if(!this.state.pixels[ba.index].app_event||this.state.pixels[ba.index].app_event===i.EVENT_SELECTOR_DEFAULT_VALUE)this._updateEventValue(ba.index,this._mapPixelCategoryToAppEvent(this.state.pixels[ba.index].tag));}else{j.hide(w(ba.index+'_appEvent'));ca();}}.bind(this),name:"map",id:ba.pixelID+'_map',value:ba.map,defaultChecked:ba.map,disabled:this.state.pixels[ba.index].isNotEditable}));},_title:function(){return y._("Map Conversion Pixels");}});e.exports=aa;},null);
__d("FalcorSettingsSectionController",["BonsaiSections","BonsaiSectionDisplayNames","FalcorSettingsCard","FalcorSectionRendererMixin","PixelMappingCard","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=l.createClass({displayName:"FalcorSettingsSectionController",mixins:[j],getContent:function(){return (l.createElement("div",{className:"_5upx clearfix"},l.createElement(i,{key:"settings",cardKey:"settings"}),l.createElement(k,{key:"pixel_mapping",cardKey:"pixel_mapping"})));},statics:{getKey:function(){return g.SETTINGS;}},getTitle:function(){return h.get(n.getKey());}});e.exports=n;},null);
__d("OverviewReferralsBar",["BonsaiSections","BonsaiSectionDateRangeMixin","BonsaiOverviewBarMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j.createClass({displayName:"OverviewReferralsBar",mixins:[h,i],getSection:function(){return g.REFERRALS;},getTitle:function(){return k._("Referencias de Facebook");},getMetrics:function(){return ['total_referrals','story_clicks','mobile_referral_installs'];},getChartLocations:function(){return [{card:'referrals_opens',tab:'app_total_referrals'},{card:'referrals_opens',tab:'story_newsfed_clicks'},{card:'referrals_installs'}];},getLabels:function(){return [k._("Total de referencias"),k._("Clics en historias"),k._("Instalaciones en celulares")];}});e.exports=l;},null);
__d("FalcorReferralsOpensCard",["BonsaiApiBreakdown","BonsaiBreakdownChart","FalcorBreakdownChartSwitcher","BonsaiSectionDataLoaderMixin","FalcorLegendSelectorMixin","FalcorLogCardViewMixin","InsightsContext","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=n.createClass({displayName:"FalcorReferralsOpensCard",mixins:[j,k,l],_breakdowns:{app_total_referrals:[g.AUTH_STATE,g.SPONSORED],story_newsfeed_clicks:[g.AUTH_STATE],requests_accepted:[g.AUTH_STATE]},getInitialState:function(){return Object.assign({},this._getInitialCardState('app_total_referrals'),{activeBreakdown:g.NONE});},getMetrics:function(){var q={app_total_referrals:'total_referrals',story_newsfeed_clicks:'story_clicks'};if(m.getHasRequests())q.requests_accepted='request_accepts';return q;},componentWillMount:function(){var q=this.getMetrics();Object.keys(q).forEach(function(r){var s=this._breakdowns[r];if(s.length===0){this.addMetric(r,q[r]);return;}var t=0;for(;t<s.length;t++)this.addMetric([r,s[t]],q[r],{breakdowns:[g.CLIENT,s[t]]});},this);this.fetchMetrics();},_getHelptextMap:function(){return {app_total_referrals:'ReferralsTotal',story_newsfeed_clicks:'ReferralsStoriesClicks',requests_accepted:'ReferralsRequestsAccepted'};},_getKeyToLabel:function(){var q={app_total_referrals:o._("Total de referencias"),story_newsfeed_clicks:o._("Referencias de los clics de una historia")};if(m.getHasRequests())q.requests_accepted=o._("Referencias de las solicitudes");return q;},_getKeyToSection:function(){var q={},r=this._getKeyToLabel();Object.keys(this.getMetrics()).forEach(function(s){var t=this._breakdowns[s],u=t.length===0?s:[s,t[0]],v=[n.createElement(h,{breakdown:g.NONE,currentCard:this.props.cardKey,data:this.getData(u),key:g.NONE,title:r[s]})];if(t.length>0){var w=n.createElement(h,{breakdown:g.CLIENT,currentCard:this.props.cardKey,data:this.getData([s,t[0]]),key:g.CLIENT}),x=0;t.forEach(function(y){if(x===0&&s!=='requests_accepted')v.push(w);v.push(n.createElement(h,{breakdown:y,currentCard:this.props.cardKey,data:this.getData([s,y]),key:y}));x++;}.bind(this));}q[s]=n.createElement(i,{ref:s,currentCard:this.props.cardKey,onBreakdownChange:this._onBreakdownChange,categories:[this._getHelptextMap()[s]]},v);}.bind(this));return q;},_title:function(){return o._("Referencias desde Facebook a tu aplicaci\u00f3n");},_onBreakdownChange:function(q){this.setState({activeBreakdown:q});},_getParamsToLog:function(){return {card_breakdown:this.state.activeBreakdown.toLowerCase(),card_section:this.state.activeSection.toLowerCase()};},_shouldLogAfterComponentDidUpdate:function(q,r){return this.state.activeSection!==r.activeSection||this.state.activeBreakdown!==r.activeBreakdown;}});e.exports=p;},null);
__d("FalcorReferralsInstallsCard",["BonsaiApiBreakdown","BonsaiBreakdownChart","FalcorBreakdownChartSwitcher","FalcorLogCardViewMixin","BonsaiSectionDataLoaderMixin","BonsaiText","FalcorCard","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=n.createClass({displayName:"FalcorReferralsInstallsCard",mixins:[k,j],_metrics:{mobile_referral_installs:'mobile_referral_installs'},getInitialState:function(){return {activeBreakdown:g.NONE};},componentWillMount:function(){Object.keys(this._metrics).forEach(function(q){this.addMetric(q,this._metrics[q],{breakdowns:[g.CLIENT,g.SPONSORED]});},this);this.fetchMetrics();},_onExportClick:function(){return this.refs.chart.getExportData();},render:function(){var q=this.getData('mobile_referral_installs');return (n.createElement(m,{title:this._title(),helpText:{key:"MobileReferralInstalls",title:this._title()},getExportData:this._onExportClick,exportFilename:"mobile_referral_installs"},n.createElement(i,{ref:"chart",currentCard:this.props.cardKey,onBreakdownChange:this._onBreakdownChange,categories:["MobileReferralInstalls"]},n.createElement(h,{breakdown:g.NONE,currentCard:this.props.cardKey,data:q,key:g.NONE,title:l.mobile_referral_installs}),n.createElement(h,{breakdown:g.CLIENT,currentCard:this.props.cardKey,data:q,key:g.CLIENT}),n.createElement(h,{breakdown:g.SPONSORED,currentCard:this.props.cardKey,data:q,key:g.SPONSORED}))));},_title:function(){return o._("Instalaciones con el celular desde referencias de Facebook");},_onBreakdownChange:function(q){this.setState({activeBreakdown:q});},_getParamsToLog:function(){return {card_breakdown:this.state.activeBreakdown.toLowerCase()};},_shouldLogAfterComponentDidUpdate:function(q,r){return this.state.activeBreakdown!==r.activeBreakdown;}});e.exports=p;},null);
__d("FalcorReferralsSectionController",["BonsaiSections","BonsaiSectionDisplayNames","FalcorSectionDateRangeMixin","FalcorSectionRendererMixin","OverviewReferralsBar","React","FalcorReferralsOpensCard","FalcorReferralsInstallsCard","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=l.createClass({displayName:"FalcorReferralsSectionController",mixins:[i,j],statics:{getKey:function(){return g.REFERRALS;}},getSummary:function(){return l.createElement(k,l.__spread({},this.getDateProps()));},getTitle:function(){return h.get(p.getKey());},getHeaderProps:function(){return {title:o._("Referencias desde Facebook")};},getContent:function(){return [l.createElement(m,l.__spread({},this.getDateProps(),{cardKey:"referrals_opens",key:"referrals_opens"})),l.createElement(n,l.__spread({},this.getDateProps(),{cardKey:"referrals_installs",key:"referrals_installs"}))];}});e.exports=p;},null);
__d("OverviewRequestsBar",["BonsaiSections","BonsaiSectionDateRangeMixin","BonsaiOverviewBarMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j.createClass({displayName:"OverviewRequestsBar",mixins:[h,i],getSection:function(){return g.REQUESTS;},getTitle:function(){return k._("Solicitudes");},getMetrics:function(){return ['request_accepts','request_sends'];},getDataAdapters:function(){var m=this.getData(0).divideBy(this.getData(1));return [this.getData(0),this.getData(1),m];},getChartLocations:function(){return [{card:'requests_funnel',tab:'clicks'},{card:'requests_funnel',tab:'sends'},{card:'requests_funnel',tab:'accept_rate'}];},getPercentages:function(){return [false,false,true];},getPrecision:function(){return [0,0,1];},getLabels:function(){return [k._("Clics en solicitudes"),k._("Solicitudes enviadas"),k._("Clics por env\u00edo")];}});e.exports=l;},null);
__d("FalcorRequestsFunnelCard",["BonsaiApiBreakdown","BonsaiBreakdownChart","FalcorBreakdownChartSwitcher","BonsaiConfig","BonsaiLinesTimeSeriesChart","BonsaiSectionDataLoaderMixin","BonsaiText","FalcorLegendSelectorMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=o.createClass({displayName:"FalcorRequestsFunnelCard",mixins:[l,n],getInitialState:function(){return this._getInitialCardState('clicks');},componentWillMount:function(){this.addMetric('sends','request_sends',{breakdowns:[g.AUTH_STATE,g.CLIENT]});this.addMetricWithEcosystem('imps','request_impressions',{breakdowns:[g.AUTH_STATE,g.CLIENT]});this.addMetricWithEcosystem('clicks','request_accepts',{breakdowns:[g.AUTH_STATE,g.CLIENT]});if(j.showCohorts){this.addMetric('sends_cohort','request_sends',{breakdowns:[g.LABEL_COHORT]});this.addMetric('clicks_cohort','request_accepts',{breakdowns:[g.LABEL_COHORT]});}this.addMetric('sends_ref','request_sends',{breakdowns:[g.REF]});this.addMetric('clicks_ref','request_accepts',{breakdowns:[g.REF]});this.fetchMetrics();},_title:function(){return p._("Solicitudes");},_getHelptextMap:function(){return {clicks:'RequestsClicks',sends:'RequestsSends',clicks_per_send:'RequestsAcceptRate'};},_getKeyToLabel:function(){return {clicks:m.clicks,sends:m.requests_sent,clicks_per_send:m.clicks_per_send};},_getKeyToSection:function(){var r=[o.createElement(h,{breakdown:g.NONE,currentCard:this.props.cardKey,data:this.getData('sends'),key:g.NONE,title:m.requests_sent}),o.createElement(h,{breakdown:g.CLIENT,currentCard:this.props.cardKey,data:this.getData('sends'),key:g.CLIENT,title:m.requests_sent}),o.createElement(h,{breakdown:g.AUTH_STATE,currentCard:this.props.cardKey,data:this.getData('sends'),key:g.AUTH_STATE,title:m.requests_sent}),o.createElement(h,{breakdown:g.REF,currentCard:this.props.cardKey,data:this.getData('sends_ref'),key:g.REF,shouldStack:false,showTotal:false})],s=[o.createElement(h,{breakdown:g.NONE,currentCard:this.props.cardKey,data:this.getData('clicks'),key:g.NONE,title:m.clicks}),o.createElement(h,{breakdown:g.CLIENT,currentCard:this.props.cardKey,data:this.getData('clicks'),key:g.CLIENT}),o.createElement(h,{breakdown:g.AUTH_STATE,currentCard:this.props.cardKey,data:this.getData('clicks'),key:g.AUTH_STATE}),o.createElement(h,{breakdown:g.REF,currentCard:this.props.cardKey,data:this.getData('clicks_ref'),key:g.REF,shouldStack:false,showTotal:false})];if(j.showCohorts){r.push(o.createElement(h,{breakdown:g.LABEL_COHORT,currentCard:this.props.cardKey,data:this.getData('sends_cohort'),key:g.LABEL_COHORT,shouldStack:false,showTotal:false}));s.push(o.createElement(h,{breakdown:g.LABEL_COHORT,currentCard:this.props.cardKey,data:this.getData('clicks_cohort'),key:g.LABEL_COHORT,shouldStack:false,showTotal:false}));}return {clicks:o.createElement(i,{ref:"clicks",currentCard:this.props.cardKey,categories:[this._getHelptextMap().clicks]},s),sends:o.createElement(i,{ref:"sends",currentCard:this.props.cardKey,categories:[this._getHelptextMap().sends]},r),clicks_per_send:this._buildTimeSeriesChartGroup(o.createElement(k,o.__spread({},this._getLegendProps(),{ref:"clicks_per_send",data:[this.getDataWithEcosystem('clicks').divideBy(this.getDataWithEcosystem('sends'))],titles:[m.clicks_per_send],percentage:true,caregories:[this._getHelptextMap().clicks_per_send]})))};}});e.exports=q;},null);
__d("FalcorRequestsNegativeCard",["BonsaiLinesTimeSeriesChart","BonsaiSectionDataLoaderMixin","BonsaiText","FalcorLegendSelectorMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=k.createClass({displayName:"FalcorRequestsNegativeCard",mixins:[h,j],getInitialState:function(){return this._getInitialCardState('spam');},componentWillMount:function(){this.addMetricWithEcosystem('spam','request_spam_rate');this.addMetric('blocks','request_blocks');this.fetchMetrics();},_getHelptextMap:function(){return {spam:'RequestsSpamRate',blocks:'RequestsAppBlocks'};},_getKeyToLabel:function(){return {spam:i.spam_rate,blocks:i.blocks};},_getKeyToSection:function(){return {spam:this._buildTimeSeriesChartGroup(k.createElement(g,k.__spread({},this._getLegendProps(),{ref:"spam",data:[this.getDataWithEcosystem('spam')],ratio:true,titles:[i.spam_rate],categories:[this._getHelptextMap().spam]}))),blocks:this._buildTimeSeriesChartGroup(k.createElement(g,k.__spread({},this._getLegendProps(),{ref:"blocks",data:[this.getData('blocks')],titles:[i.blocks],categories:[this._getHelptextMap().blocks]})))};},_title:function(){return l._("Participaci\u00f3n negativa");}});e.exports=m;},null);
__d("FalcorRequestsStructuredCard",["BonsaiApiBreakdown","BonsaiBreakdownChart","FalcorBreakdownChartSwitcher","BonsaiSectionDataLoaderMixin","BonsaiText","FalcorLegendSelectorMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=m.createClass({displayName:"FalcorRequestsStructuredCard",mixins:[j,l],_getHelptextMap:function(){return {clicks:'StructuredAccepts',sends:'StructuredSends',clicks_per_send:'StructuredAcceptRate'};},_label:{clicks:k.clicks,sends:k.requests_sent,clicks_per_send:k.clicks_per_send},getInitialState:function(){return this._getInitialCardState('clicks');},componentWillMount:function(){this.addMetric('sends','structured_request_sends',{breakdowns:[g.OG_ACTION_TYPE,g.OG_OBJECT_TYPE,g.CLIENT]});this.addMetricWithEcosystem('accepts','structured_request_accepts',{breakdowns:[g.AUTH_STATE,g.OG_ACTION_TYPE,g.OG_OBJECT_TYPE,g.CLIENT]});this.fetchMetrics();},_title:function(){return n._("Rendimiento de acciones\/objetos");},_getBreakdownChartSwitcher:function(p,q,r,s){var t={currentCard:this.props.cardKey,data:q,percentage:r,shouldStack:s};return (m.createElement(i,{ref:p,currentCard:this.props.cardKey,categories:[this._getHelptextMap()[p]]},m.createElement(h,m.__spread({},t,{breakdown:g.NONE,key:g.NONE,title:this._label[p]})),m.createElement(h,m.__spread({},t,{breakdown:g.CLIENT,key:g.CLIENT})),m.createElement(h,m.__spread({},t,{breakdown:g.OG_ACTION_TYPE,key:g.OG_ACTION_TYPE})),m.createElement(h,m.__spread({},t,{breakdown:g.OG_OBJECT_TYPE,key:g.OG_OBJECT_TYPE}))));},_getKeyToLabel:function(){return {clicks:this._label.clicks,sends:this._label.sends,clicks_per_send:this._label.clicks_per_send};},_getKeyToSection:function(){return {clicks:this._getBreakdownChartSwitcher("clicks",this.getData('accepts'),false,true),sends:this._getBreakdownChartSwitcher("sends",this.getData('sends'),false,true),clicks_per_send:this._getBreakdownChartSwitcher("clicks_per_send",this.getDataWithEcosystem('accepts').divideBy(this.getDataWithEcosystem('sends')),true,false)};}});e.exports=o;},null);
__d("FalcorRequestsSectionController",["BonsaiSections","BonsaiSectionDisplayNames","FalcorSectionDateRangeMixin","FalcorSectionRendererMixin","InsightsContext","OverviewRequestsBar","React","FalcorRequestsFunnelCard","FalcorRequestsNegativeCard","FalcorRequestsStructuredCard"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=m.createClass({displayName:"FalcorRequestsSectionController",mixins:[i,j],statics:{getKey:function(){return g.REQUESTS;}},getSummary:function(){return (m.createElement(l,m.__spread({},this.getDateProps())));},getTitle:function(){return h.get(q.getKey());},getContent:function(){var r=[];if(k.getHasRequests())r.push(m.createElement(n,m.__spread({},this.getDateProps(),{cardKey:"requests_funnel",key:"requests_funnel"})));if(k.getHasStructuredRequests())r.push(m.createElement(p,m.__spread({},this.getDateProps(),{cardKey:"requests_structured",key:"requests_structured"})));r.push(m.createElement(o,m.__spread({},this.getDateProps(),{cardKey:"requests_negative",key:"requests_negative"})));return r;}});e.exports=q;},null);
__d("OverviewInvitesBar",["BonsaiSections","BonsaiSectionDateRangeMixin","BonsaiOverviewBarMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j.createClass({displayName:"OverviewInvitesBar",mixins:[h,i],getSection:function(){return g.INVITES;},getTitle:function(){return k._("Invitaciones");},getMetrics:function(){return ['invite_dialog_impressions','invite_dialog_submits'];},getDataAdapters:function(){return [this.getData(0),this.getData(1),this.getData(1).divideBy(this.getData(0))];},getChartLocations:function(){return [{card:'invites_funnel',tab:'dialog'},{card:'invites_funnel',tab:'submit'},{card:'invites_funnel',tab:'submit'}];},getPercentages:function(){return [false,false,true];},getPrecision:function(){return [0,0,1];},getLabels:function(){return [k._("Dialog Launch"),k._("Dialog Submit"),k._("Dialog CTR")];}});e.exports=l;},null);
__d("FalcorInvitesFunnelCard",["BonsaiApiDataAdapter","BonsaiApiBreakdown","BonsaiBreakdownChart","FalcorBreakdownChartSwitcher","FalcorLegendSelectorMixin","BonsaiSectionDataLoaderMixin","BonsaiText","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=n.createClass({displayName:"FalcorInvitesFunnelCard",mixins:[l,k],INVITE_ACTION_TYPE:"308507229350008",getInitialState:function(){return this._getInitialCardState('dialogs');},_metrics:['dialogs','submits','dialog_ctr','created','app_invite_installs'],_dialogMetrics:{dialogs:'invite_dialog_impressions',submits:'invite_dialog_submits',app_invite_installs:'app_invite_accepts'},_ogStructuredMetrics:{created:'structured_request_sends'},_ctrMetrics:{dialog_ctr:['submits','dialogs']},_getHelptextMap:function(){return {dialogs:'InvitesDialogLoad',submits:'InvitesDialogSubmit',dialog_ctr:'InvitesDialogCTR',created:'InvitesRequestCreated',app_invite_installs:'InvitesRequestAccepts'};},_getKeyToLabel:function(){var q={};this._metrics.forEach(function(r){q[r]=m[r];});return q;},componentWillMount:function(){Object.keys(this._dialogMetrics).forEach(function(q){this.addMetric(q,this._dialogMetrics[q],{breakdowns:[h.CLIENT]});}.bind(this));Object.keys(this._ogStructuredMetrics).forEach(function(q){return this.addMetric(q,this._ogStructuredMetrics[q],{breakdowns:[h.OG_ACTION_TYPE,h.CLIENT]},function(r){return (new g(r)).filterBy(h.OG_ACTION_TYPE,'=',[this.INVITE_ACTION_TYPE]);}.bind(this));}.bind(this));this.fetchMetrics();},_title:function(){return o._("Rendimiento de las invitaciones");},_getTabbedSection:function(q){var r,s,t;s=this._ctrMetrics[q];if(s){r=this.getData(s[0]).divideBy(this.getData(s[1]));t=true;}else{r=this.getData(q);t=false;}return (n.createElement(j,{ref:q,currentCard:this.props.cardKey,categories:[this._getHelptextMap()[q]]},n.createElement(i,{breakdown:h.NONE,currentCard:this.props.cardKey,data:r,key:h.NONE,title:m.total,percentage:t}),n.createElement(i,{breakdown:h.CLIENT,currentCard:this.props.cardKey,data:r,key:h.CLIENT,percentage:t})));},_getKeyToSection:function(){var q={};this._metrics.forEach(function(r){q[r]=this._getTabbedSection(r);}.bind(this));return q;}});e.exports=p;},null);
__d("FalcorInvitesSectionController",["BonsaiSections","BonsaiSectionDisplayNames","FalcorSectionDateRangeMixin","FalcorSectionRendererMixin","OverviewInvitesBar","FalcorInvitesFunnelCard","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=m.createClass({displayName:"FalcorInvitesSectionController",mixins:[i,j],statics:{getKey:function(){return g.INVITES;}},getSummary:function(){return (m.createElement(k,m.__spread({},this.getDateProps())));},getTitle:function(){return h.get(n.getKey());},getContent:function(){return [m.createElement(l,m.__spread({},this.getDateProps(),{cardKey:"invites_funnel",key:"invites_funnel"}))];}});e.exports=n;},null);
__d("FalcorSegmentApplyToFeatureHeader",["BonsaiSections","BonsaiUtils","FalcorCommonViews","FalcorSelector","InsightsEventLogger","InsightsGraphAPI","InsightsGraphAPIConstants","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=n,r=q.PropTypes,s='default',t='new',u=n.createClass({displayName:"FalcorSegmentApplyToFeatureHeader",propTypes:{segmentID:r.string.isRequired},getInitialState:function(){return {funnels:[],cohorts:[],selectedFunnelID:s,selectedCohortID:s,selectedFeature:s};},componentWillMount:function(){this._loadFunnels();this._loadCohorts();},render:function(){return (n.createElement("div",null,n.createElement("span",{className:"_5k_a _ljg _3h1l"},p._("APPLY SEGMENT TO:")),this._renderSelectDropdown(),this._renderSeparator(),this._renderFeatureSelector()));},_renderSelectDropdown:function(){return (n.createElement(j,{borderless:true,className:"_2pir",options:[{text:'Funnel',value:'funnel'},{text:'Cohort',value:'cohort'}],value:this.state.selectedFeature,placeholder:{text:p._("Seleccionar"),value:s},onChange:this._onChangeSelectFeature}));},_renderSeparator:function(){if(this.state.selectedFeature===s)return null;return (n.createElement("span",{className:"_5k_d _4cae"},"/"));},_renderFeatureSelector:function(){if(this.state.selectedFeature===s)return null;return this.state.selectedFeature==='funnel'?this._renderApplyFeatureDropdown(p._("Select a Funnel"),this.state.funnels,g.FUNNELS,this.state.selectedFunnelID):this._renderApplyFeatureDropdown(p._("Select a Cohort"),this.state.cohorts,g.COHORTS,this.state.selectedCohortID);},_onChangeSelectFeature:function(event){this.setState({selectedFeature:event.value});},_renderApplyFeatureDropdown:function(v,w,x,y){var z=w.map(function(aa){return {value:aa.id,text:aa.name};});z.unshift({value:t,text:p._("Crear nuevo"),className:"_5k_e"});return (n.createElement(j,{borderless:true,onChange:this._onApplyFeature.bind(this,x),value:y,placeholder:{text:v,value:s},options:z}));},_loadFunnels:function(){return l.appEdgeGet(m.FUNNEL_EDGE).done(function(v){return this.setState({funnels:v.data});}.bind(this));},_loadCohorts:function(){return l.appEdgeGet(m.COHORTS_EDGE).done(function(v){return this.setState({cohorts:v.data});}.bind(this));},_onApplyFeature:function(v,event){if(v===g.FUNNELS){this.setState({selectedFunnelID:event.value});}else if(v===g.COHORTS)this.setState({selectedCohortID:event.value});k.logEvent({_eventName:'segments_apply_feature',feature_id:this.props.segmentID,apply_to_section:v.toLowerCase(),apply_to_feature_id:event.value});if(event.value===t){h.getSectionInsightsURI(v,null,i.CREATE,{segment_id:this.props.segmentID}).go();return;}h.getSectionInsightsURI(v,event.value,i.DETAILS,{segment_id:this.props.segmentID}).go();}});e.exports=u;},null);
__d("FalcorSegmentBreakdownTable",["AppEventsFunnelAggregationMethod","FalcorBreakdownsTextUtils","FalcorPaginatedDataTable","InsightsContext","InsightsEventLogger","InsightsNumUtils","Link.react","React","SimpleXUIDialog","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=n,s=r.PropTypes,t=5,u=n.createClass({displayName:"FalcorSegmentBreakdownTable",propTypes:{breakdownType:s.string.isRequired,funnelData:s.object.isRequired},getInitialState:function(){return {rows:this._getRows(this.props.funnelData,this.props.breakdownType)};},componentWillReceiveProps:function(v){this.setState({rows:this._getRows(v.funnelData,v.breakdownType)});},render:function(){var v=this.state.rows.slice(0,t),w=this.state.rows.length>t?n.createElement(m,{className:"_2q24",onClick:this._showFullTableDialog},q._("Ver m\u00e1s")):null;return (n.createElement("div",null,n.createElement(i,{pageSize:t,columns:this._getColumns(false),rows:v}),w));},_getColumns:function(v){var w=h.getBreakdownTypeDisplayString(this.props.breakdownType);return [{id:'breakdownType',label:v?w:''},{id:'counts',label:q._("Totales")},{id:'percent',label:q._("\u0025 of Audience")}];},_getRows:function(v,w){v.setBreakdownType(w);var x=v.getSelectedBreakdownValues(g.UNIQUES),y=v.getCounts(g.UNIQUES);y=y.map(function(ba){return ba[0];});var z=y.length>0?y.reduce(function(ba,ca){return ba+ca;}):0,aa=y.map(function(ba){return z===0?0:Math.round(100*ba/z,2);});return (x.map(function(ba,ca){return {breakdownType:h.getBreakdownValueDisplayString(w,ba),counts:l.prettyInt(y[ca]),percent:q._("{Percentage value} \u0025",[q.param("Percentage value",aa[ca])])};}));},_showFullTableDialog:function(){k.logCardView('segments_breakdown_table_full',{feature_id:j.getActiveSegmentID(),card_breakdown:this.props.breakdownType.toLowerCase()});o.show(n.createElement(i,{className:"_2pib",columns:this._getColumns(true),pageSize:this.state.rows.length,rows:this.state.rows}));}});e.exports=u;},null);
__d("FalcorSegmentBreakdownTableCard",["BonsaiApiBreakdown","BonsaiText","FalcorCard","FalcorHeaderSelector","FalcorSegmentBreakdownTable","InsightsContext","InsightsEventLogger","React","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=j.Item,q=n,r=q.PropTypes,s=n.createClass({displayName:"FalcorSegmentBreakdownTableCard",propTypes:Object.assign({},i.propTypes,{breakdownTypes:r.arrayOf(r.string).isRequired,funnelData:r.object.isRequired,minHeight:r.number}),getDefaultProps:function(){return {minHeight:0};},getInitialState:function(){o(this.props.breakdownTypes.length>0);return {selectedBreakdownTypeIndex:0};},componentWillReceiveProps:function(t){o(t.breakdownTypes.length>0);this.setState({selectedBreakdownTypeIndex:0});},render:function(){var t=this.props.breakdownTypes,u=null;if(t.length>1)u=n.createElement(j,{headerKey:"SegmentDetailCard",onItemChange:function(w){m.logCardView('segments_breakdown_table',{feature_id:l.getActiveSegmentID(),card_breakdown:t[w].toLowerCase()});this.setState({selectedBreakdownTypeIndex:w});}.bind(this)},t.map(function(w,x){return n.createElement(p,{key:w,label:h.getBreakdownName(g[w]),value:x});}));var v=t[this.state.selectedBreakdownTypeIndex];return (n.createElement(i,n.__spread({},this.props,{dropDown:u,showLine:false,style:{minHeight:this.props.minHeight}}),n.createElement(k,{breakdownType:v,funnelData:this.props.funnelData})));}});e.exports=s;},null);
__d("FalcorSegmentCombinedBreakdownChartCard",["AppEventsFunnelAggregationMethod","AppEventsCombinedBreakdowns","AppEventsReservedBreakdownValues","BonsaiText","FalcorBreakdownsTextUtils","FalcorCard","FalcorSideBySideColumnsChart","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=n,q=p.PropTypes,r=n.createClass({displayName:"FalcorSegmentCombinedBreakdownChartCard",propTypes:Object.assign({},l.propTypes,{combinedBreakdownType:q.string.isRequired,funnelData:q.object.isRequired}),render:function(){var s=this.props.funnelData;s.setBreakdownType(this.props.combinedBreakdownType);var t=s.getSelectedBreakdownCounts(g.UNIQUES),u=Object.keys(t);u.forEach(function(fa){return t[fa]=t[fa][0];});var v=0;u.forEach(function(fa){return v+=t[fa];});var w=this.props.combinedBreakdownType.split('_'),x=w[0],y=w[1],z=k.getAllPossibleKnownValues(x),aa=k.getAllPossibleKnownValues(y),ba=[];aa.filter(function(fa){return fa!==i.UNKNOWN;}).forEach(function(fa){return ba.push([]);});var ca={};aa.forEach(function(fa){return ca[fa]=0;});z.forEach(function(fa){return aa.forEach(function(ga,ha){var ia=i.UNKNOWN;if(fa===ia||ga===ia)return;var ja=fa+'$'+ga,ka=t[ja];ka=isNaN(ka)?0:ka;ca[ga]+=ka;ba[ha]=ba[ha]||[];ba[ha].push(ka);});});var da=z.filter(function(fa){return fa!==i.UNKNOWN;}),ea=aa.filter(function(fa){return fa!==i.UNKNOWN;});da=da.map(function(fa){return k.getBreakdownValueDisplayString(x,fa);});ea=ea.map(function(fa){return k.getBreakdownValueDisplayString(y,fa);});return (n.createElement(l,n.__spread({},this.props),n.createElement("div",{className:"_bfd"},j.getBreakdownName(h.AGE_GENDER.toLowerCase())),n.createElement(m,n.__spread({},this.props,{xAxisValues:da,legendValues:ea,chartData:ba,totalCount:v}))));}});e.exports=r;},null);
__d("FalcorSegmentRulesCard",["FalcorCard","FalcorSegmentTextUtils","React","Token.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=i,n=m.PropTypes,o=i.createClass({displayName:"FalcorSegmentRulesCard",propTypes:Object.assign({},g.propTypes,{segment:n.object}),render:function(){if(!this.props.segment)return null;return (i.createElement("div",null,i.createElement("div",{className:"_bfd _3-97"},l._("CONDITIONS")),i.createElement("div",{className:"clearfix"},this.props.segment.getAllRules().map(function(p,q){return (i.createElement(j,{key:'token_'+q,label:h.getTokenLabel(p),removable:false}));}))));}});e.exports=o;},null);
__d("InsightsAppEventsGraphQueryUtils",["InsightsGraphAPI"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h='app_insights/app_event',i={getTotalCount:function(event,j,k,l,m){var n=0,o={event_name:event,aggregateBy:j,since:k,until:l,intervals_to_aggregate:n},p=null;if(m){p=g.app(m).edge(h).get(o);}else p=g.appEdgeGet(h,o);return p.then(function(q){if(q.data.length>0)return parseInt(q.data[0].value,10);return null;});}};e.exports=i;},null);
__d("FalcorSegmentSizeCard",["AppEventsFunnelAggregationMethod","FalcorSamplingVariance","InsightsAppEventsGraphQueryUtils","InsightsNumUtils","ProgressBar.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=l,p=o.PropTypes,q=l.createClass({displayName:"FalcorSegmentSizeCard",propTypes:{funnelData:p.object.isRequired,startTime:p.number.isRequired,endTime:p.number.isRequired,samplingRate:p.number.isRequired},getInitialState:function(){return {totalUniques:null};},componentWillMount:function(){this._loadTotalUniques();},_loadTotalUniques:function(){i.getTotalCount('fb_mobile_activate_app','USERS',this.props.startTime,this.props.endTime).done(function(r){return this.setState({totalUniques:r});}.bind(this));},render:function(){if(!this.state.totalUniques)return null;var r=this.props.funnelData.getCounts(g.UNIQUES),s=this.state.totalUniques,t=Math.min(r[0][0],s),u=Math.round(t/s*100);return (l.createElement("div",null,l.createElement("div",{className:"_bfd _3-97"},n._("ESTIMATED SIZE")),l.createElement(k,{className:"_2ps_",value:u,size:"small"}),l.createElement("div",{className:"_3-8x _1g1q"},n._("{Segment user count} Users \/ {Percentage value}\u0025 of {Total user count}{variance tooltip}",[n.param("Segment user count",j.prettyShortInt(t)),n.param("Percentage value",u),n.param("Total user count",j.prettyShortInt(s)),n.param("variance tooltip",h.renderVarianceTooltip(t,this.props.samplingRate))]))));}});e.exports=q;},null);
__d("FalcorSegmentDetailsCard",["AppEventsCombinedBreakdowns","AppEventsLaserEventInfoBreakdowns","BonsaiApiBreakdown","BonsaiErrorNotice","BonsaiText","BonsaiUtils","FalcorAsyncTaskLoaderMixin","FalcorCard","FalcorSegmentBreakdownTableCard","FalcorSegmentCombinedBreakdownChartCard","FalcorSegmentRulesCard","FalcorSegmentSizeCard","Grid.react","InsightsEventLogger","InsightsFunnelData","InsightsGraphAPIConstants","LeftRight.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){b.__markCompiled&&b.__markCompiled();var aa=s.GridItem,ba=x,ca=ba.PropTypes,da=360,ea=x.createClass({displayName:"FalcorSegmentDetailsCard",mixins:[m],propTypes:{segment:ca.object,segmentID:ca.string.isRequired,startTime:ca.number.isRequired,endTime:ca.number.isRequired},getInitialState:function(){return {segmentData:null,partitionDate:null,samplingRate:null};},componentWillMount:function(){this._loadSegmentData(this.props);},componentWillReceiveProps:function(fa){var ga=fa.segmentID!==this.props.segmentID,ha=fa.startTime!==this.props.startTime||fa.endTime!==this.props.endTime;if(ga||ha)this._loadSegmentData(fa);},componentDidMount:function(){t.logCardView(this.props.cardKey,{feature_id:this.props.segmentID});},render:function(){return (x.createElement("div",null,this._renderSegmentData(),this._renderFootnote()));},_renderSegmentData:function(){var fa=this.state.segmentData;if(!fa)return (x.createElement(n,null,this.renderProgressOrTimeoutIndicator()));var ga=fa.getSummedCounts('uniques');if(ga[0]===0)return (x.createElement("div",null,x.createElement(n,{showLine:true,title:z._("Empty segment")},x.createElement(j,{className:"_3-8t",message:k.errors.empty_segment}))));return (x.createElement("div",null,x.createElement(n,null,x.createElement(w,null,x.createElement(q,{title:z._("Conditions"),showLine:false,segment:this.props.segment}),x.createElement("div",{className:"_53y3 _2piv"},x.createElement(r,{funnelData:fa,startTime:this.props.startTime,endTime:this.props.endTime,samplingRate:this.state.samplingRate,title:z._("Tama\u00f1o")})))),x.createElement(p,{combinedBreakdownType:g.AGE_GENDER,funnelData:fa}),x.createElement(s,{alignv:"top",cols:2,fixed:true,spacing:"_2pi8"},x.createElement(aa,{key:"country"},x.createElement(o,{breakdownTypes:[h.COUNTRY],funnelData:fa,minHeight:da,title:k.getBreakdownName(i[h.COUNTRY])})),x.createElement(aa,{key:"locale"},x.createElement(o,{breakdownTypes:[h.LOCALE],funnelData:fa,minHeight:da,title:k.getBreakdownName(i[h.LOCALE])})),x.createElement(aa,{key:"deviceInfo"},x.createElement(o,{breakdownTypes:[h.CLIENT,h.DEVICE_OS,h.DEVICE_MODEL],funnelData:fa,minHeight:da,title:z._("plataforma")})),x.createElement(aa,{key:"appVersion"},x.createElement(o,{breakdownTypes:[h.APP_VERSION],funnelData:fa,minHeight:da,title:k.getBreakdownName(i[h.APP_VERSION])}))),x.createElement(o,{breakdownTypes:[h.IDENTITY_SOURCE],funnelData:fa,title:k.getBreakdownName(i[h.IDENTITY_SOURCE])}),x.createElement(o,{breakdownTypes:[h.ACQUISITION_SOURCE,h.ACQUISITION_SOURCE_L1,h.ACQUISITION_SOURCE_L2,h.ACQUISITION_SOURCE_L3],funnelData:fa})));},_renderFootnote:function(){if(!this.state.partitionDate)return null;return (x.createElement("div",{className:"_n4- _3-8z"},x.createElement("div",null,z._("This page considers data up to and including {partition string}.",[z.param("partition string",this.state.partitionDate)]))));},_loadSegmentData:function(fa){this.setState({segmentData:null,partitionDate:null,samplingRate:null});var ga={fields:'data',start_date:fa.startTime,end_date:fa.endTime};this.loadAsyncTaskData(v.SEGMENT_NODE,fa.segmentID,ga,function(ha){return this.setState({segmentData:new u(ha.event_counts,ha.breakdown_counts,ha.stages),partitionDate:l.formatLaserReceivedDate(ha.partition),samplingRate:ha.sampling_rate});}.bind(this));}});e.exports=ea;},null);
__d("FalcorSegmentDraftSizeEstimationCard",["AppEventsFunnelAggregationMethod","FalcorAsyncTaskLoaderMixin","FalcorCard","FalcorSegmentRuleUtils","InsightsAppEventsGraphQueryUtils","InsightsContext","InsightsFunnelData","InsightsGraphAPI","InsightsGraphAPIConstants","InsightsLoadingIndicator.react","ProgressBar.react","React","SegmentStore","underscore.ads","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=r,x=w.PropTypes,y={},z=r.createClass({displayName:"FalcorSegmentDraftSizeEstimationCard",mixins:[h],propTypes:Object.assign({},i.propTypes,{segment:x.object}),getInitialState:function(){return {draftUniques:null,totalUniques:null};},componentWillMount:function(){this._loadTotalUniques();this._loadEstimate(this.props.segment);},shouldComponentUpdate:function(aa,ba){var ca=this.props.segment,da=aa.segment;if(!da.isValid()&&!this._isEmptySegment(da))return false;var ea=this.state.draftUniques!==ba.draftUniques||this.state.totalUniques!==ba.totalUniques,fa=ca.orderedRules.filter(function(ia){return !j.isEmptyRule(ia);}),ga=da.orderedRules.filter(function(ia){return !j.isEmptyRule(ia);}),ha=!t.isEqual(fa,ga)||!t.isEqual(ca.percentile_rule,da.percentile_rule);if(ha){this.setState({draftUniques:null});this._loadEstimate(da);}return ha||ea;},_loadTotalUniques:function(){k.getTotalCount('fb_mobile_activate_app','USERS',l.getLaserMaxDateRangeStartDate().getTime()/1000,l.getLaserMaxDateRangeEndDate().getTime()/1000).done(function(aa){this.setState({totalUniques:aa});if(this._isEmptySegment(this.props.segment))this.setState({draftUniques:aa});}.bind(this));},_loadEstimate:function(aa){if(this._isEmptySegment(aa)){this.setState({draftUniques:this.state.totalUniques});return;}var ba=this._readCache(aa);if(ba!==null){this._addUniquesToState(aa,ba);return;}s.createDraftEntity(function(ca){var da=ca.id,ea={fields:'data'};this.loadAsyncTaskDataWithoutValidation(o.SEGMENT_NODE,da,ea,function(fa){n.objectRemove(da).done();var ga=new m(fa.event_counts,fa.breakdown_counts),ha=ga.getCounts(g.UNIQUES),ia=ha[0][0];this._addUniquesToState(aa,ia);}.bind(this));}.bind(this));},_addUniquesToState:function(aa,ba){this._writeCache(aa,ba);this.setState({draftUniques:ba});},_isEmptySegment:function(aa){return (aa.orderedRules.length===0||aa.orderedRules.every(function(ba){return j.isEmptyRule(ba);}))&&j.isEmptyRule(aa.percentile_rule);},_writeCache:function(aa,ba){var ca=this._getCacheKey(aa);y[ca]=ba;},_readCache:function(aa){var ba=this._getCacheKey(aa);return y[ba]?y[ba]:null;},_getCacheKey:function(aa){return JSON.stringify(t.sortBy(aa.orderedRules,function(ba){return ba.parameter_name+ba.event_name+ba.operator;}))+JSON.stringify(aa.percentile_rule);},render:function(){return (r.createElement(i,{className:"_2psz"},r.createElement("div",null,r.createElement("div",{className:"_bfd"},v._("Estimated size")),this._renderEstimatedSize())));},_renderEstimatedSize:function(){if(this.state.draftUniques===null||this.state.totalUniques===null)return r.createElement(p,null);var aa=this.state.totalUniques===0?0:this.state.draftUniques/this.state.totalUniques*100;aa=Math.min(aa,100);var ba=aa<1?Math.round(10*aa)/10:Math.round(aa);return (r.createElement("div",{className:"_2pt0"},r.createElement(q,{className:"_2ps_ _3-8n",value:aa,size:"small"}),r.createElement("div",{className:"_2pt0"},v._("{percentage without \u0025 sign}\u0025 of Your App's Users",[v.param("percentage without % sign",ba)]))));}});e.exports=z;},null);
__d("FalcorSegmentPercentileRuleBuilder",["BonsaiAppEventTypesUtils","BonsaiText","FalcorCard","FalcorSegmentRules","InsightsContext","InsightsEventLogger","React","SegmentStore","XUICloseButton.react","XUISelector.react","XUISelectorButton.react","XUITextInput.react","cx","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();'use strict';var v=p.Option,w=m,x=w.PropTypes,y='default_app_event',z='default_by',aa=m.createClass({displayName:"FalcorSegmentPercentileRuleBuilder",propTypes:{error:x.bool,rule:x.shape({event_rule:x.shape({event_name:x.string,operator:x.string,values:x.arrayOf(x.string),cumulative_rule:x.shape({metric:x.string.isRequired,period:x.string,technique:x.shape({technique_name:x.string.isRequired,lower_bound:x.number,upper_bound:x.number})})})}).isRequired},render:function(){var ba,ca=Object.keys(this.props.rule).length;if(ca)ba=m.createElement(o,{className:"_5236",href:"#",onClick:this._onRemoveRule,size:"medium"});return (m.createElement(i,{className:((this.props.error?"_46be":''))},ba,m.createElement("div",{className:"_bfd"},t._("Evento de aplicaci\u00f3n")),this._getAppEventSelector(),this._getBySelector(),this._getCustomBoundsInput()));},_onRemoveRule:function(){l.logEvent({_eventName:'segments_builder_remove_rule',feature_id:k.getActiveSegmentID()?k.getActiveSegmentID():null,index:0,rule_type:'percentile'});n.updateEntityConfiguration({percentile_rule:{$set:{}}});},_getAppEventSelector:function(){var ba=this.props.rule.event_rule||{},ca=g.getAppEvents(),da=ca.map(function(event){return m.createElement(v,{key:event.event_name,value:event.event_name},event.display_name);});return (m.createElement(p,{className:"_3-90",onChange:this._onChangeAppEvent,size:"large",value:ba.event_name||y},m.createElement(q,{className:"_29wt"}),m.createElement(v,{className:"hidden_elem",value:y},t._("Select an App Event")),da));},_onChangeAppEvent:function(ba){l.logEvent({_eventName:'segments_builder_change_rule',feature_id:k.getActiveSegmentID()?k.getActiveSegmentID():null,index:0,rule_type:'percentile'});n.updateEntityConfiguration({percentile_rule:{$set:{event_rule:{event_name:ba.value,parameters:[]}}}});},_getBySelector:function(){var ba=this.props.rule.event_rule||{};if(!ba.event_name)return null;var ca=Object.keys(j.Percentile).map(function(da){return m.createElement(v,{key:da,value:da},h.cumulative[da]);});return (m.createElement(p,{className:"_3-90",onChange:this._onChangeBy,size:"large",value:this._getBySelectorValue()||z},m.createElement(q,{className:"_29wt"}),m.createElement(v,{className:"hidden_elem",value:z},t._("De")),ca));},_isMostValue:function(ba){return ba===j.Percentile.MOST_VALUE_5||ba===j.Percentile.MOST_VALUE_10||ba===j.Percentile.MOST_VALUE_25||ba===j.Percentile.MOST_VALUE_CUSTOM;},_onChangeBy:function(ba){var ca;if(this._isMostValue(ba.value)){ca=g.isAppEventCurrencyValue(this.props.rule.event_rule.event_name)?'usd_amount':'amount';}else ca='count';var da,ea=100;switch(ba.value){case j.Percentile.MOST_ACTIVE_5:case j.Percentile.MOST_VALUE_5:da=95;break;case j.Percentile.MOST_ACTIVE_10:case j.Percentile.MOST_VALUE_10:da=90;break;case j.Percentile.MOST_ACTIVE_25:case j.Percentile.MOST_VALUE_25:da=75;break;default:da=null;ea=null;break;}var fa={event_rule:{$merge:{cumulative_rule:{metric:ca,technique:{technique_name:'percentile',lower_bound:da,upper_bound:ea}}}}};n.updateEntityConfiguration({percentile_rule:fa});},_getBySelectorValue:function(){var ba=this.props.rule.event_rule||{},ca=ba.cumulative_rule;if(!ca)return null;var da=ca.metric,ea=ca.technique;if(!da||!ea)return null;var fa=ea.technique_name==='percentile'&&ea.upper_bound===100;if(da==='count'){if(fa)switch(ea.lower_bound){case 95:return j.Percentile.MOST_ACTIVE_5;case 90:return j.Percentile.MOST_ACTIVE_10;case 75:return j.Percentile.MOST_ACTIVE_25;}return j.Percentile.MOST_ACTIVE_CUSTOM;}else{u(da==='amount'||da==='usd_amount');if(fa)switch(ea.lower_bound){case 95:return j.Percentile.MOST_VALUE_5;case 90:return j.Percentile.MOST_VALUE_10;case 75:return j.Percentile.MOST_VALUE_25;}return j.Percentile.MOST_VALUE_CUSTOM;}u(false);},_getCustomBoundsInput:function(){var ba=this._getBySelectorValue();if(ba!==j.Percentile.MOST_ACTIVE_CUSTOM&&ba!==j.Percentile.MOST_VALUE_CUSTOM)return null;var ca=this.props.rule.event_rule.cumulative_rule,da=ca.technique,ea=da.lower_bound===null?'':String(da.lower_bound),fa=da.upper_bound===null?'':String(da.upper_bound);return (m.createElement("span",null,m.createElement(r,{className:"_hl3",onChange:this._onLowerBoundChange,value:ea}),m.createElement("span",{className:"_hl4"},t._("-")),m.createElement(r,{className:"_hl3",onChange:this._onUpperBoundChange,xuiError:this._getUpperBoundErrorMessage(),value:fa}),t._("\u0025")));},_onLowerBoundChange:function(ba){this._onBoundChange(ba,'lower');},_onUpperBoundChange:function(ba){this._onBoundChange(ba,'upper');},_onBoundChange:function(ba,ca){var da;if(ba.target.value===""){da=null;}else{da=Number(ba.target.value);if(Number.isNaN(da))return;if(da<0||da>100)return;}var ea={};ea[ca+'_bound']={$set:da};n.updateEntityConfiguration({percentile_rule:{event_rule:{cumulative_rule:{technique:ea}}}});},_getUpperBoundErrorMessage:function(){var ba=this.props.rule.event_rule.cumulative_rule,ca=ba.technique;if(ca.lower_bound!==null&&ca.upper_bound!==null&&ca.lower_bound>=ca.upper_bound)return (t._("Upper bound must be greater than the lower bound"));return null;}});e.exports=aa;},null);
__d("FalcorSegmentOperatorConfig",["FalcorSegmentRules","FalcorSegmentTextUtils","invariant"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=Object.keys(g.Operators),k={};k[g.Demographic.AGE]=[g.Operators.ieq,g.Operators.ineq,g.Operators.gt,g.Operators.lt,g.Operators.gte,g.Operators.lte,g.Operators.i_is_any,g.Operators.i_is_not_any];k[g.Demographic.GENDER]=[g.Operators.ieq,g.Operators.ineq,g.Operators.i_is_any,g.Operators.i_is_not_any];k[g.Demographic.COUNTRY]=k[g.Demographic.LOCALE]=[g.Operators.ieq,g.Operators.ineq,g.Operators.i_is_any,g.Operators.i_is_not_any,g.Operators.i_contains,g.Operators.i_not_contains];var l=[g.Operators.ieq,g.Operators.ineq],m={};m[g.Technology.DEVICE_OS]=m[g.Technology.SHORT_VERSION_CODE]=m[g.Technology.USER_AGENT]=m[g.Technology.APP_VERSION]=j;m[g.Technology.DEVICE_MODEL]=m[g.Technology.IDENTITY_SOURCE]=m[g.Technology.CLIENT]=[g.Operators.ieq,g.Operators.ineq,g.Operators.i_is_any,g.Operators.i_is_not_any,g.Operators.i_contains,g.Operators.i_not_contains];var n={getSupportedOperators:function(o,p){var q=this._configFormat(j);if(!p)return q;switch(o){case g.Types.DEMOGRAPHIC:return this._getSupportedDemographicOperators(p);case g.Types.ACQUISITION_SOURCE:return this._getSupportedAcquisitionSourceOperators(p);case g.Types.TECHNOLOGY:return this._getSupportedTechnologyOperators(p);case g.Types.APP_EVENT:return this._getSupportedAppEventOperators(p);case g.Types.PERCENTILES:return this._getSupportedPercentileOperators(p);default:i(false);break;}},_getSupportedDemographicOperators:function(o){return this._configFormat(k[o]);},_getSupportedAcquisitionSourceOperators:function(o){return this._configFormat(l);},_getSupportedTechnologyOperators:function(o){return this._configFormat(m[o]);},_getSupportedAppEventOperators:function(o){i(false);},_getSupportedPercentileOperators:function(o){i(false);},_configFormat:function(o){var p=o.map(function(q){return {text:h.getOperatorLabel(q),value:q};});return {defaultValue:o[0],isArray:{i_is_any:true,i_is_not_any:true},operators:p};}};e.exports=n;},null);
__d("FalcorSegmentTypeaheadUtils",["BonsaiApiBreakdown","FalcorBreakdownsTextUtils","InsightsGraphAPI","underscore.ads","isValidID"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l='fb_mobile_activate_app',m={getAdObjectNames:function(n,o){i.cachedObjectsGet('Ad Campaign/Ad Set/Ad',n.filter(function(p){return p&&k(p);}),{fields:'name'}).done(function(p){return o(p);});},getKnownBreakdownValues:function(n){var o=n.map(function(p){return g[p];});return i.cachedAppMetricGet('app_event',{aggregateBy:'COUNT',breakdowns:o,event_name:l}).then(function(p){var q=j.chain(p.data).pluck('breakdowns'),r=o.map(function(s){return this._getUniqueBreakdownValues(s,q);}.bind(this));return j.object(n,r);}.bind(this));},_getUniqueBreakdownValues:function(n,o){return o.pluck(n).unique().map(function(p){var q=p.split('/');return {uniqueID:p,title:h.getBreakdownValueDisplayString(n.toUpperCase(),q[q.length-1])};}).value();}};e.exports=m;},null);
__d("FalcorSegmentAcquisitionSourceRuleBuilder",["AppAcquisitionSourceCategory","BonsaiText","FalcorSearchSource","FalcorSegmentOperatorConfig","FalcorSegmentRules","FalcorSegmentTypeaheadUtils","Link.react","LoadingIndicator.react","Promise","React","SearchableDropdownInput.atlas","XUISelector.react","XUISelectorButton.react","cx","fbt","update"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=k.AcquisitionSource,x=k.Operators,y=r.Option,z=p,aa=z.PropTypes,ba=x.ieq,ca='default_acquisition_source',da={ACQUISITION_SOURCE:0,ACQUISITION_SOURCE_L1:1,ACQUISITION_SOURCE_L2:2,ACQUISITION_SOURCE_L3:3},ea=p.createClass({displayName:"FalcorSegmentAcquisitionSourceRuleBuilder",propTypes:{onChange:aa.func.isRequired,rule:aa.shape({parameter_name:aa.string,operator:aa.string,values:aa.arrayOf(aa.string)})},getInitialState:function(){var fa=this._getNumAcquisitionSourceLevels()||da.ACQUISITION_SOURCE;return {acquisitionSourceL1Values:[],acquisitionSourceL2Values:[],acquisitionSourceL3Values:[],acquisitionSourceValues:[],disclosureStep:fa,isLoading:true};},componentWillUpdate:function(fa){if(this.props!==fa&&!fa.rule.values)this.setState({disclosureStep:da.ACQUISITION_SOURCE});},componentWillMount:function(){o.all([this._fetchAcquisitionSourceValues(w.ACQUISITION_SOURCE,'acquisitionSourceValues'),this._fetchAcquisitionSourceValues(w.ACQUISITION_SOURCE_L1,'acquisitionSourceL1Values'),this._fetchAcquisitionSourceValues(w.ACQUISITION_SOURCE_L2,'acquisitionSourceL2Values'),this._fetchAcquisitionSourceValues(w.ACQUISITION_SOURCE_L3,'acquisitionSourceL3Values')]).done(function(fa){if(this.isMounted())this.setState({isLoading:false});}.bind(this));},componentDidMount:function(){if(!this.props.rule.operator){var fa=v(this.props.rule,{operator:{$set:ba}});this.props.onChange(fa);}},render:function(){var fa=this._getOperatorSelector(),ga=this._getAcquisitionSourceSelector(),ha=this._getAcquisitionSourceL1Selector(),ia=this._getAcquisitionSourceL2Selector(),ja=this._getAcquisitionSourceL3Selector(),ka=this._shouldShowRefine()?p.createElement(m,{onClick:this._discloseNext},u._("refine")):null,la=this.state.isLoading?p.createElement(n,{className:"_3c3_",size:"medium",color:"white"}):null;return (p.createElement("div",null,fa,ga,ha,ia,ja,ka,la));},_fetchAcquisitionSourceValues:function(fa,ga){return l.getKnownBreakdownValues([fa]).then(function(ha){var ia=ha[fa],ja={};ja[ga]=ia;this.setState(ja);l.getAdObjectNames(ia.map(function(ka){return ka.title;}),function(ka){ia=ia.map(function(la){var ma=ka[la.title]?ka[la.title].name+' ('+la.title+')':la.title;return v(la,{title:{$set:ma}});});ia.sort(function(la,ma){return la.title.localeCompare(ma.title);});ja={};ja[ga]=ia;this.setState(ja);}.bind(this));}.bind(this));},_getOperatorSelector:function(){var fa=j.getSupportedOperators(k.Types.ACQUISITION_SOURCE,w.ACQUISITION_SOURCE).operators,ga=fa.map(function(ha){return p.createElement(y,{key:ha.value,value:ha.value},ha.text);});return (p.createElement(r,{className:"_3-90",onChange:this._onChangeOperator,value:this.props.rule.operator||ba,size:"large"},p.createElement(s,{className:"_29wt"}),ga));},_onChangeOperator:function(fa){var ga=v(this.props.rule,{operator:{$set:fa.value}});this.props.onChange(ga);},_getAcquisitionSourceSelector:function(){var fa=this.state.acquisitionSourceValues,ga=this._getAcquisitionSourceValueLevel(0),ha=fa.map(function(ia){return p.createElement(y,{key:ia.uniqueID,value:ia.uniqueID},ia.title);});if(!fa.length)if(ga){ha.push(p.createElement(y,{key:ga,value:ga},h.breakdown.acquisition_source[ga]));}else ga=ca;return (p.createElement(r,{className:"_3-90",onChange:function(ia){return this._onChangeAcquisitionSource(ia.value);}.bind(this),value:ga,disabled:!fa.length,size:"large"},p.createElement(s,{className:"_29wt"}),p.createElement(y,{className:"hidden_elem",value:ca},u._("Select an Acquisition Source")),ha));},_onChangeAcquisitionSource:function(fa){var ga,ha,ia=fa.split('/').length-1;switch(ia){case 0:ga=w.ACQUISITION_SOURCE;ha=da.ACQUISITION_SOURCE;break;case 1:ga=w.ACQUISITION_SOURCE_L1;ha=da.ACQUISITION_SOURCE_L1;break;case 2:ga=w.ACQUISITION_SOURCE_L2;ha=da.ACQUISITION_SOURCE_L2;break;case 3:ga=w.ACQUISITION_SOURCE_L3;ha=da.ACQUISITION_SOURCE_L3;break;}this.setState({disclosureStep:ha});this.props.onChange({parameter_name:ga,operator:this.props.rule.operator,values:[fa]});},_shouldShowRefine:function(){var fa=this._getAcquisitionSourceValue(),ga=(/^ad_/).test(fa),ha=this._getAcquisitionSourceValueLevel(0)===g.ORGANIC_FACEBOOK;switch(this.state.disclosureStep){case da.ACQUISITION_SOURCE:return ga||ha;case da.ACQUISITION_SOURCE_L1:return ga&&!!this.state.acquisitionSourceL2Values.filter(function(ia){return ia.uniqueID.startsWith(fa);}).length;case da.ACQUISITION_SOURCE_L2:return !!this.state.acquisitionSourceL3Values.filter(function(ia){return ia.uniqueID.startsWith(fa);}).length;case da.ACQUISITION_SOURCE_L3:return false;}},_discloseNext:function(){var fa=this.state.disclosureStep;this.setState({disclosureStep:++fa});},_getAcquisitionSourceL1Selector:function(){if(this.state.disclosureStep<da.ACQUISITION_SOURCE_L1)return null;var fa=this._getAcquisitionSourceValueLevel(0),ga=this.state.acquisitionSourceL1Values.filter(function(na){return na.uniqueID.startsWith(fa);}),ha=(/^ad_/).test(fa);if(!this.state.acquisitionSourceL1Values.length){var ia=this._getAcquisitionSourceValueLevel(1);if(ia){var ja=this._getAcquisitionSourcesFromValue(ia)[1];ga.push({uniqueID:la,title:ja});}}if(ha){ga=ga.map(function(na){return {id:na.uniqueID,name:na.title};});}else ga=ga.map(function(na){var oa=h.getFacebookOrganicSource(na.title)||na.title;return {id:na.uniqueID,name:oa};});var ka=new i(ga),la=ga.find(function(na){return na.id===this._getAcquisitionSourceValueLevel(1);}.bind(this)),ma=ha?u._("Select a Campaign"):u._("Select a Source");return (p.createElement(q,{className:"_59xd _3-90",disabled:!this.state.acquisitionSourceL1Values.length,onSelect:function(na){return this._onChangeAcquisitionSource(na.id);}.bind(this),placeholder:ma,searchSource:ka,skipAutoWidth:true,value:la}));},_getAcquisitionSourceL2Selector:function(){if(this.state.disclosureStep<da.ACQUISITION_SOURCE_L2)return null;var fa=this._getAcquisitionSourceValueLevel(1),ga=this.state.acquisitionSourceL2Values.filter(function(ma){return ma.uniqueID.startsWith(fa);});if(!this.state.acquisitionSourceL2Values.length){var ha=this._getAcquisitionSourceValueLevel(2);if(ha){var ia=this._getAcquisitionSourcesFromValue(ha)[2];ga.push({uniqueID:ka,title:ia});}}ga=ga.map(function(ma){return {id:ma.uniqueID,name:ma.title};});var ja=new i(ga),ka=ga.find(function(ma){return ma.id===this._getAcquisitionSourceValueLevel(2);}.bind(this)),la=u._("Select an Ad Set");return (p.createElement(q,{className:"_3-90",disabled:!this.state.acquisitionSourceL2Values.length,dropdownWidth:300,onSelect:function(ma){return this._onChangeAcquisitionSource(ma.id);}.bind(this),placeholder:la,searchSource:ja,value:ka}));},_getAcquisitionSourceL3Selector:function(){if(this.state.disclosureStep<da.ACQUISITION_SOURCE_L3)return null;var fa=this._getAcquisitionSourceValueLevel(2),ga=this.state.acquisitionSourceL3Values.filter(function(ma){return ma.uniqueID.startsWith(fa);});if(!this.state.acquisitionSourceL3Values.length){var ha=this._getAcquisitionSourceValueLevel(3);if(ha){var ia=this._getAcquisitionSourcesFromValue(ha)[3];ga.push({uniqueID:ka,title:ia});}}ga=ga.map(function(ma){return {id:ma.uniqueID,name:ma.title};});var ja=new i(ga),ka=ga.find(function(ma){return ma.id===this._getAcquisitionSourceValueLevel(3);}.bind(this)),la=u._("Selecciona un anuncio:");return (p.createElement(q,{className:"_3-90",disabled:!this.state.acquisitionSourceL3Values.length,dropdownWidth:300,onSelect:function(ma){return this._onChangeAcquisitionSource(ma.id);}.bind(this),placeholder:la,searchSource:ja,value:ka}));},_getAcquisitionSourceValue:function(){if(this.props.rule.values)return this.props.rule.values[0];return null;},_getAcquisitionSourcesFromValue:function(fa){if(fa)return fa.split('/');return null;},_getNumAcquisitionSourceLevels:function(){var fa,ga=this._getAcquisitionSourceValue();if(ga)fa=this._getAcquisitionSourcesFromValue(ga);if(fa)return fa.length-1;return 0;},_getAcquisitionSourceValueLevel:function(fa){var ga,ha=this._getAcquisitionSourceValue();if(ha)ga=this._getAcquisitionSourcesFromValue(ha);if(ga&&this._getNumAcquisitionSourceLevels()>=fa)return ga.slice(0,fa+1).join('/');return null;}});e.exports=ea;},null);
__d("FalcorSegmentDemographicsRuleBuilder",["BonsaiApiBreakdown","BonsaiText","FalcorParameterRuleBuilder","FalcorSegmentOperatorConfig","FalcorSegmentRules","FalcorSegmentTextUtils","FalcorBreakdownsTextUtils","InsightsGraphAPI","React","cx","underscore.ads"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';var r=o,s=r.PropTypes,t='fb_mobile_activate_app',u=o.createClass({displayName:"FalcorSegmentDemographicsRuleBuilder",propTypes:{onChange:s.func.isRequired,rule:s.shape({parameter_name:s.string,operator:s.string,values:s.arrayOf(s.string)}),ruleType:s.oneOf(Object.keys(k.TypeValues)).isRequired,defaultParamName:s.string},getDefaultProps:function(){return {rule:{}};},render:function(){var v=k.TypeValues[this.props.ruleType],w=Object.keys(v).map(function(y){return {parameter_name:y,display_name:l.getDemographicLabel(y)};}),x=j.getSupportedOperators(this.props.ruleType,this.props.rule.parameter_name);return (o.createElement("div",{className:"_2bq1"},o.createElement(i,{allowCustomValue:this._checkAllowCustomValue(this.props.rule.parameter_name),onChange:this._onChange,parameterRule:this.props.rule,parameterSelectorLabel:this.props.defaultParamName,parameters:w,operatorConfig:x,loadParameterValues:this._loadParameterValues,getParameterDisplayValue:function(y,z){return m.getBreakdownValueDisplayString(y,z);}})));},_checkAllowCustomValue:function(v){return v!==k.Demographic.AGE;},_getPredefinedParameterValues:function(v){if(v===k.Demographic.AGE)return Object.keys(h.breakdown.age).filter(function(w){return w!=='UNKNOWN'&&w!=='55+';}).map(function(w){return {uniqueID:w,title:h.breakdown.age[w]};});return [];},_loadParameterValues:function(v,w){if(!v){w([]);return;}if(!this._checkAllowCustomValue(v)){w(this._getPredefinedParameterValues(v));return;}var x=g[v];n.cachedAppMetricGet('app_event',{aggregateBy:'COUNT',breakdowns:[x],event_name:t}).done(function(y){var z=q.chain(y.data).pluck('breakdowns').pluck(x).unique().map(function(aa){return {uniqueID:aa,title:m.getBreakdownValueDisplayString(v,aa)};}).value();w(z);});},_onChange:function(v){this.props.onChange(v);}});e.exports=u;},null);
__d("FalcorSegmentRuleBuilder",["FalcorAppEventRuleDataBuilder","FalcorCard","FalcorSegmentAcquisitionSourceRuleBuilder","FalcorSegmentDemographicsRuleBuilder","FalcorSegmentRuleUtils","FalcorSegmentRules","FalcorSegmentTextUtils","InsightsContext","InsightsEventLogger","React","SegmentStore","XUICloseButton.react","XUISelector.react","XUISelectorButton.react","cx","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();'use strict';var x=s.Option,y=p,z=y.PropTypes,aa=l.Types,ba='default_rule_type',ca=p.createClass({displayName:"FalcorSegmentRuleBuilder",propTypes:{appID:z.string.isRequired,className:z.string,error:z.bool,orderedIndex:z.number.isRequired,rule:z.object.isRequired},render:function(){var da=this._getRuleBuilder();if(da)da=p.createElement("div",{className:"_2--r _3-8- _2pig"},da);var ea,fa=this.props.orderedIndex,ga=Object.keys(this.props.rule).length,ha=fa||ga;if(ha)ea=p.createElement(r,{className:"_5236",href:"#",onClick:this._onRemoveRule,size:"medium"});var ia,ja=this.props.orderedIndex;if(ja)ia=p.createElement("div",{className:"_48mn _3-98 _3-9b"},v._("AND"));return (p.createElement("div",null,ia,p.createElement(h,{className:((this.props.error?"_46be":''))},ea,this._getRuleTypeSelector(),da)));},_onRemoveRule:function(){var da=k.getRuleType(this.props.rule);o.logEvent({_eventName:'segments_builder_remove_rule',feature_id:n.getActiveSegmentID()?n.getActiveSegmentID():null,index:this.props.orderedIndex,rule_type:da?da.toLowerCase():null});q.updateEntityConfiguration({orderedRules:{$splice:[[this.props.orderedIndex,1]]}});},_onChangeRule:function(da){if(k.getRuleType(this.props.rule)!==k.getRuleType(da))o.logEvent({_eventName:'segments_builder_change_rule',rule_type:k.getRuleType(da).toLowerCase(),feature_id:n.getActiveSegmentID()?n.getActiveSegmentID():null,index:this.props.orderedIndex});q.updateEntityConfiguration({orderedRules:{$splice:[[this.props.orderedIndex,1,da]]}});},_getRuleTypeSelector:function(){var da=Object.keys(aa).map(function(ea){if(ea===aa.PERCENTILE){return null;}else return (p.createElement(x,{value:ea,key:ea},m.getRuleTypeLabel(ea)));});return (p.createElement("div",null,p.createElement("div",{className:"_bfd"},v._("CONDITION TYPE")),p.createElement(s,{className:"_523b",value:k.getRuleType(this.props.rule)||ba,onChange:function(ea){return this._onChangeRule({ruleType:ea.value});}.bind(this)},p.createElement(t,{className:"_29wt"}),p.createElement(x,{className:"hidden_elem",value:ba,key:ba},v._("Select a Condition Type")),da)));},_getRuleBuilder:function(){var da=k.getRuleType(this.props.rule);switch(da){case null:return null;case aa.DEMOGRAPHIC:case aa.TECHNOLOGY:return (p.createElement(j,{ruleType:da,rule:this.props.rule,onChange:function(ea){return this._onChangeRule(ea);}.bind(this)}));case aa.ACQUISITION_SOURCE:return (p.createElement(i,{rule:this.props.rule,onChange:function(ea){return this._onChangeRule(ea);}.bind(this)}));case aa.APP_EVENT:return (p.createElement(g,{appID:this.props.appID,eventRuleData:this.props.rule,onChange:function(ea){return this._onChangeRule(ea);}.bind(this),requireNegationSelector:true,requireRuleName:false}));default:w(false);break;}}});e.exports=ca;},null);
__d("FalcorSegmentInputForm",["FalcorCard","FalcorFeatureValidationMixin","FalcorNotice","FalcorSegmentDraftSizeEstimationCard","FalcorSegmentPercentileRuleBuilder","FalcorSegmentRuleBuilder","FalcorSegmentRuleUtils","InsightsEventLogger","InsightsLoadingIndicator.react","LeftRight.react","React","SegmentStore","XUIButton.react","XUITextInput.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=q,x=w.PropTypes,y=q.createClass({displayName:"FalcorSegmentInputForm",mixins:[h],propTypes:{appID:x.string.isRequired,segment:x.object.isRequired},componentWillReceiveProps:function(z){if(!z.segment.orderedRules.length)r.updateEntityConfiguration({orderedRules:{$set:[{}]}});},render:function(){var z=this.props.segment;if(z==null)return q.createElement(o,null);var aa=this._getNoNameError(),ba=this._getConflictingRules(),ca=this._getInvalidRuleIndices(z.orderedRules),da=this._getInvalidRulesError(),ea=this._getInvalidPercentileRuleError(),fa=z.orderedRules.map(function(ha,ia){var ja=!!da&&ca.indexOf(ia)>=0,ka=ba.indexOf(ia)>=0,la=!!ja||ka;return (q.createElement(l,{error:la,appID:this.props.appID,key:ia,orderedIndex:ia,rule:ha}));}.bind(this)),ga=v._("Add condition");return (q.createElement("div",{className:"_bfc"},aa,q.createElement(p,{className:"_2psx"},q.createElement(g,{className:(("_2psy")+(!!aa?' '+"_46be":''))},q.createElement("div",{className:"_bfd"},v._("Segment Name")),q.createElement(t,{className:"_2sc9",height:"tall",onChange:this._onNameChange,value:z.name})),q.createElement(j,{segment:z})),q.createElement("div",null,q.createElement("div",{className:"_3toq"},q.createElement("div",{className:"_3tor _3-91"},v._("1")),q.createElement("span",{className:"_3tos"},v._("Define Conditions"))),this._getConflictingRulesError(),da,fa),q.createElement(s,{className:"_3tot _2pi2 _2pib",label:ga,onClick:this._onAddRule}),q.createElement("div",null,q.createElement("div",{className:"_3toq"},q.createElement("div",{className:"_3tor _3-91"},v._("2")),q.createElement("span",{className:"_3tos"},v._("Definir el percentil de la distribuci\u00f3n"),' ',q.createElement("span",{className:"_2vrq"},v._("(Opcional)"))))),ea,q.createElement(k,{error:!!ea,rule:z.percentile_rule})));},_getNoNameError:function(){if(!this.props.segment.name.trim())return this._renderErrorOnSave(v._("It looks like you forgot to enter a name for your segment."),v._("Please enter a name and try saving again."));},_getConflictingRules:function(){return m.getRuleConflicts(this.props.segment.orderedRules);},_getConflictingRulesError:function(){var z=v._("It looks like you have two similar conditions that will overwrite one another. Try using the 'is any of' or 'is not any of' operators instead.");return this._getConflictingRules().length?q.createElement(i,{noticeType:i.NoticeTypes.ERROR,message:z}):null;},_getInvalidRulesError:function(){var z=this._getInvalidRuleIndices(this.props.segment.orderedRules);if(z.length)return this._renderErrorOnSave(v._("It looks like you have some incomplete conditions."),v._("Please fix or remove these conditions and try saving again."));return null;},_getInvalidPercentileRuleError:function(){var z=!m.isValidCumulativeRule(this.props.segment.percentile_rule);if(z)return this._renderErrorOnSave(v._("It looks like you have an incomplete percentile condition."),v._("Please fix or remove the condition and try saving again."));return null;},_getInvalidRuleIndices:function(z){return z.map(function(aa,ba){return (m.isValidRule(aa)||m.isEmptyRule(aa))?null:ba;}).filter(function(aa){return aa!==null;});},_onAddRule:function(){n.logEvent({_eventName:'segments_builder_add_rule',feature_id:this.props.segment?this.props.segment.id:null});r.updateEntityConfiguration({orderedRules:{$push:[{}]}});},_onNameChange:function(z){r.updateEntityConfiguration({name:{$set:z.target.value}});}});e.exports=y;},null);
__d("FalcorSegmentEditCard",["FalcorSegmentInputForm","InsightsLoadingIndicator.react","React","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i,l=k.PropTypes,m=i.createClass({displayName:"FalcorSegmentEditCard",propTypes:Object.assign({},g.propTypes,{segmentID:l.string}),render:function(){if(this.props.segmentID&&!this.props.segment.id)return i.createElement(h,null);return (i.createElement(g,i.__spread({},this.props,{cardKey:"segment",key:"segment"})));},_title:function(){return j._("Edit Segment");}});e.exports=m;},null);
__d("FalcorSegmentListCard",["BonsaiSections","FalcorFeatureTableCard","InsightsEventLogger","InsightsGraphAPIConstants","React"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=k,m=l.PropTypes,n=k.createClass({displayName:"FalcorSegmentListCard",propTypes:{appID:m.string.isRequired,segmentList:m.array},componentDidMount:function(){i.logCardView('segements_list',{});},render:function(){return (k.createElement(h,{appID:this.props.appID,data:this.props.segmentList,section:g.SEGMENTS,edge:j.SEGMENT_EDGE}));}});e.exports=n;},null);
__d("FalcorSegmentsSectionController",["BonsaiSections","FalcorAnalyticsFeatureSectionController","FalcorSegmentApplyToFeatureHeader","FalcorSegmentDetailsCard","FalcorSegmentEditCard","FalcorSegmentListCard","FalcorCommonViews","InsightsContext","React","SegmentStore"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=o.createClass({displayName:"FalcorSegmentsSectionController",statics:{getKey:function(){return g.SEGMENTS;}},propTypes:Object.assign({},h.containerPropTypes),getInitialState:function(){return {additionalHeaderProps:null};},componentWillMount:function(){this.setHeader(this.props);},componentWillReceiveProps:function(r){this.setHeader(r);},setHeader:function(r){if(r.view===m.DETAILS){this.setState({additionalHeaderProps:{control:o.createElement(i,{segmentID:r.featureID})}});}else this.setState({additionalHeaderProps:null});},render:function(){return (o.createElement(h,o.__spread({},this.props,{onRenderView:this._onRenderView,section:g.SEGMENTS,entityStore:p,additionalHeaderProps:this.state.additionalHeaderProps})));},_onRenderView:function(r,s,t,u,v,w,x){switch(r){case m.LIST:return (o.createElement(l,{appID:n.getObjID(),cardKey:"segment_list",key:"segment_list",segmentList:s}));case m.CREATE:case m.EDIT:return (o.createElement(k,{appID:n.getObjID(),cardKey:"segment",key:"segment",segment:u,segmentID:t}));case m.DETAILS:return (o.createElement(j,{cardKey:"segment_details",key:"segment_details",segment:u,segmentID:t,startTime:v,endTime:w}));}return null;}});e.exports=q;},null);
__d("OverviewStoriesBar",["BonsaiSections","BonsaiSectionDateRangeMixin","BonsaiOverviewBarMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j.createClass({displayName:"OverviewStoriesBar",mixins:[h,i],getSection:function(){return g.STORIES;},getTitle:function(){return k._("Historias");},getMetrics:function(){return ['story_impressions','story_publishes','story_clicks'];},getChartLocations:function(){return [{card:'stories_funnel',tab:'impressions'},{card:'stories_funnel',tab:'publishes'},{card:'stories_positive',tab:'clicks'}];},getLabels:function(){return [k._("Impresiones de historias"),k._("Historias publicadas"),k._("Clics en historias")];}});e.exports=l;},null);
__d("FalcorStoriesDemographicsCard",["BonsaiApiBreakdown","BonsaiApiError","BonsaiApiPromise","BonsaiConstants","BonsaiDemoDataProcessMixin","BonsaiErrorNotice","BonsaiSectionDataLoaderMixin","BonsaiText","FalcorLegendSelectorMixin","FalcorLogCardViewMixin","FalcorSideBySideColumnsChart","InsightsLoadingIndicator.react","MenuSeparator.react","React","PopoverMenu.react","ReactXUIMenu","XUIPopoverButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();'use strict';var z=b('ReactXUIMenu').Item,aa=t.createClass({displayName:"FalcorStoriesDemographicsCard",mixins:[m,k,o,p],_metrics:{publishes:'story_publishes',impressions:'story_impressions',clicks:'story_clicks'},_breakdowns:[g.CLIENT,g.OG_ACTION_TYPE],getInitialState:function(){return Object.assign({},this._getInitialCardState('publishes'),{bucket:j.ALL,breakdown:g.CLIENT});},componentWillMount:function(){Object.keys(this._metrics).forEach(function(ba){this._breakdowns.map(function(ca){this.addMetric([ba+ca,'age_gender'],this._metrics[ba],{breakdowns:[g.AGE,g.GENDER,ca]});},this);},this);this.fetchMetrics();},_title:function(){return n.demo;},_getHelptextMap:function(){return {publishes:'StoriesPublishesGenderAndAge',impressions:'StoriesImpressionsGenderAndAge',clicks:'StoriesClicksGenderAndAge'};},_sectionTitles:{publishes:y._("Editores"),impressions:y._("Usuarios"),clicks:y._("Personas que hicieron clic")},_onBucketSelected:function(ba){return function(ca,da){var ea=da.item.getValue();if(this.state.breakdown===ba&&this.state.bucket===ea)return;this.setState({bucket:ea,breakdown:ba});}.bind(this);},_selectorText:function(ba){switch(ba){case g.CLIENT:return y._("INCLUIR");default:return null;}},_renderSelector:function(ba,ca){var da=this.getData([ba+ca,'age_gender']).groupBy(ca);if(!da||(da instanceof h))return null;var ea=[];if(this.state.bucket!==j.ALL){ea.push(t.createElement(z,{key:j.ALL,value:j.ALL},n.getBucketLabel(j.ALL,ca)));ea.push(t.createElement(s,{key:"SEPARATOR"}));}var fa=Object.keys(da).sort();fa.map(function(ja){ea.push(t.createElement(z,{key:ja,value:ja},n.getBucketLabel(ja,ca)));});var ga=t.createElement(v,{onItemClick:this._onBucketSelected(ca)},ea),ha,ia=this._selectorText(ca);if(ia)ha=t.createElement("div",{className:"mbs"},ia);return (t.createElement("div",{className:"_5tj4 pts",key:ba+ca},ha,t.createElement(u,{align:"right",menu:ga},t.createElement(w,{depressed:this.state.breakdown===ca,haschevron:true,label:this.state.breakdown===ca?n.getBucketLabel(this.state.bucket,ca):n.getBucketLabel(j.ALL,ca)}))));},_getKeyToLabel:function(){return {publishes:this._sectionTitles.publishes,impressions:this._sectionTitles.impressions,clicks:this._sectionTitles.clicks};},_getKeyToSection:function(){var ba={};Object.keys(this._metrics).forEach(function(ca){var da=this.getData([ca+this.state.breakdown,'age_gender']),ea;if(this.state.bucket===j.ALL){ea=this.processFalcorGenderAgeData(da,false);}else{ea=da.groupBy(this.state.breakdown)[this.state.bucket];if(ea){ea=this.processFalcorGenderAgeData(ea,false);}else ea=new h({error:{code:'no_data'}});}var fa=this._breakdowns.map(function(ha){return this._renderSelector(ca,ha);},this);if(ea instanceof i){ba[ca]=t.createElement(r,null);}else if(ea instanceof h){ba[ca]=t.createElement(l,{className:"_3-8j",message:ea.getMessage()});}else{var ga=t.createElement("div",{className:"_5tj3 _3-98"},fa);ba[ca]=t.createElement(q,{ref:ca,xAxisValues:ea.ages,legendValues:ea.legend,chartData:ea.chartData,exportData:ea["export"],totalCount:1,selectors:ga});}}.bind(this));return ba;},_getExtraCardProps:function(){return {className:"_1iq4"};},_supportsProgressiveDataLoading:function(){return false;},_getParamsToLog:function(){return {card_breakdown:this.state.breakdown.toLowerCase(),card_section:this.state.activeSection.toLowerCase(),card_bucket:this.state.bucket.toLowerCase()};},_shouldLogAfterComponentDidUpdate:function(ba,ca){return this.state.activeSection!==ca.activeSection||this.state.breakdown!==ca.breakdown||this.state.bucket!==ca.bucket;}});e.exports=aa;},null);
__d("FalcorStoriesFunnelCard",["BonsaiApiBreakdown","BonsaiBreakdownChart","FalcorBreakdownChartSwitcher","BonsaiConfig","BonsaiSectionDataLoaderMixin","BonsaiText","FalcorLegendSelectorMixin","FalcorLogCardViewMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=o.createClass({displayName:"FalcorStoriesFunnelCard",mixins:[k,m,n],getInitialState:function(){return Object.assign({},this._getInitialCardState('ctr'),{activeBreakdown:g.NONE});},_metrics:{publishes:'story_publishes',impressions:'story_impressions',ctr:'story_clicks'},_getHelptextMap:function(){return {publishes:'StoryLifecyclePublishes',impressions:'StoryLifecycleImpressions',ctr:'StoryLifecycleCTR'};},componentWillMount:function(){Object.keys(this._metrics).forEach(function(r){this.addMetric(r,this._metrics[r],{breakdowns:[g.CLIENT,g.OG_ACTION_TYPE,g.AUTH_STATE]});},this);if(j.showRefParams)Object.keys(this._metrics).forEach(function(r){this.addMetric(r+'_ref',this._metrics[r],{breakdowns:[g.CLIENT,g.REF]});},this);if(j.showCohorts)Object.keys(this._metrics).forEach(function(r){this.addMetric(r+'_cohort',this._metrics[r],{breakdowns:[g.CLIENT,g.LABEL_COHORT]});},this);this.addMetric('impressions_sponsored',this._metrics.impressions,{breakdowns:[g.CLIENT,g.SPONSORED]});this.addMetric('ctr_sponsored',this._metrics.ctr,{breakdowns:[g.CLIENT,g.SPONSORED]});this.fetchMetrics();},getChartData:function(r,s,t){if(t){r=r+t;if(s)s=s+t;}var u=this.getData(r);if(s)u=u.divideBy(this.getData(s));return u;},renderBreakdownCharts:function(r,s,t){var u=o.createElement(i,{ref:r,currentCard:this.props.cardKey,onBreakdownChange:this._onBreakdownChange,categories:[this._getHelptextMap[r]]},o.createElement(h,{breakdown:g.NONE,currentCard:this.props.cardKey,data:this.getChartData(r,s),key:g.NONE,title:l[r],ratio:s!=null,shouldStack:s==null}),o.createElement(h,{breakdown:g.CLIENT,currentCard:this.props.cardKey,data:this.getChartData(r,s),key:g.CLIENT,ratio:s!=null,shouldStack:s==null}),o.createElement(h,{breakdown:g.OG_ACTION_TYPE,currentCard:this.props.cardKey,data:this.getChartData(r,s),key:g.OG_ACTION_TYPE,ratio:s!=null,shouldStack:s==null,sort:s==null?'total':'numerator'}),o.createElement(h,{breakdown:g.AUTH_STATE,currentCard:this.props.cardKey,data:this.getChartData(r,s),key:g.AUTH_STATE,ratio:s!=null,shouldStack:s==null}));if(t)u.props.children.push(o.createElement(h,{breakdown:g.SPONSORED,currentCard:this.props.cardKey,data:this.getChartData(r,s,'_sponsored'),key:g.SPONSORED,ratio:s!=null,shouldStack:s==null}));if(j.showRefParams)u.props.children.push(o.createElement(h,{breakdown:g.REF,currentCard:this.props.cardKey,data:this.getChartData(r,s,'_ref'),key:g.REF,shouldStack:false,showTotal:false,ratio:s!=null,sort:s==null?'total':'numerator'}));if(j.showCohorts)u.props.children.push(o.createElement(h,{breakdown:g.LABEL_COHORT,currentCard:this.props.cardKey,data:this.getChartData(r,s,'_cohort'),key:g.LABEL_COHORT,shouldStack:false,showTotal:false,ratio:s!=null}));return u;},_getKeyToLabel:function(){return {ctr:l.ctr,impressions:l.impressions,publishes:l.publishes};},_getKeyToSection:function(){return {ctr:this.renderBreakdownCharts('ctr','impressions',true),impressions:this.renderBreakdownCharts('impressions',null,true),publishes:this.renderBreakdownCharts('publishes',null,false)};},_title:function(){return p._("Distribuci\u00f3n de la historia");},_onBreakdownChange:function(r){this.setState({activeBreakdown:r});},_getParamsToLog:function(){return {card_breakdown:this.state.activeBreakdown.toLowerCase(),card_section:this.state.activeSection.toLowerCase()};},_shouldLogAfterComponentDidUpdate:function(r,s){return this.state.activeSection!==s.activeSection||this.state.activeBreakdown!==s.activeBreakdown;}});e.exports=q;},null);
__d("FalcorStoriesNegativeCard",["BonsaiApiBreakdown","BonsaiBreakdownChart","FalcorBreakdownChartSwitcher","BonsaiLinesTimeSeriesChart","BonsaiSectionDataLoaderMixin","BonsaiText","FalcorLegendSelectorMixin","FalcorLogCardViewMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=o.createClass({displayName:"FalcorStoriesNegativeCard",mixins:[k,m,n],getInitialState:function(){return Object.assign({},this._getInitialCardState('spam_rate'),{activeBreakdown:g.NONE});},componentWillMount:function(){this.addMetricWithEcosystem('spam_rate','story_spam_rate',{breakdowns:[g.OG_ACTION_TYPE]});this.addMetric('blocks','app_blocks');this.fetchMetrics();},_getHelptextMap:function(){return {spam_rate:'StoriesSpamRates',blocks:'StoriesAppBlocks'};},_getKeyToLabel:function(){return {spam_rate:l.spam_rate,blocks:l.blocks};},_getKeyToSection:function(){return {spam_rate:o.createElement(i,{ref:"spam_rate",currentCard:this.props.cardKey,onBreakdownChange:this._onBreakdownChange,categories:[this._getHelptextMap().spam_rate]},o.createElement(h,{breakdown:g.NONE,currentCard:this.props.cardKey,data:this.getDataWithEcosystem('spam_rate'),key:g.NONE,ratio:true,title:l.spam_rate}),o.createElement(h,{breakdown:g.OG_ACTION_TYPE,currentCard:this.props.cardKey,data:this.getDataWithEcosystem('spam_rate'),key:g.OG_ACTION_TYPE,ratio:true})),blocks:this._buildTimeSeriesChartGroup(o.createElement(j,o.__spread({},this._getLegendProps(),{ref:"blocks",data:[this.getData('blocks')],titles:[l.blocks],categories:[this._getHelptextMap().blocks]})))};},_title:function(){return p._("Participaci\u00f3n negativa con las historias");},_onBreakdownChange:function(r){this.setState({activeBreakdown:r});},_getParamsToLog:function(){return {card_breakdown:this.state.activeBreakdown.toLowerCase(),card_section:this.state.activeSection.toLowerCase()};},_shouldLogAfterComponentDidUpdate:function(r,s){return this.state.activeSection!==s.activeSection||this.state.activeBreakdown!==s.activeBreakdown;}});e.exports=q;},null);
__d("FalcorStoriesPositiveCard",["BonsaiApiBreakdown","BonsaiBreakdownChart","FalcorBreakdownChartSwitcher","BonsaiConfig","BonsaiSectionDataLoaderMixin","BonsaiText","FalcorLegendSelectorMixin","FalcorLogCardViewMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=o.createClass({displayName:"FalcorStoriesPositiveCard",mixins:[k,m,n],getInitialState:function(){return Object.assign({},this._getInitialCardState('clicks'),{activeBreakdown:g.NONE});},_metrics:{clicks:'story_clicks',likes:'story_likes',comments:'story_comments'},_getHelptextMap:function(){return {clicks:'StoryLifecycleClicks',likes:'StoriesLikes',comments:'StoriesComments'};},componentWillMount:function(){Object.keys(this._metrics).forEach(function(r){this.addMetricWithEcosystem(r,this._metrics[r],{breakdowns:[g.CLIENT,g.OG_ACTION_TYPE,g.AUTH_STATE]});this.addMetric(r+'_sponsored',this._metrics[r],{breakdowns:[g.CLIENT,g.SPONSORED]});},this);if(j.showRefParams)Object.keys(this._metrics).forEach(function(r){this.addMetric(r+'_ref',this._metrics[r],{breakdowns:[g.CLIENT,g.REF]});},this);if(j.showCohorts)Object.keys(this._metrics).forEach(function(r){this.addMetric(r+'_cohort',this._metrics[r],{breakdowns:[g.CLIENT,g.LABEL_COHORT]});},this);this.fetchMetrics();},renderBreakdownCharts:function(r){var s=o.createElement(i,{ref:r,currentCard:this.props.cardKey,onBreakdownChange:this._onBreakdownChange,categories:[this._getHelptextMap()[r]]},o.createElement(h,{breakdown:g.NONE,currentCard:this.props.cardKey,data:this.getDataWithEcosystem(r),key:g.NONE,title:l[r]}),o.createElement(h,{breakdown:g.CLIENT,currentCard:this.props.cardKey,data:this.getDataWithEcosystem(r),key:g.CLIENT}),o.createElement(h,{breakdown:g.OG_ACTION_TYPE,currentCard:this.props.cardKey,data:this.getDataWithEcosystem(r),key:g.OG_ACTION_TYPE}),o.createElement(h,{breakdown:g.AUTH_STATE,currentCard:this.props.cardKey,data:this.getDataWithEcosystem(r),key:g.AUTH_STATE}),o.createElement(h,{breakdown:g.SPONSORED,currentCard:this.props.cardKey,data:this.getDataWithEcosystem(r+'_sponsored'),key:g.SPONSORED}));if(j.showRefParams)s.props.children.push(o.createElement(h,{breakdown:g.REF,currentCard:this.props.cardKey,data:this.getData(r+'_ref'),key:g.REF,shouldStack:false,showTotal:false}));if(j.showCohorts)s.props.children.push(o.createElement(h,{breakdown:g.LABEL_COHORT,currentCard:this.props.cardKey,data:this.getData(r+'_cohort'),key:g.LABEL_COHORT,shouldStack:false,showTotal:false}));return s;},_getKeyToLabel:function(){return {clicks:l.clicks,likes:l.likes,comments:l.comments};},_getKeyToSection:function(){return {clicks:this.renderBreakdownCharts('clicks'),likes:this.renderBreakdownCharts('likes'),comments:this.renderBreakdownCharts('comments')};},_title:function(){return p._("Participaci\u00f3n positiva con las historias");},_onBreakdownChange:function(r){this.setState({activeBreakdown:r});},_getParamsToLog:function(){return {card_breakdown:this.state.activeBreakdown.toLowerCase(),card_section:this.state.activeSection.toLowerCase()};},_shouldLogAfterComponentDidUpdate:function(r,s){return this.state.activeSection!==s.activeSection||this.state.activeBreakdown!==s.activeBreakdown;}});e.exports=q;},null);
__d("FalcorStoriesSectionController",["BonsaiSections","BonsaiSectionDisplayNames","FalcorSectionDateRangeMixin","FalcorSectionRendererMixin","OverviewStoriesBar","React","FalcorStoriesDemographicsCard","FalcorStoriesFunnelCard","FalcorStoriesNegativeCard","FalcorStoriesPositiveCard"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=l.createClass({displayName:"FalcorStoriesSectionController",mixins:[i,j],statics:{getKey:function(){return g.STORIES;}},getSummary:function(){return (l.createElement(k,l.__spread({},this.getDateProps())));},getTitle:function(){return h.get(q.getKey());},getContent:function(){return [l.createElement(n,l.__spread({},this.getDateProps(),{cardKey:"stories_funnel",key:"stories_funnel"})),l.createElement(p,l.__spread({},this.getDateProps(),{cardKey:"stories_positive",key:"stories_positive"})),l.createElement(o,l.__spread({},this.getDateProps(),{cardKey:"stories_negative",key:"stories_negative"})),l.createElement(m,l.__spread({},this.getDateProps(),{cardKey:"stories_demographics",key:"stories_demographics"}))];}});e.exports=q;},null);
__d("FalcorAnonymousLoginDialogCard",["BonsaiSectionDataLoaderMixin","BonsaiApiBreakdown","BonsaiBreakdownChart","BonsaiText","FalcorLegendSelectorMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=l.createClass({displayName:"FalcorAnonymousLoginDialogCard",mixins:[g,k],anonymous:'anonymous',conversionsFacebook:'anonymous_facebook_conversions',impressions:'impressions',accepts:'accepts',ctr:'ctr',getInitialState:function(){return this._getInitialCardState(this.anonymous+this.ctr);},componentWillMount:function(){this.addMetricWithEcosystem([this.anonymous,this.impressions],'anonymous_login_dialog_permission_requests',{breakdowns:[h.CLIENT]});this.addMetricWithEcosystem([this.anonymous,this.accepts],'anonymous_login_dialog_permission_grants',{breakdowns:[h.CLIENT]});this.addMetricWithEcosystem([this.conversionsFacebook,this.impressions],'anonymous_login_dialog_upgrade_request_impressions',{breakdowns:[h.CLIENT]});this.addMetricWithEcosystem([this.conversionsFacebook,this.accepts],'anonymous_login_dialog_upgrade_grants',{breakdowns:[h.CLIENT]});this.fetchMetrics();},_title:function(){return m._("Cuadro de di\u00e1logo de inicio de sesi\u00f3n an\u00f3nimo");},_helptextMap:{anonymous:{ctr:'AnonymousLoginDialogAcceptRate',imps:'AnonymousLoginDialogImpressions',accepts:'AnonymousLoginDialogAccepts'},anonymous_facebook_conversions:{ctr:'AnonymousFacebookConversionsAcceptRate',imps:'AnonymousFacebookConversionsImpressions',accepts:'AnonymousFacebookConversionsAccepts'}},_textMap:{anonymous:{ctr:j.anonymous_accept_rate,imps:j.anonymous_impressions,accepts:j.anonymous_accepts},anonymous_facebook_conversions:{ctr:j.anonymous_facebook_conversion_accept_rate,imps:j.anonymous_facebook_conversion_impressions,accepts:j.anonymous_facebook_conversion_accepts}},_getHelptextMap:function(){var o={};[this.anonymous,this.conversionsFacebook].forEach(function(p){o[p+this.ctr]=this._helptextMap[p].ctr;o[p+this.impressions]=this._helptextMap[p].imps;o[p+this.accepts]=this._helptextMap[p].accepts;}.bind(this));return o;},_getKeyToLabel:function(){var o={};[this.anonymous,this.conversionsFacebook].forEach(function(p){o[p+this.ctr]=this._textMap[p].ctr;o[p+this.impressions]=this._textMap[p].imps;o[p+this.accepts]=this._textMap[p].accepts;}.bind(this));return o;},_getKeyToSection:function(){var o={},p=Object.assign({},this._getLegendProps(),{breakdown:h.CLIENT});[this.anonymous,this.conversionsFacebook].forEach(function(q){var r=this.getDataWithEcosystem([q,this.accepts]),s=this.getDataWithEcosystem([q,this.impressions]),t=r.divideBy(s);o[q+this.ctr]=this._buildTimeSeriesChartGroup(l.createElement(i,l.__spread({},p,{ref:q+this.ctr,data:t,percentage:true,shouldStack:false,categories:[this._getHelptextMap()[q+'ctr']]})));o[q+this.impressions]=this._buildTimeSeriesChartGroup(l.createElement(i,l.__spread({},p,{ref:q+this.impressions,data:s,categories:[this._getHelptextMap()[q+'imps']]})));o[q+this.accepts]=this._buildTimeSeriesChartGroup(l.createElement(i,l.__spread({},p,{ref:q+this.accepts,data:r,categories:[this._getHelptextMap()[q+'accepts']]})));}.bind(this));return o;}});e.exports=n;},null);
__d("FalcorAppCenterCard",["BonsaiLinesTimeSeriesChart","BonsaiSectionDataLoaderMixin","BonsaiText","FalcorLegendSelectorMixin","FalcorLogCardViewMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=l.createClass({displayName:"FalcorAppCenterCard",mixins:[h,j,k],getInitialState:function(){return this._getInitialCardState('ctr');},componentWillMount:function(){this.addMetricWithEcosystem(['installs','impressions'],'app_center_initial_permission_requests');this.addMetricWithEcosystem(['installs','accepts'],'app_center_initial_permission_grants');this.fetchMetrics();},_getHelptextMap:function(){return {ctr:'AppCenterAcceptRate',impressions:'AppCenterImpressions',accepts:'AppCenterAccepts'};},_title:function(){return m._("Nuevos inicios de sesi\u00f3n del centro de aplicaciones");},_getKeyToLabel:function(){return {ctr:i.accept_rate,impressions:i.impressions,accepts:i.accepts};},_getKeyToSection:function(){var o=this.getDataWithEcosystem(['installs','impressions']),p=this.getDataWithEcosystem(['installs','accepts']),q=this._getLegendProps();return {ctr:this._buildTimeSeriesChartGroup(l.createElement(g,l.__spread({},q,{ref:"ctr",data:[p.divideBy(o)],titles:[i.accept_rate],percentage:true,categories:[this._getHelptextMap().ctr]}))),impressions:this._buildTimeSeriesChartGroup(l.createElement(g,l.__spread({},q,{ref:"impressions",data:[o],titles:[i.impressions],disableEcosystem:true,categories:[this._getHelptextMap().impressions]}))),accepts:this._buildTimeSeriesChartGroup(l.createElement(g,l.__spread({},q,{ref:"accepts",data:[p],titles:[i.accepts],disableEcosystem:true,categories:[this._getHelptextMap().accepts]})))};},_supportsProgressiveDataLoading:function(){return false;},_getParamsToLog:function(){return {card_section:this.state.activeSection.toLowerCase()};},_shouldLogAfterComponentDidUpdate:function(o,p){return this.state.activeBreakdown!==p.activeBreakdown;}});e.exports=n;},null);
__d("FalcorLoginDialogCard",["BonsaiSectionDataLoaderMixin","BonsaiApiBreakdown","BonsaiBreakdownChart","BonsaiSelectorPanel","BonsaiText","FalcorErrorNotice","FalcorLegendSelectorMixin","FalcorLogCardViewMixin","FalcorMenuSelector","React","XUIGrayText.react","cx","fbt","ReactXUIMenu"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=b('ReactXUIMenu').Item,u=p.createClass({displayName:"FalcorLoginDialogCard",mixins:[g,m,n],installs:'installs',permissions:'existing_user_permissions',publish:'publish_permissions',getInitialState:function(){return Object.assign({},this._getInitialCardState('ctr'),{mode:this.installs});},componentWillMount:function(){this.addMetricWithEcosystem(['existing_user_permissions','impressions'],'login_dialog_additional_permission_requests',{breakdowns:[h.CLIENT]});this.addMetricWithEcosystem(['installs','impressions'],'login_dialog_initial_permission_requests',{breakdowns:[h.CLIENT]});this.addMetricWithEcosystem(['publish_permissions','impressions'],'login_dialog_publish_permission_requests',{breakdowns:[h.CLIENT]});this.addMetricWithEcosystem(['existing_user_permissions','accepts'],'login_dialog_additional_permission_grants',{breakdowns:[h.CLIENT]});this.addMetricWithEcosystem(['installs','accepts'],'login_dialog_initial_permission_grants',{breakdowns:[h.CLIENT]});this.addMetricWithEcosystem(['publish_permissions','accepts'],'login_dialog_publish_permission_grants',{breakdowns:[h.CLIENT]});this.fetchMetrics();},componentWillReceiveProps:function(v){this.setState({shouldRefresh:true});},_onModeChangeTo:function(v){this.setState({mode:v.activeValue,shouldRefresh:true});},_renderPermissionSelector:function(){var v=s._("MOSTRAR POR"),w=p.createElement(o,{className:"_5gr9",buttonClass:"_3-8x _3-9a",onItemChange:this._onModeChangeTo},p.createElement(t,{className:"_2li5",value:this.installs,label:k.installs}),p.createElement(t,{className:"_2li5",value:this.permissions,label:k.new_permissions}),p.createElement(t,{className:"_2li5",value:this.publish,label:k.publish_permissions})),x=p.createElement("div",null,p.createElement(q,{className:"_2pis",shade:"light",size:"small",display:"block",weight:"bold"},v),w);return (p.createElement("div",null,x,p.createElement("div",{className:"_2pig _2pis"},this.state.legend)));},_title:function(){return s._("Cuadro de di\u00e1logo de inicio de sesi\u00f3n");},_buildChartLegendGroup:function(v){if(this.refs[v.ref]){var w=this.refs[v.ref].getErrorMessages();if(w.length)return p.createElement(l,{message:w[0]});}return (p.createElement(j,{divider:false},v,this._renderPermissionSelector()));},_getHelptextMap:function(){var v={existing_user_permissions:{ctr:'LoginDialogExistingPermissionAcceptRate',imps:'LoginDialogExistingPermissionImpressions',accepts:'LoginDialogExistingPermissionAccepts'},installs:{ctr:'LoginDialogNewLoginAcceptRate',imps:'LoginDialogNewLoginImpressions',accepts:'LoginDialogNewLoginAccepts'},publish_permissions:{ctr:'LoginDialogPublishAcceptRate',imps:'LoginDialogPublishImpressions',accepts:'LoginDialogPublishAccepts'}};return v[this.state.mode];},_getKeyToLabel:function(){return {ctr:k.accept_rate,impressions:k.impressions,accepts:k.accepts};},_getKeyToSection:function(){var v=this.state.mode,w=this.getDataWithEcosystem([v,'accepts']),x=this.getDataWithEcosystem([v,'impressions']),y=w.divideBy(x),z=y.filterBy('client','!=',['mob_unknown','unknown']),aa=Object.assign({},this._getLegendProps(),{breakdown:h.CLIENT});return {ctr:this._buildChartLegendGroup(p.createElement(i,p.__spread({},aa,{ref:"ctr",data:z,percentage:true,shouldStack:false,categories:[this._getHelptextMap().ctr]}))),impressions:this._buildChartLegendGroup(p.createElement(i,p.__spread({},aa,{ref:"impressions",data:x,disableEcosystem:true,categories:[this._getHelptextMap().imps]}))),accepts:this._buildChartLegendGroup(p.createElement(i,p.__spread({},aa,{ref:"accepts",data:w,disableEcosystem:true,categories:[this._getHelptextMap().accepts]})))};},_getParamsToLog:function(){return {card_breakdown:this.state.mode.toLowerCase(),card_section:this.state.activeSection.toLowerCase()};},_shouldLogAfterComponentDidUpdate:function(v,w){return this.state.activeSection!==w.activeSection||this.state.mode!==w.mode;}});e.exports=u;},null);
__d("OverviewLoginBar",["BonsaiSections","BonsaiSectionDateRangeMixin","BonsaiOverviewBarMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j.createClass({displayName:"OverviewLoginBar",mixins:[h,i],getSection:function(){return g.LOGIN;},getTitle:function(){return k._("Inicio de sesi\u00f3n en Facebook");},getMetrics:function(){return ['initial_permission_grants','facebook_features_daily_active_users','facebook_features_monthly_active_users'];},getChartLocations:function(){return [{card:'users_trend',tab:'new'},{card:'users_trend',tab:'active'},{card:'users_trend',tab:'active'}];},getLatest:function(){return [false,true,true];},getLabels:function(){return [k._("Nuevos inicios de sesi\u00f3n"),k._("Usuarios activos por d\u00eda"),k._("Usuarios activos por mes")];}});e.exports=l;},null);
__d("FalcorGeoLocaleTable",["BonsaiApiBreakdown","BonsaiApiError","BonsaiApiPromise","BonsaiErrorNotice","BonsaiText","BonsaiUtils","FalcorPaginatedDataTable","InsightsLoadingIndicator.react","InsightsNumUtils","ObjectSort","React","cx","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=q,u=t.PropTypes,v=q.createClass({displayName:"FalcorGeoLocaleTable",propTypes:{breakdown:u.oneOf(s(g)).isRequired,data:u.oneOfType([u.object,u.array]).isRequired,downloadFileName:u.string.isRequired},render:function(){var w=this.props.data,x=false;Object.keys(w).forEach(function(z){if(w[z] instanceof i)x=true;});if(x)return (q.createElement("div",{className:"_5r8_"},q.createElement(n,null)));var y=this._buildTable();return y;},getExportData:function(){if(Array.isArray(this.props.data))return this.props.data;return null;},_buildTable:function(){var w=this.props.data;if(w instanceof h)return (q.createElement(j,{className:"_3-8t _3-96",message:this.props.data.getMessage()}));if(!w.length)return (q.createElement(j,{className:"_3-8t _3-96",message:k.errors.no_data}));if(w instanceof i)return q.createElement(n,null);if(!w.length)return null;var x=[{id:'title',label:k[this.props.breakdown],sortable:true,comparator:p.getStringSortFunction('title'),width:300},{id:'count',label:k.count,sortable:true,cellRenderer:function(y){return o.prettyInt(y);},comparator:p.getReverseNumericSortFunction('count'),width:300},{id:'change',label:k.change,sortable:true,cellRenderer:this._renderPercentageChangeCell,comparator:this._metricSort('change'),width:300}];return (q.createElement(m,{columns:x,key:this.props.breakdown,rows:this._buildRows(w)}));},_metricSort:function(w,x){return function(y,z){if(!z||!z[w])return -1;if(!y||!y[w])return 1;if(x)return z[w].value.localeCompare(y[w].value);return (z[w].value||0)-(y[w].value||0);};},_renderPercentageChangeCell:function(w){if(w.string){var x=w.value<0?'- '+w.string:'+ '+w.string;return (q.createElement("div",{className:w.className},x));}},_buildRows:function(w){var x;return w.map(function(y){x=y.body.reduce(function(ba,ca){return ba+ca.value;},0);var z=y.header,aa=l.calculatePercentageChange(y.oldest,y.latest);return {title:z,count:x,change:aa};});}});e.exports=v;},null);
__d("FalcorUsersDemoCard",["BonsaiApiBreakdown","BonsaiApiError","BonsaiApiPromise","BonsaiDemoDataProcessMixin","FalcorErrorNotice","BonsaiSectionDataLoaderMixin","BonsaiText","FalcorGeoLocaleTable","FalcorLegendSelectorMixin","FalcorLogCardViewMixin","FalcorSideBySideColumnsChart","InsightsLoadingIndicator.react","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();'use strict';var u=s.createClass({displayName:"FalcorUsersDemoCard",mixins:[j,l,o,p],getInitialState:function(){return this._getInitialCardState('gender_age');},componentWillMount:function(){this.addMetric('age_gender','initial_permission_grants',{breakdowns:[g.AGE,g.GENDER]});this.addMetric('country','initial_permission_grants',{breakdowns:[g.COUNTRY]});this.addMetric('locale','initial_permission_grants',{breakdowns:[g.LOCALE]});this.fetchMetrics();},_title:function(){return t._("Datos demogr\u00e1ficos de nuevos inicios de sesi\u00f3n de Facebook");},_getHelptextMap:function(){return {gender_age:'UserDemoGenderAndAge',country:null,locale:null};},_getKeyToLabel:function(){return {gender_age:m.gender_age,country:m.country,locale:m.locale};},_getKeyToSection:function(){var v=t._("login_countries"),w=t._("login_locales"),x=this.processGeoLocaleData();return {gender_age:this._getGenderAgeChart(),country:s.createElement(n,{ref:"country",breakdown:g.COUNTRY,currentCard:this.props.cardKey,data:x[g.COUNTRY],downloadFileName:v,key:this.props.cardKey}),locale:s.createElement(n,{ref:"locale",breakdown:g.LOCALE,currentCard:this.props.cardKey,data:x[g.LOCALE],downloadFileName:w,key:this.props.cardKey})};},_getGenderAgeChart:function(){var v=this.getData('age_gender');if(v instanceof i){return s.createElement(r,null);}else if(v instanceof h){return s.createElement(k,{message:v.getMessage()});}else{if(!v.getData().length)return s.createElement(k,{message:m.errors.no_data});v=this.processFalcorGenderAgeData(v);return (s.createElement(q,{ref:"gender_age",xAxisValues:v.ages,legendValues:v.legend,chartData:v.chartData,exportData:v["export"],totalCount:1}));}},_getParamsToLog:function(){return {card_section:this.state.activeSection.toLowerCase()};},_shouldLogAfterComponentDidUpdate:function(v,w){return this.state.activeSection!==w.activeSection;},_supportsProgressiveDataLoading:function(){return false;}});e.exports=u;},null);
__d("FalcorUsersTrendCard",["BonsaiApiBreakdown","BonsaiApiDataAdapter","BonsaiAreasTimeSeriesChart","BonsaiBreakdownChart","BonsaiConfig","BonsaiLinesTimeSeriesChart","BonsaiSectionDataLoaderMixin","BonsaiText","FalcorBreakdownChartSwitcher","FalcorLegendSelectorMixin","FalcorLogCardViewMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=r.createClass({displayName:"FalcorUsersTrendCard",mixins:[m,p,q],getInitialState:function(){return Object.assign({},this._getInitialCardState('newLogin'),{activeBreakdown:g.NONE});},componentWillMount:function(){this.addMetric('dau','facebook_features_daily_active_users',{summary:true});this.addMetric('wau','facebook_features_weekly_active_users',{summary:true});this.addMetric('mau','facebook_features_monthly_active_users',{summary:true});this.addMetric('lifetime','facebook_login_total_users');this.addMetric('installs_facebook','initial_permission_grants_facebook',{breakdowns:[g.CLIENT]});this.addMetric('installs_anonymous','initial_permission_grants_anonymous',{breakdowns:[g.CLIENT]});this.addMetric('uninstalls_facebook','permission_revocations_facebook');this.addMetric('uninstalls_anonymous','permission_revocations_anonymous');this.fetchMetrics();},_title:function(){return s._("Actividad de inicio de sesi\u00f3n de Facebook");},_getNewLoginsChart:function(){var u=h.mergeAsBreakdown(g.LOGIN_TYPE,{facebook:this.getData('installs_facebook'),anonymous:this.getData('installs_anonymous')}).filterSingleDataPointsForBreakdown(g.LOGIN_TYPE),v=r.createElement(j,{ref:k.showLoginType?null:'newLogin',breakdown:g.CLIENT,currentCard:this.props.cardKey,data:u,key:g.CLIENT});if(k.showLoginType){return (r.createElement(o,{ref:"newLogin",currentCard:this.props.cardKey,onBreakdownChange:this._onBreakdownChange},r.createElement(j,{breakdown:g.LOGIN_TYPE,currentCard:this.props.cardKey,data:u,key:g.LOGIN_TYPE}),v));}else return v;},_getPermissionRemovalsChart:function(){var u=h.mergeAsBreakdown(g.LOGIN_TYPE,{facebook:this.getData('uninstalls_facebook'),anonymous:this.getData('uninstalls_anonymous')}).filterZeroValues().filterSingleDataPointsForBreakdown(g.LOGIN_TYPE);return (r.createElement(j,r.__spread({},this._getLegendProps(),{ref:"removal",breakdown:g.LOGIN_TYPE,data:u})));},_getHelptextMap:function(){return {newLogin:'NewLogins',removal:'UsersTrend',active:'ActiveUsers',lifetime:'TotalUsers'};},_getKeyToLabel:function(){var u=s._("Nuevos inicios de sesi\u00f3n"),v=s._("Eliminaciones de permisos");return {newLogin:u,removal:v,active:n.users_active,lifetime:n.total_new_logins};},_getKeyToSection:function(){var u=Object.assign({},this._getLegendProps(),{disableRangeSelection:true});return {newLogin:this._getNewLoginsChart(),removal:this._buildTimeSeriesChartGroup(this._getPermissionRemovalsChart()),active:this._buildTimeSeriesChartGroup(r.createElement(l,r.__spread({},u,{ref:"active",data:[this.getData('mau'),this.getData('wau'),this.getData('dau')],titles:[n.users_monthly,n.users_weekly,n.users_daily]}))),lifetime:this._buildTimeSeriesChartGroup(r.createElement(i,r.__spread({},u,{ref:"lifetime",data:[this.getData('lifetime')],titles:[n.users_total]})))};},_onBreakdownChange:function(u){this.setState({activeBreakdown:u});},_getParamsToLog:function(){return {card_breakdown:this.state.activeBreakdown.toLowerCase(),card_section:this.state.activeSection.toLowerCase()};},_shouldLogAfterComponentDidUpdate:function(u,v){return this.state.activeSection!==v.activeSection||this.state.activeBreakdown!==v.activeBreakdown;}});e.exports=t;},null);
__d("FalcorUsersSectionController",["FalcorAnonymousLoginDialogCard","FalcorAppCenterCard","BonsaiConfig","BonsaiSections","BonsaiSectionDisplayNames","InsightsContext","FalcorSectionDateRangeMixin","FalcorSectionRendererMixin","FalcorLoginDialogCard","OverviewLoginBar","React","FalcorUsersDemoCard","FalcorUsersTrendCard"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=q.createClass({displayName:"FalcorUsersSectionController",mixins:[m,n],statics:{getKey:function(){return j.LOGIN;}},getSummary:function(){return (q.createElement(p,q.__spread({},this.getDateProps())));},getTitle:function(){return k.get(t.getKey());},getContent:function(){var u=[q.createElement(s,q.__spread({},this.getDateProps(),{cardKey:"users_trend",key:"users_trend"})),q.createElement(o,q.__spread({},this.getDateProps(),{cardKey:"login_dialog",key:"login_dialog"}))];if(i.showLoginType&&l.getHasAnonLogin())u.push(q.createElement(g,q.__spread({},this.getDateProps(),{cardKey:"anonymous_login_dialog",key:"anonymous_login_dialog"})));if(l.isAppCenterApproved())u.push(q.createElement(h,q.__spread({},this.getDateProps(),{cardKey:"app_center",key:"app_center"})));u.push(q.createElement(r,q.__spread({},this.getDateProps(),{cardKey:"users_demo",key:"users_demo"})));return u;}});e.exports=t;},null);
__d("FalcorMainController",["ApiClient","AsyncRequest","BonsaiConfig","BonsaiCustomEventsHistory","BonsaiAppEventTypesUtils","BonsaiEventLabelLoaderMixin","BonsaiSectionDisplayNames","BonsaiUtils","DeveloperInsightsLogger","FalcorContentController","FalcorImages","InsightsApiAccess","InsightsContext","InsightsEventLogger","InsightsExpandableSideNav.react","InsightsGraphAPI","Promise","React","ReactFragment","XAppAnalyticsPredefinedFeaturesAsyncController","FalcorA2USectionController","FalcorCohortsSectionController","FalcorCustomEventsSectionController","FalcorDeveloperSectionController","FalcorGroupsSectionController","FalcorInsightsFunnelSectionController","FalcorMobileMeasurementSectionController","FalcorMobileMeasurementUnavailableSectionController","FalcorMonetizeSectionController","FalcorOverviewSectionController","FalcorSettingsSectionController","FalcorReferralsSectionController","FalcorRequestsSectionController","FalcorInvitesSectionController","FalcorSegmentsSectionController","FalcorStoriesSectionController","FalcorUsersSectionController","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra){b.__markCompiled&&b.__markCompiled();var sa=u.Group,ta=u.Item,ua=x,va=ua.PropTypes,wa=x.createClass({displayName:"FalcorMainController",mixins:[l],propTypes:{app_id:va.string.isRequired,app_center_approved:va.bool.isRequired,app_name:va.string.isRequired,does_app_advertise:va.bool.isRequired,does_app_log_implicit_purchase_events:va.bool.isRequired,associated_legacy_ad_account_ids:va.array.isRequired,create_ad_link:va.string.isRequired,create_ad_install_link:va.string.isRequired,create_ad_engagement_link:va.string.isRequired,custom_events:va.array.isRequired,predefined_events_for_pixels:va.array.isRequired,has_ios:va.bool.isRequired,has_android:va.bool.isRequired,has_canvas:va.bool.isRequired,has_payments:va.bool.isRequired,has_ads_network:va.bool.isRequired,has_anonymous_login:va.bool.isRequired,has_anonymous_upgrades:va.bool.isRequired,laser_max_date_range:va.object.isRequired,is_mobile_measurement_enabled:va.bool.isRequired,insights_show_mobile_measurement_ui_gk:va.bool.isRequired,insights_show_new_mm_ui_gk:va.bool.isRequired,mm_report_show_networks_and_events:va.bool.isRequired,mm_app_id:va.string,is_demo_app:va.bool.isRequired,is_read_only:va.bool.isRequired,has_requests:va.bool.isRequired,has_app_invites:va.bool.isRequired,has_structured_requests:va.bool.isRequired,has_gamer_groups:va.bool.isRequired,is_game:va.bool.isRequired,opengraph_action_types:va.object.isRequired,opengraph_object_types:va.object.isRequired,other_apps:va.array.isRequired,using_a2u:va.bool.isRequired,show_canvas_events:va.bool.isRequired,show_retention_chart_values:va.bool.isRequired,show_time_spent:va.bool.isRequired,show_implicit_purchase_events_upsell:va.bool.isRequired,show_app_events_settings:va.bool.isRequired,show_social_plugin_events:va.bool.isRequired},getInitialState:function(){return {activeSectionName:s.getDefaultSectionName(),preloadAysncRequestsComplete:false};},componentWillMount:function(){s.setBonsaiApiAccess(r.accessToken,r.clientID);s.setPageStateByURI();s.setAssociatedLegacyAdAccountIds(this.props.associated_legacy_ad_account_ids);s.setAdLink(this.props.create_ad_link);s.setAdInstallLink(this.props.create_ad_install_link);s.setAdEngagementLink(this.props.create_ad_engagement_link);s.setObjID(this.props.app_id);s.setObjName(this.props.app_name);s.setCanSeeCustomEventsDebug(this.props.can_see_custom_events_debug);s.setCanSeeInternalPayments(this.props.can_see_internal_payments);s.setCustomEvents(this.props.custom_events);s.setPredefinedEventsForPixels(this.props.predefined_events_for_pixels);s.setDevObjLink(this.props.dev_app_link);s.setDevObjDetailsLink(this.props.dev_app_details_link);s.setDoesAppAdvertise(this.props.does_app_advertise);s.setDoesAppLogImplicitPurchaseEvents(this.props.does_app_log_implicit_purchase_events);s.setLatestSDKsForAppEventLogging(this.props.latest_sdks_for_app_event_logging);s.setLastLoggedEventTime(this.props.last_logged_event_time);s.setV1ObjLink('/insights/?sk=ao_'+this.props.app_id);s.setHasIOS(this.props.has_ios);s.setHasAndroid(this.props.has_android);s.setHasCanvas(this.props.has_canvas);s.setHasPayments(this.props.has_payments);s.setHasAdsNetwork(this.props.has_ads_network);s.setAdsPlacements(this.props.ads_placements);s.setHasRequests(this.props.has_requests);s.setHasStructuredRequests(this.props.has_structured_requests);s.setHasAnonLogin(this.props.has_anonymous_login||this.props.has_anonymous_upgrades);s.setHasGamerGroups(this.props.has_gamer_groups);s.setIsAppCenterApproved(this.props.app_center_approved);s.setIsUserAdmin(this.props.is_user_admin);s.setIsUserDeveloper(this.props.is_user_developer);s.setIsGame(this.props.is_game);s.setOtherObjects(this.props.other_apps);s.setOGObjectTypes(this.props.opengraph_object_types);s.setOGActionTypes(this.props.opengraph_action_types);s.setThumbnail(this.props.app_icon_url);s.setUsingA2U(this.props.using_a2u);s.setShowAppInvites(this.props.has_app_invites);s.setShowCanvasEvents(this.props.show_canvas_events);s.setShowRetentionChartValues(this.props.show_retention_chart_values);s.setShowImplicitPurchaseEventsUpsell(this.props.show_implicit_purchase_events_upsell);s.setShowImplicitCanvasInstallNotice(this.props.show_implicit_canvas_install_notice);s.setShowAppEventsSettings(this.props.show_app_events_settings);s.setShowNewTimeSpentUI(this.props.show_time_spent);s.setShowMobileMeasurement(this.props.insights_show_mobile_measurement_ui_gk);s.setShowNewMobileMeasurement(this.props.insights_show_new_mm_ui_gk);s.setShowMMReportFields(this.props.mm_report_show_networks_and_events);s.setMMAppID(this.props.mm_app_id);s.setIsMobileMeasurementEnabled(this.props.is_mobile_measurement_enabled);s.setIsReadOnly(this.props.is_read_only);s.setIsDemoApp(this.props.is_demo_app);s.setShowSocialPluginEvents(this.props.show_social_plugin_events);s.setLaserMaxDateRange(this.props.laser_max_date_range);this.fetchEventLabels();g.setAccessToken(r.accessToken);g.setClientID(r.clientID);v.setInsightsObjectID(s.getObjID());var xa=new w(function(ya,za){return new h().setURI(z.getURIBuilder().setInt('app_id',this.props.app_id).getURI()).setMethod('POST').setHandler(ya).setData({access_token:r.accessToken}).setErrorHandler(function(ab){return za(ab.getErrorSummary());}).send();}.bind(this));w.all([k.init(),xa]).done(function(){return this.setState({preloadAysncRequestsComplete:true});}.bind(this));this.setState({activeSectionName:s.getActiveSectionName()});t.logEvent({_eventName:'page_load',section:s.getActiveSectionName().toLowerCase(),screen_width:screen.width,screen_height:screen.height,resolution:screen.width.toString()+' x '+screen.height.toString(),referrer:window.referrer?window.referrer:null});},createTab:function(xa){if(xa===null)return null;var ya=n.getBaseInsightsURI(),za=xa.type.getKey();ya.addQueryData({section:za});if(za==this.state.activeSectionName)this.activeSection=xa;return (x.createElement(ta,{key:za,sectionName:za,href:ya.toString()},m.get(za)));},createHeaderTab:function(xa,ya){var za=n.getBaseInsightsURI();za.addQueryData({section:xa});return (x.createElement(ta,{sectionName:xa,href:za.toString()},ya));},render:function(){if(!this.state.preloadAysncRequestsComplete)return x.createElement("div",null);o.logAction('initial_page_load');j.maybeLogHistoryEntry();var xa={},ya=function(rb){xa[rb.type.getKey()]=rb;return this.createTab(rb);}.bind(this),za=ya(x.createElement(ja,null)),ab=s.showRequestsSection()?ya(x.createElement(ma,null)):null,bb=s.getUsingA2U()?ya(x.createElement(aa,null)):null,cb=s.getShowAppInvites()?ya(x.createElement(na,null)):null,db=i.showCustomEventsSection?ya(x.createElement(ca,{events:s.getCustomEvents()})):null,eb=ya(x.createElement(fa,null)),fb=ya(x.createElement(ba,null)),gb=s.getHasGamerGroups()?ya(x.createElement(ea,null)):null,hb=s.allowedToSeeMonetize()?ya(x.createElement(ia,null)):null,ib=x.createElement(la,null),jb=this.createHeaderTab(ib.type.getKey(),ra._("Integrations"));ib=ya(ib);var kb=ya(x.createElement(qa,null)),lb=ya(x.createElement(oa,null)),mb=ya(x.createElement(pa,null)),nb=ya(x.createElement(da,null)),ob=x.createElement(ka,null);xa[ob.type.getKey()]=ob;var pb=[x.createElement(sa,{key:"overview_tab",icon:{active:q.OVERVIEW_ACTIVE,inactive:q.OVERVIEW_INACTIVE}},za),x.createElement(sa,{key:"app_events_tab",icon:{active:q.EVENTS_ACTIVE,inactive:q.EVENTS_INACTIVE}},db),x.createElement(sa,{key:"funnel_tab",icon:{active:q.FUNNELS_ACTIVE,inactive:q.FUNNELS_INACTIVE}},eb),x.createElement(sa,{key:"cohort_tab",icon:{active:q.COHORTS_ACTIVE,inactive:q.COHORTS_INACTIVE}},fb),x.createElement(sa,{key:"segments_tab",icon:{active:q.SEGMENTS_ACTIVE,inactive:q.SEGMENTS_INACTIVE}},lb),x.createElement(sa,{key:"insights_tab",icon:{active:q.INTEGRATIONS_ACTIVE,inactive:q.INTEGRATIONS_INACTIVE}},jb,ib,kb,mb,gb,hb,ab,bb,cb,nb)],qb;if(s.getShowNewMobileMeasurement()){qb=ya(x.createElement(ga,null));}else qb=ya(x.createElement(ha,null));pb.push(x.createElement(sa,{key:"mobile_measurement_tab",icon:{active:q.APP_ADS_ACTIVE,inactive:q.APP_ADS_INACTIVE}},qb));return (x.createElement(p,null,pb,y.create(xa)));}});e.exports=wa;},null);
__d("CustomEventPercentileTargetingDialog",["InsightsContext","DeveloperInsightsLogger","React","URI","XUIButton.react","XUIDialogBody.react","XUIDialogFooter.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=i,q=p.PropTypes,r=i.createClass({displayName:"CustomEventPercentileTargetingDialog",propTypes:{event:q.object.isRequired,interval:q.number.isRequired,onCancel:q.func,percentile:q.number.isRequired,tab:q.string.isRequired},render:function(){var s={aln:'maca',alc:JSON.stringify({rule:{application:g.getObjID().toString(),days:this.props.interval.toString(),eventName:this.props.event.name,measurement:this.props.tab,percentile:this.props.percentile.toString()}})},t=g.getAssociatedLegacyAdAccountIds();if(t.length)s.act=t[0];var u=new j('/ads/manage/audiences.php').addQueryData(s).toString(),v=new j("/docs/ads-for-apps/mobile-app-custom-audiences").setSubdomain("developers").toString();return (i.createElement("div",null,i.createElement(l,{className:"_4pcx"},i.createElement("span",null,o._("Dirige tus anuncios a estos usuarios creando un p\u00fablico personalizado.")),i.createElement("p",null,o._("Combinar p\u00fablicos personalizados con los anuncios de interacci\u00f3n con aplicaciones es una forma eficaz de anunciarte a tus usuarios m\u00e1s valiosos o activos."),i.createElement("a",{href:v,target:"_blank"},' ',o._("M\u00e1s informaci\u00f3n")))),i.createElement(m,null,i.createElement(k,{label:o._("Cancelar"),onClick:this.props.onCancel,use:"default"}),i.createElement(k,{href:{url:u},label:o._("Crear p\u00fablico personalizado"),onClick:this.onClickCreate,use:"confirm"}))));},onClickCreate:function(event){h.logAction('appEventsConvertToMACA');}});e.exports=r;},null);